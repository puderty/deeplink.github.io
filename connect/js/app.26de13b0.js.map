{"version":3,"file":"js/app.26de13b0.js","mappings":"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","sources":["webpack://okxconnect/../src/index.js","webpack://okxconnect/../src/ton/protocol/crypto/index.js","webpack://okxconnect/../src/ton/protocol/crypto/session-crypto.js","webpack://okxconnect/../src/ton/protocol/index.js","webpack://okxconnect/../src/ton/protocol/models/CHAIN.js","webpack://okxconnect/../src/ton/protocol/models/app-message/connect-request/index.js","webpack://okxconnect/../src/ton/protocol/models/app-message/index.js","webpack://okxconnect/../src/ton/protocol/models/app-message/request/index.js","webpack://okxconnect/../src/ton/protocol/models/index.js","webpack://okxconnect/../src/ton/protocol/models/wallet-message/index.js","webpack://okxconnect/../src/ton/protocol/models/wallet-message/wallet-event/connect-event.js","webpack://okxconnect/../src/ton/protocol/models/wallet-message/wallet-event/index.js","webpack://okxconnect/../src/ton/protocol/models/wallet-message/wallet-response/disconnect-rpc-response.js","webpack://okxconnect/../src/ton/protocol/models/wallet-message/wallet-response/index.js","webpack://okxconnect/../src/ton/protocol/models/wallet-message/wallet-response/send-transaction-rpc-response.js","webpack://okxconnect/../src/ton/protocol/models/wallet-message/wallet-response/sign-data-rpc-response.js","webpack://okxconnect/../src/ton/protocol/utils/base64.js","webpack://okxconnect/../src/ton/protocol/utils/binary.js","webpack://okxconnect/../src/ton/protocol/utils/index.js","webpack://okxconnect/../src/ton/protocol/utils/web-api.js","webpack://okxconnect/../src/ton/tonsdk/constants/version.js","webpack://okxconnect/../src/ton/tonsdk/engine.js","webpack://okxconnect/../src/ton/tonsdk/errors/address/index.js","webpack://okxconnect/../src/ton/tonsdk/errors/address/wrong-address.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/binary/index.js","webpack://okxconnect/../src/ton/tonsdk/errors/binary/parse-hex.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/dapp/dapp-metadata.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/index.js","webpack://okxconnect/../src/ton/tonsdk/errors/protocol/events/connect/index.js","webpack://okxconnect/../src/ton/tonsdk/errors/protocol/events/connect/manifest-content-error.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/protocol/events/connect/manifest-not-found.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/protocol/events/connect/user-rejects.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/protocol/events/index.js","webpack://okxconnect/../src/ton/tonsdk/errors/protocol/index.js","webpack://okxconnect/../src/ton/tonsdk/errors/protocol/responses/bad-request.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/protocol/responses/index.js","webpack://okxconnect/../src/ton/tonsdk/errors/protocol/responses/unknown-app.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/storage/index.js","webpack://okxconnect/../src/ton/tonsdk/errors/storage/localstorage-not-found.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/ton-connect.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/unknown.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/wallet/index.js","webpack://okxconnect/../src/ton/tonsdk/errors/wallet/wallet-already-connected.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/wallet/wallet-not-connected.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/wallet/wallet-not-injected.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/wallet/wallet-not-support-feature.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/wallets-manager/fetch-wallets.error.js","webpack://okxconnect/../src/ton/tonsdk/errors/wallets-manager/index.js","webpack://okxconnect/../src/ton/tonsdk/parsers/connect-errors-parser.js","webpack://okxconnect/../src/ton/tonsdk/parsers/rpc-parser.js","webpack://okxconnect/../src/ton/tonsdk/parsers/send-transaction-parser.js","webpack://okxconnect/../src/ton/tonsdk/provider/bridge/bridge-provider.js","webpack://okxconnect/../src/ton/tonsdk/provider/bridge/models/bridge-connection.js","webpack://okxconnect/../src/ton/tonsdk/resources/fallback-wallets-list.js","webpack://okxconnect/../src/ton/tonsdk/storage/bridge-connection-storage.js","webpack://okxconnect/../src/ton/tonsdk/storage/default-storage.js","webpack://okxconnect/../src/ton/tonsdk/storage/models/in-memory-storage.js","webpack://okxconnect/../src/ton/tonsdk/ton-connect.js","webpack://okxconnect/../src/ton/tonsdk/tracker/browser-event-dispatcher.js","webpack://okxconnect/../src/ton/tonsdk/tracker/ton-connect-tracker.js","webpack://okxconnect/../src/ton/tonsdk/tracker/types.js","webpack://okxconnect/../src/ton/tonsdk/utils/call-for-success.js","webpack://okxconnect/../src/ton/tonsdk/utils/delay.js","webpack://okxconnect/../src/ton/tonsdk/utils/feature-support.js","webpack://okxconnect/../src/ton/tonsdk/utils/log.js","webpack://okxconnect/../src/ton/tonsdk/utils/url.js","webpack://okxconnect/../src/ton/tonsdk/utils/web-api.js","webpack://okxconnect/../src/ton/tonsdk/wallets-list-manager.js","webpack://okxconnect/../src/utils/connect/connect.js","webpack://okxconnect/../src/utils/connect/connectionManager.js","webpack://okxconnect/../src/utils/connect/constants.js","webpack://okxconnect/../src/utils/connect/jwt.js","webpack://okxconnect/../src/utils/connect/storage.js","webpack://okxconnect/../src/utils/crypto.js","webpack://okxconnect/../src/utils/deeplink.js","webpack://okxconnect/../src/utils/misc/safejson.js","webpack://okxconnect/../src/utils/utils.js","webpack://okxconnect/./src/App.vue","webpack://okxconnect/./src/App.vue?7ccd","webpack://okxconnect/./src/main.js","webpack://okxconnect/webpack/bootstrap","webpack://okxconnect/webpack/runtime/chunk loaded","webpack://okxconnect/webpack/runtime/compat get default export","webpack://okxconnect/webpack/runtime/define property getters","webpack://okxconnect/webpack/runtime/global","webpack://okxconnect/webpack/runtime/hasOwnProperty shorthand","webpack://okxconnect/webpack/runtime/make namespace object","webpack://okxconnect/webpack/runtime/jsonp chunk loading","webpack://okxconnect/webpack/startup"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConnectionManager = exports.SessionCrypto = exports.utils = exports.OKXWalletConnector = exports.OKXTonConnect = void 0;\nvar ton_connect_1 = require(\"./ton/tonsdk/ton-connect\");\nObject.defineProperty(exports, \"OKXTonConnect\", { enumerable: true, get: function () { return ton_connect_1.OKXTonConnect; } });\nvar connect_1 = require(\"./utils/connect/connect\");\nObject.defineProperty(exports, \"OKXWalletConnector\", { enumerable: true, get: function () { return connect_1.OKXWalletConnector; } });\nexports.utils = __importStar(require(\"./utils/utils\"));\nvar crypto_1 = require(\"./utils/crypto\");\nObject.defineProperty(exports, \"SessionCrypto\", { enumerable: true, get: function () { return crypto_1.SessionCrypto; } });\nvar connectionManager_1 = require(\"./utils/connect/connectionManager\");\nObject.defineProperty(exports, \"ConnectionManager\", { enumerable: true, get: function () { return connectionManager_1.ConnectionManager; } });\n// window.OKWalletConnectSDK = {\n//     CONNECT: connect,\n//     TON: new tonsdk.OKXTonConnect({metaData: {\n//             name:\"测试dapp\",\n//             icon:\"\",\n//             url:\"\"\n//         }}),\n//     testCrypto: new SessionCrypto(),\n//     utils: utils,\n//     testCM: new ConnectionManager()\n// }\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionCrypto = void 0;\nvar session_crypto_1 = require(\"./session-crypto\");\nObject.defineProperty(exports, \"SessionCrypto\", { enumerable: true, get: function () { return session_crypto_1.SessionCrypto; } });\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionCrypto = void 0;\nconst utils_1 = require(\"../utils\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nclass SessionCrypto {\n    constructor(keyPair) {\n        this.nonceLength = 24;\n        this.keyPair = keyPair ? this.createKeypairFromString(keyPair) : this.createKeypair();\n        this.sessionId = (0, utils_1.toHexString)(this.keyPair.publicKey);\n    }\n    createKeypair() {\n        return tweetnacl_1.default.box.keyPair();\n    }\n    createKeypairFromString(keyPair) {\n        return {\n            publicKey: (0, utils_1.hexToByteArray)(keyPair.publicKey),\n            secretKey: (0, utils_1.hexToByteArray)(keyPair.secretKey)\n        };\n    }\n    createNonce() {\n        console.log(\"in session crypto\");\n        return tweetnacl_1.default.randomBytes(this.nonceLength);\n    }\n    encrypt(message, receiverPublicKey) {\n        const encodedMessage = new TextEncoder().encode(message);\n        const nonce = this.createNonce();\n        const encrypted = tweetnacl_1.default.box(encodedMessage, nonce, receiverPublicKey, this.keyPair.secretKey);\n        return (0, utils_1.concatUint8Arrays)(nonce, encrypted);\n    }\n    decrypt(message, senderPublicKey) {\n        const [nonce, internalMessage] = (0, utils_1.splitToUint8Arrays)(message, this.nonceLength);\n        const decrypted = tweetnacl_1.default.box.open(internalMessage, nonce, senderPublicKey, this.keyPair.secretKey);\n        if (!decrypted) {\n            throw new Error(`Decryption error: \\n message: ${message.toString()} \\n sender pubkey: ${senderPublicKey.toString()} \\n keypair pubkey: ${this.keyPair.publicKey.toString()} \\n keypair secretkey: ${this.keyPair.secretKey.toString()}`);\n        }\n        return new TextDecoder().decode(decrypted);\n    }\n    stringifyKeypair() {\n        return {\n            publicKey: (0, utils_1.toHexString)(this.keyPair.publicKey),\n            secretKey: (0, utils_1.toHexString)(this.keyPair.secretKey)\n        };\n    }\n}\nexports.SessionCrypto = SessionCrypto;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./models\"), exports);\n__exportStar(require(\"./crypto\"), exports);\n__exportStar(require(\"./utils\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CHAIN = void 0;\nvar CHAIN;\n(function (CHAIN) {\n    CHAIN[\"MAINNET\"] = \"-239\";\n    CHAIN[\"TESTNET\"] = \"-3\";\n})(CHAIN || (exports.CHAIN = CHAIN = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./request\"), exports);\n__exportStar(require(\"./connect-request\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CHAIN = void 0;\n__exportStar(require(\"./app-message\"), exports);\n__exportStar(require(\"./wallet-message\"), exports);\nvar CHAIN_1 = require(\"./CHAIN\");\nObject.defineProperty(exports, \"CHAIN\", { enumerable: true, get: function () { return CHAIN_1.CHAIN; } });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./wallet-event\"), exports);\n__exportStar(require(\"./wallet-response\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CONNECT_ITEM_ERROR_CODES = exports.CONNECT_EVENT_ERROR_CODES = void 0;\nvar CONNECT_EVENT_ERROR_CODES;\n(function (CONNECT_EVENT_ERROR_CODES) {\n    CONNECT_EVENT_ERROR_CODES[CONNECT_EVENT_ERROR_CODES[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    CONNECT_EVENT_ERROR_CODES[CONNECT_EVENT_ERROR_CODES[\"BAD_REQUEST_ERROR\"] = 1] = \"BAD_REQUEST_ERROR\";\n    CONNECT_EVENT_ERROR_CODES[CONNECT_EVENT_ERROR_CODES[\"MANIFEST_NOT_FOUND_ERROR\"] = 2] = \"MANIFEST_NOT_FOUND_ERROR\";\n    CONNECT_EVENT_ERROR_CODES[CONNECT_EVENT_ERROR_CODES[\"MANIFEST_CONTENT_ERROR\"] = 3] = \"MANIFEST_CONTENT_ERROR\";\n    CONNECT_EVENT_ERROR_CODES[CONNECT_EVENT_ERROR_CODES[\"UNKNOWN_APP_ERROR\"] = 100] = \"UNKNOWN_APP_ERROR\";\n    CONNECT_EVENT_ERROR_CODES[CONNECT_EVENT_ERROR_CODES[\"USER_REJECTS_ERROR\"] = 300] = \"USER_REJECTS_ERROR\";\n    CONNECT_EVENT_ERROR_CODES[CONNECT_EVENT_ERROR_CODES[\"METHOD_NOT_SUPPORTED\"] = 400] = \"METHOD_NOT_SUPPORTED\";\n})(CONNECT_EVENT_ERROR_CODES || (exports.CONNECT_EVENT_ERROR_CODES = CONNECT_EVENT_ERROR_CODES = {}));\nvar CONNECT_ITEM_ERROR_CODES;\n(function (CONNECT_ITEM_ERROR_CODES) {\n    CONNECT_ITEM_ERROR_CODES[CONNECT_ITEM_ERROR_CODES[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    CONNECT_ITEM_ERROR_CODES[CONNECT_ITEM_ERROR_CODES[\"METHOD_NOT_SUPPORTED\"] = 400] = \"METHOD_NOT_SUPPORTED\";\n})(CONNECT_ITEM_ERROR_CODES || (exports.CONNECT_ITEM_ERROR_CODES = CONNECT_ITEM_ERROR_CODES = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CONNECT_ITEM_ERROR_CODES = exports.CONNECT_EVENT_ERROR_CODES = void 0;\nvar connect_event_1 = require(\"./connect-event\");\nObject.defineProperty(exports, \"CONNECT_EVENT_ERROR_CODES\", { enumerable: true, get: function () { return connect_event_1.CONNECT_EVENT_ERROR_CODES; } });\nObject.defineProperty(exports, \"CONNECT_ITEM_ERROR_CODES\", { enumerable: true, get: function () { return connect_event_1.CONNECT_ITEM_ERROR_CODES; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DISCONNECT_ERROR_CODES = void 0;\nvar DISCONNECT_ERROR_CODES;\n(function (DISCONNECT_ERROR_CODES) {\n    DISCONNECT_ERROR_CODES[DISCONNECT_ERROR_CODES[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    DISCONNECT_ERROR_CODES[DISCONNECT_ERROR_CODES[\"BAD_REQUEST_ERROR\"] = 1] = \"BAD_REQUEST_ERROR\";\n    DISCONNECT_ERROR_CODES[DISCONNECT_ERROR_CODES[\"UNKNOWN_APP_ERROR\"] = 100] = \"UNKNOWN_APP_ERROR\";\n    DISCONNECT_ERROR_CODES[DISCONNECT_ERROR_CODES[\"METHOD_NOT_SUPPORTED\"] = 400] = \"METHOD_NOT_SUPPORTED\";\n})(DISCONNECT_ERROR_CODES || (exports.DISCONNECT_ERROR_CODES = DISCONNECT_ERROR_CODES = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DISCONNECT_ERROR_CODES = exports.SIGN_DATA_ERROR_CODES = exports.SEND_TRANSACTION_ERROR_CODES = void 0;\nvar send_transaction_rpc_response_1 = require(\"./send-transaction-rpc-response\");\nObject.defineProperty(exports, \"SEND_TRANSACTION_ERROR_CODES\", { enumerable: true, get: function () { return send_transaction_rpc_response_1.SEND_TRANSACTION_ERROR_CODES; } });\nvar sign_data_rpc_response_1 = require(\"./sign-data-rpc-response\");\nObject.defineProperty(exports, \"SIGN_DATA_ERROR_CODES\", { enumerable: true, get: function () { return sign_data_rpc_response_1.SIGN_DATA_ERROR_CODES; } });\nvar disconnect_rpc_response_1 = require(\"./disconnect-rpc-response\");\nObject.defineProperty(exports, \"DISCONNECT_ERROR_CODES\", { enumerable: true, get: function () { return disconnect_rpc_response_1.DISCONNECT_ERROR_CODES; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SEND_TRANSACTION_ERROR_CODES = void 0;\nvar SEND_TRANSACTION_ERROR_CODES;\n(function (SEND_TRANSACTION_ERROR_CODES) {\n    SEND_TRANSACTION_ERROR_CODES[SEND_TRANSACTION_ERROR_CODES[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    SEND_TRANSACTION_ERROR_CODES[SEND_TRANSACTION_ERROR_CODES[\"BAD_REQUEST_ERROR\"] = 1] = \"BAD_REQUEST_ERROR\";\n    SEND_TRANSACTION_ERROR_CODES[SEND_TRANSACTION_ERROR_CODES[\"UNKNOWN_APP_ERROR\"] = 100] = \"UNKNOWN_APP_ERROR\";\n    SEND_TRANSACTION_ERROR_CODES[SEND_TRANSACTION_ERROR_CODES[\"USER_REJECTS_ERROR\"] = 300] = \"USER_REJECTS_ERROR\";\n    SEND_TRANSACTION_ERROR_CODES[SEND_TRANSACTION_ERROR_CODES[\"METHOD_NOT_SUPPORTED\"] = 400] = \"METHOD_NOT_SUPPORTED\";\n})(SEND_TRANSACTION_ERROR_CODES || (exports.SEND_TRANSACTION_ERROR_CODES = SEND_TRANSACTION_ERROR_CODES = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SIGN_DATA_ERROR_CODES = void 0;\nvar SIGN_DATA_ERROR_CODES;\n(function (SIGN_DATA_ERROR_CODES) {\n    SIGN_DATA_ERROR_CODES[SIGN_DATA_ERROR_CODES[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    SIGN_DATA_ERROR_CODES[SIGN_DATA_ERROR_CODES[\"BAD_REQUEST_ERROR\"] = 1] = \"BAD_REQUEST_ERROR\";\n    SIGN_DATA_ERROR_CODES[SIGN_DATA_ERROR_CODES[\"UNKNOWN_APP_ERROR\"] = 100] = \"UNKNOWN_APP_ERROR\";\n    SIGN_DATA_ERROR_CODES[SIGN_DATA_ERROR_CODES[\"USER_REJECTS_ERROR\"] = 300] = \"USER_REJECTS_ERROR\";\n    SIGN_DATA_ERROR_CODES[SIGN_DATA_ERROR_CODES[\"METHOD_NOT_SUPPORTED\"] = 400] = \"METHOD_NOT_SUPPORTED\";\n})(SIGN_DATA_ERROR_CODES || (exports.SIGN_DATA_ERROR_CODES = SIGN_DATA_ERROR_CODES = {}));\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Base64 = void 0;\nconst tweetnacl_util_1 = __importDefault(require(\"tweetnacl-util\"));\nfunction encodeUint8Array(value, urlSafe) {\n    const encoded = tweetnacl_util_1.default.encodeBase64(value);\n    if (!urlSafe) {\n        return encoded;\n    }\n    return encodeURIComponent(encoded);\n}\nfunction decodeToUint8Array(value, urlSafe) {\n    if (urlSafe) {\n        value = decodeURIComponent(value);\n    }\n    return tweetnacl_util_1.default.decodeBase64(value);\n}\nfunction encode(value, urlSafe = false) {\n    let uint8Array;\n    if (value instanceof Uint8Array) {\n        uint8Array = value;\n    }\n    else {\n        if (typeof value !== 'string') {\n            value = JSON.stringify(value);\n        }\n        uint8Array = tweetnacl_util_1.default.decodeUTF8(value);\n    }\n    return encodeUint8Array(uint8Array, urlSafe);\n}\nfunction decode(value, urlSafe = false) {\n    const decodedUint8Array = decodeToUint8Array(value, urlSafe);\n    return {\n        toString() {\n            return tweetnacl_util_1.default.encodeUTF8(decodedUint8Array);\n        },\n        toObject() {\n            try {\n                return JSON.parse(tweetnacl_util_1.default.encodeUTF8(decodedUint8Array));\n            }\n            catch (e) {\n                return null;\n            }\n        },\n        toUint8Array() {\n            return decodedUint8Array;\n        }\n    };\n}\nexports.Base64 = {\n    encode,\n    decode\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.concatUint8Arrays = concatUint8Arrays;\nexports.splitToUint8Arrays = splitToUint8Arrays;\nexports.toHexString = toHexString;\nexports.hexToByteArray = hexToByteArray;\nfunction concatUint8Arrays(buffer1, buffer2) {\n    const mergedArray = new Uint8Array(buffer1.length + buffer2.length);\n    mergedArray.set(buffer1);\n    mergedArray.set(buffer2, buffer1.length);\n    return mergedArray;\n}\nfunction splitToUint8Arrays(array, index) {\n    if (index >= array.length) {\n        throw new Error('Index is out of buffer');\n    }\n    const subArray1 = array.slice(0, index);\n    const subArray2 = array.slice(index);\n    return [subArray1, subArray2];\n}\nfunction toHexString(byteArray) {\n    let hexString = '';\n    byteArray.forEach(byte => {\n        hexString += ('0' + (byte & 0xff).toString(16)).slice(-2);\n    });\n    return hexString;\n}\nfunction hexToByteArray(hexString) {\n    if (hexString.length % 2 !== 0) {\n        throw new Error(`Cannot convert ${hexString} to bytesArray`);\n    }\n    const result = new Uint8Array(hexString.length / 2);\n    for (let i = 0; i < hexString.length; i += 2) {\n        result[i / 2] = parseInt(hexString.slice(i, i + 2), 16);\n    }\n    return result;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNode = exports.hexToByteArray = exports.toHexString = exports.splitToUint8Arrays = exports.concatUint8Arrays = exports.Base64 = void 0;\nvar base64_1 = require(\"./base64\");\nObject.defineProperty(exports, \"Base64\", { enumerable: true, get: function () { return base64_1.Base64; } });\nvar binary_1 = require(\"./binary\");\nObject.defineProperty(exports, \"concatUint8Arrays\", { enumerable: true, get: function () { return binary_1.concatUint8Arrays; } });\nObject.defineProperty(exports, \"splitToUint8Arrays\", { enumerable: true, get: function () { return binary_1.splitToUint8Arrays; } });\nObject.defineProperty(exports, \"toHexString\", { enumerable: true, get: function () { return binary_1.toHexString; } });\nObject.defineProperty(exports, \"hexToByteArray\", { enumerable: true, get: function () { return binary_1.hexToByteArray; } });\nvar web_api_1 = require(\"./web-api\");\nObject.defineProperty(exports, \"isNode\", { enumerable: true, get: function () { return web_api_1.isNode; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNode = isNode;\nfunction isNode() {\n    return (typeof process !== 'undefined' && process.versions != null && process.versions.node != null);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tonConnectSdkVersion = void 0;\nexports.tonConnectSdkVersion = '1';\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Engine = void 0;\nconst bridge_connection_storage_1 = require(\"./storage/bridge-connection-storage\");\nconst default_storage_1 = require(\"./storage/default-storage\");\nconst call_for_success_1 = require(\"./utils/call-for-success\");\nconst safejson_1 = require(\"../../utils/misc/safejson\");\nclass Engine {\n    constructor(connectionManager) {\n        this.pendingRequests = new Map();\n        this.disconnectListener = [];\n        this.connectionManager = connectionManager;\n        this.connectionStorage = new bridge_connection_storage_1.BridgeConnectionStorage(new default_storage_1.DefaultStorage());\n        this.connectionManager.addListener(\"ton_sdk_response\", (event, msg) => {\n            var jsonResponse = (0, safejson_1.safeJsonParse)(msg);\n            this.handleResponse(event, jsonResponse);\n        }, function () {\n        });\n    }\n    addDisconnectListener(disconnecter) {\n        this.disconnectListener.push(disconnecter);\n    }\n    disconnect() {\n        this.pendingRequests.clear();\n    }\n    getRequestId() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const requestId = (yield this.connectionStorage.getNextRpcRequestId()).toString();\n            yield this.connectionStorage.increaseNextRpcRequestId();\n            console.log(`getRequestId   =====>   ${requestId}`);\n            return requestId;\n        });\n    }\n    bindRequestForPromise(requestId, resolve) {\n        this.pendingRequests.set(requestId, resolve);\n    }\n    send(request, resolve, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const requestId = yield this.getRequestId();\n            (0, call_for_success_1.callForSuccess)(() => this.connectionManager.send(JSON.stringify(Object.assign(Object.assign({}, request), { requestId: requestId }))), option);\n            this.bindRequestForPromise(requestId, resolve);\n        });\n    }\n    handleResponse(event, response) {\n        console.log(`handleResponse  ======> ${(0, safejson_1.safeJsonStringify)(response)}`);\n        if (\"requestId\" in response) {\n            console.log(\"handleResponse  ===> in response\");\n            let requestId = response.requestId;\n            const resolve = this.pendingRequests.get(requestId);\n            if (resolve) {\n                console.log(\"handleResponse  ===> find resolve\", resolve);\n                resolve(response);\n                // 从pendingRequests中删除这个Promise\n                this.pendingRequests.delete(requestId);\n            }\n            else {\n                console.log(\"handleResponse  ===>  not find resolve\");\n                if (response.method === \"disconnect\") {\n                    this.disconnectListener.forEach(listener => listener());\n                    this.disconnectListener = [];\n                    this.disconnect();\n                }\n            }\n        }\n    }\n}\nexports.Engine = Engine;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WrongAddressError = void 0;\nvar wrong_address_error_1 = require(\"./wrong-address.error\");\nObject.defineProperty(exports, \"WrongAddressError\", { enumerable: true, get: function () { return wrong_address_error_1.WrongAddressError; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WrongAddressError = void 0;\nconst ton_connect_error_1 = require(\"../ton-connect.error\");\n/**\n * Thrown when passed address is in incorrect format.\n */\nclass WrongAddressError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'Passed address is in incorrect format.';\n    }\n}\nexports.WrongAddressError = WrongAddressError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParseHexError = void 0;\nvar parse_hex_error_1 = require(\"./parse-hex.error\");\nObject.defineProperty(exports, \"ParseHexError\", { enumerable: true, get: function () { return parse_hex_error_1.ParseHexError; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParseHexError = void 0;\nconst ton_connect_error_1 = require(\"../ton-connect.error\");\n/**\n * Thrown when passed hex is in incorrect format.\n */\nclass ParseHexError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'Passed hex is in incorrect format.';\n    }\n}\nexports.ParseHexError = ParseHexError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DappMetadataError = void 0;\nconst ton_connect_error_1 = require(\"../ton-connect.error\");\n/**\n * Thrown when passed DappMetadata is in incorrect format.\n */\nclass DappMetadataError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'Passed DappMetadata is in incorrect format.';\n    }\n}\nexports.DappMetadataError = DappMetadataError;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UnknownError = exports.TonConnectError = void 0;\n__exportStar(require(\"./protocol\"), exports);\n__exportStar(require(\"./wallet\"), exports);\n__exportStar(require(\"./storage\"), exports);\n__exportStar(require(\"./wallets-manager\"), exports);\n__exportStar(require(\"./address\"), exports);\n__exportStar(require(\"./binary\"), exports);\nvar ton_connect_error_1 = require(\"./ton-connect.error\");\nObject.defineProperty(exports, \"TonConnectError\", { enumerable: true, get: function () { return ton_connect_error_1.TonConnectError; } });\nvar unknown_error_1 = require(\"./unknown.error\");\nObject.defineProperty(exports, \"UnknownError\", { enumerable: true, get: function () { return unknown_error_1.UnknownError; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserRejectsError = void 0;\nvar user_rejects_error_1 = require(\"./user-rejects.error\");\nObject.defineProperty(exports, \"UserRejectsError\", { enumerable: true, get: function () { return user_rejects_error_1.UserRejectsError; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ManifestContentErrorError = void 0;\nconst ton_connect_error_1 = require(\"../../../ton-connect.error\");\n/**\n * Thrown when passed manifest contains errors.\n */\nclass ManifestContentErrorError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest';\n    }\n}\nexports.ManifestContentErrorError = ManifestContentErrorError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ManifestNotFoundError = void 0;\nconst ton_connect_error_1 = require(\"../../../ton-connect.error\");\n/**\n * Thrown when wallet can't get manifest by passed manifestUrl.\n */\nclass ManifestNotFoundError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest';\n    }\n}\nexports.ManifestNotFoundError = ManifestNotFoundError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserRejectsError = void 0;\nconst ton_connect_error_1 = require(\"../../../ton-connect.error\");\n/**\n * Thrown when user rejects the action in the wallet.\n */\nclass UserRejectsError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'User rejects the action in the wallet.';\n    }\n}\nexports.UserRejectsError = UserRejectsError;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./connect\"), exports);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./events\"), exports);\n__exportStar(require(\"./responses\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BadRequestError = void 0;\nconst ton_connect_error_1 = require(\"../../ton-connect.error\");\n/**\n * Thrown when request to the wallet contains errors.\n */\nclass BadRequestError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'Request to the wallet contains errors.';\n    }\n}\nexports.BadRequestError = BadRequestError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UnknownAppError = exports.BadRequestError = void 0;\nvar bad_request_error_1 = require(\"./bad-request.error\");\nObject.defineProperty(exports, \"BadRequestError\", { enumerable: true, get: function () { return bad_request_error_1.BadRequestError; } });\nvar unknown_app_error_1 = require(\"./unknown-app.error\");\nObject.defineProperty(exports, \"UnknownAppError\", { enumerable: true, get: function () { return unknown_app_error_1.UnknownAppError; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UnknownAppError = void 0;\nconst ton_connect_error_1 = require(\"../../ton-connect.error\");\n/**\n * Thrown when app tries to send rpc request to the injected wallet while not connected.\n */\nclass UnknownAppError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'App tries to send rpc request to the injected wallet while not connected.';\n    }\n}\nexports.UnknownAppError = UnknownAppError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LocalstorageNotFoundError = void 0;\nvar localstorage_not_found_error_1 = require(\"./localstorage-not-found.error\");\nObject.defineProperty(exports, \"LocalstorageNotFoundError\", { enumerable: true, get: function () { return localstorage_not_found_error_1.LocalstorageNotFoundError; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LocalstorageNotFoundError = void 0;\nconst ton_connect_error_1 = require(\"../ton-connect.error\");\n/**\n * Thrown when `Storage` was not specified in the `DappMetadata` and default `localStorage` was not detected in the Node.js environment.\n */\nclass LocalstorageNotFoundError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'Storage was not specified in the `DappMetadata` and default `localStorage` was not detected in the environment.';\n    }\n}\nexports.LocalstorageNotFoundError = LocalstorageNotFoundError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TonConnectError = void 0;\n/**\n * Base class for TonConnect errors. You can check if the error was triggered by the @tonconnect/sdk using `err instanceof TonConnectError`.\n */\nclass TonConnectError extends Error {\n    get info() {\n        return '';\n    }\n    constructor(message) {\n        super(message);\n        this.message = `${TonConnectError.prefix} ${this.constructor.name}${this.info ? ': ' + this.info : ''}${message ? '\\n' + message : ''}`;\n        Object.setPrototypeOf(this, TonConnectError.prototype);\n    }\n}\nexports.TonConnectError = TonConnectError;\nTonConnectError.prefix = '[TON_CONNECT_SDK_ERROR]';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UnknownError = void 0;\nconst ton_connect_error_1 = require(\"./ton-connect.error\");\n/**\n * Unhanded unknown error.\n */\nclass UnknownError extends ton_connect_error_1.TonConnectError {\n}\nexports.UnknownError = UnknownError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletNotInjectedError = exports.WalletNotConnectedError = exports.WalletAlreadyConnectedError = void 0;\nvar wallet_already_connected_error_1 = require(\"./wallet-already-connected.error\");\nObject.defineProperty(exports, \"WalletAlreadyConnectedError\", { enumerable: true, get: function () { return wallet_already_connected_error_1.WalletAlreadyConnectedError; } });\nvar wallet_not_connected_error_1 = require(\"./wallet-not-connected.error\");\nObject.defineProperty(exports, \"WalletNotConnectedError\", { enumerable: true, get: function () { return wallet_not_connected_error_1.WalletNotConnectedError; } });\nvar wallet_not_injected_error_1 = require(\"./wallet-not-injected.error\");\nObject.defineProperty(exports, \"WalletNotInjectedError\", { enumerable: true, get: function () { return wallet_not_injected_error_1.WalletNotInjectedError; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletAlreadyConnectedError = void 0;\nconst ton_connect_error_1 = require(\"../ton-connect.error\");\n/**\n * Thrown when wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection.\n */\nclass WalletAlreadyConnectedError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection.';\n    }\n}\nexports.WalletAlreadyConnectedError = WalletAlreadyConnectedError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletNotConnectedError = void 0;\nconst ton_connect_error_1 = require(\"../ton-connect.error\");\n/**\n * Thrown when send transaction or other protocol methods called while wallet is not connected.\n */\nclass WalletNotConnectedError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'Send transaction or other protocol methods called while wallet is not connected.';\n    }\n}\nexports.WalletNotConnectedError = WalletNotConnectedError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletNotInjectedError = void 0;\nconst ton_connect_error_1 = require(\"../ton-connect.error\");\n/**\n * Thrown when there is an attempt to connect to the injected wallet while it is not exists in the webpage.\n */\nclass WalletNotInjectedError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'There is an attempt to connect to the injected wallet while it is not exists in the webpage.';\n    }\n}\nexports.WalletNotInjectedError = WalletNotInjectedError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletNotSupportFeatureError = void 0;\nconst ton_connect_error_1 = require(\"../ton-connect.error\");\n/**\n * Thrown when wallet doesn't support requested feature method.\n */\nclass WalletNotSupportFeatureError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return \"Wallet doesn't support requested feature method.\";\n    }\n}\nexports.WalletNotSupportFeatureError = WalletNotSupportFeatureError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FetchWalletsError = void 0;\nconst ton_connect_error_1 = require(\"../ton-connect.error\");\n/**\n * Thrown when an error occurred while fetching the wallets list.\n */\nclass FetchWalletsError extends ton_connect_error_1.TonConnectError {\n    get info() {\n        return 'An error occurred while fetching the wallets list.';\n    }\n}\nexports.FetchWalletsError = FetchWalletsError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FetchWalletsError = void 0;\nvar fetch_wallets_error_1 = require(\"./fetch-wallets.error\");\nObject.defineProperty(exports, \"FetchWalletsError\", { enumerable: true, get: function () { return fetch_wallets_error_1.FetchWalletsError; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.connectErrorsParser = void 0;\nconst errors_1 = require(\"../errors\");\nconst manifest_content_error_error_1 = require(\"../errors/protocol/events/connect/manifest-content-error.error\");\nconst manifest_not_found_error_1 = require(\"../errors/protocol/events/connect/manifest-not-found.error\");\nconst errors_2 = require(\"../errors\");\nconst protocol_1 = require(\"../../protocol\");\nconst connectEventErrorsCodes = {\n    [protocol_1.CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR]: errors_2.UnknownError,\n    [protocol_1.CONNECT_EVENT_ERROR_CODES.USER_REJECTS_ERROR]: errors_1.UserRejectsError,\n    [protocol_1.CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR]: errors_1.BadRequestError,\n    [protocol_1.CONNECT_EVENT_ERROR_CODES.UNKNOWN_APP_ERROR]: errors_1.UnknownAppError,\n    [protocol_1.CONNECT_EVENT_ERROR_CODES.MANIFEST_NOT_FOUND_ERROR]: manifest_not_found_error_1.ManifestNotFoundError,\n    [protocol_1.CONNECT_EVENT_ERROR_CODES.MANIFEST_CONTENT_ERROR]: manifest_content_error_error_1.ManifestContentErrorError\n};\nclass ConnectErrorsParser {\n    parseError(error) {\n        let ErrorConstructor = errors_2.UnknownError;\n        if (error.code in connectEventErrorsCodes) {\n            ErrorConstructor = connectEventErrorsCodes[error.code] || errors_2.UnknownError;\n        }\n        return new ErrorConstructor(error.message);\n    }\n}\nexports.connectErrorsParser = new ConnectErrorsParser();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RpcParser = void 0;\nclass RpcParser {\n    isError(response) {\n        return 'error' in response;\n    }\n}\nexports.RpcParser = RpcParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sendTransactionParser = void 0;\nconst protocol_1 = require(\"../../protocol\");\nconst errors_1 = require(\"../errors\");\nconst rpc_parser_1 = require(\"./rpc-parser\");\nconst sendTransactionErrors = {\n    [protocol_1.SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR]: errors_1.UnknownError,\n    [protocol_1.SEND_TRANSACTION_ERROR_CODES.USER_REJECTS_ERROR]: errors_1.UserRejectsError,\n    [protocol_1.SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR]: errors_1.BadRequestError,\n    [protocol_1.SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR]: errors_1.UnknownAppError\n};\nclass SendTransactionParser extends rpc_parser_1.RpcParser {\n    convertToRpcRequest(request) {\n        return {\n            method: 'ton_sendTransaction',\n            params: request\n        };\n    }\n    parseAndThrowError(response) {\n        let ErrorConstructor = errors_1.UnknownError;\n        if (response.error.code in sendTransactionErrors) {\n            ErrorConstructor = sendTransactionErrors[response.error.code] || errors_1.UnknownError;\n        }\n        throw new ErrorConstructor(response.error.message);\n    }\n    convertFromRpcResponse(rpcResponse) {\n        return {\n            boc: rpcResponse.result\n        };\n    }\n}\nexports.sendTransactionParser = new SendTransactionParser();\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BridgeProvider = void 0;\nconst bridge_connection_1 = require(\"./models/bridge-connection\");\nconst bridge_connection_storage_1 = require(\"../../storage/bridge-connection-storage\");\nconst url_1 = require(\"../../utils/url\");\nconst log_1 = require(\"../../utils/log\");\nconst connectionManager_1 = require(\"../../../../utils/connect/connectionManager\");\nconst version_1 = require(\"../../constants/version\");\nconst engine_1 = require(\"../../engine\");\nconst wallets_list_manager_1 = require(\"../../wallets-list-manager\");\nconst errors_1 = require(\"../../errors\");\nconst buffer_1 = require(\"buffer\");\nclass BridgeProvider {\n    constructor(storage, connectSource) {\n        this.storage = storage;\n        this.type = 'http';\n        this.standardUniversalLink = 'https://www.okx.com/download';\n        this.standardDeeplink = 'okx://web3/wallet/connect';\n        this.listeners = [];\n        this.connectManager = new connectionManager_1.ConnectionManager();\n        this.engine = new engine_1.Engine(this.connectManager);\n        this.connectionStorage = new bridge_connection_storage_1.BridgeConnectionStorage(storage);\n        this.walletConnectionSource = connectSource;\n    }\n    static fromStorage(storage) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const bridgeConnectionStorage = new bridge_connection_storage_1.BridgeConnectionStorage(storage);\n            const connection = yield bridgeConnectionStorage.getHttpConnection();\n            if ((0, bridge_connection_1.isPendingConnectionHttp)(connection)) {\n                return null;\n            }\n            return new BridgeProvider(storage, { bridgeUrl: new wallets_list_manager_1.WalletsListManager().getWallets()[0].bridgeUrl });\n        });\n    }\n    connect(message, redirect) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('provider-----message>>>', message);\n            console.log('provider-----redirect>>>', redirect);\n            try {\n                const connectInfo = this.connectManager.getConnectInfo();\n                const requestId = yield this.engine.getRequestId();\n                const connectRequest = {\n                    protocolVer: Number(version_1.tonConnectSdkVersion),\n                    topic: connectInfo.channelId,\n                    clientId: connectInfo.clientId,\n                    requestId: requestId,\n                    dAppInfo: message.dappInfo,\n                    requests: message.items,\n                    redirect: redirect !== null && redirect !== void 0 ? redirect : \"none\",\n                };\n                console.log('provider-----connectRequest>>>', connectRequest);\n                const connectRequestStr = JSON.stringify(connectRequest);\n                console.log('provider-----connectRequestStr>>>', connectRequestStr);\n                const base64Encoded = buffer_1.Buffer.from(connectRequestStr).toString('base64');\n                console.log('provider-----base64Encoded>>>', base64Encoded);\n                const deeplinkUrl = `${this.standardDeeplink}?param=${base64Encoded}`;\n                console.log('provider-----deeplinkUrl>>>', deeplinkUrl);\n                const deeplinkEncodeUrl = encodeURIComponent(deeplinkUrl);\n                const universalLink = 'universalLink' in this.walletConnectionSource &&\n                    this.walletConnectionSource.universalLink\n                    ? this.walletConnectionSource.universalLink\n                    : this.standardUniversalLink;\n                console.log('provider-----universalLink>>>', universalLink);\n                const fullUrl = `${universalLink}?deeplink=${deeplinkEncodeUrl}`;\n                console.log('provider-----fullUrl>>>', fullUrl);\n                this.connectionStorage\n                    .storeConnection({\n                    type: 'http',\n                    connectionSource: this.walletConnectionSource,\n                    channelId: connectInfo.clientId,\n                })\n                    .then(() => __awaiter(this, void 0, void 0, function* () {\n                    var _a, _b;\n                    //TODO ZJ  跳转与兜底URl\n                    (0, url_1.openOKXDeeplinkWithFallback)(fullUrl);\n                    console.log('跳转链接----->>>', fullUrl);\n                    (_a = this.engine) === null || _a === void 0 ? void 0 : _a.bindRequestForPromise(requestId, this.connectListener.bind(this));\n                    //处理接收 钱包发起的断开连接\n                    (_b = this.engine) === null || _b === void 0 ? void 0 : _b.addDisconnectListener(this.disconnectListener.bind(this));\n                    yield this.connectManager.connect();\n                }));\n            }\n            catch (error) {\n                console.error('Error connecting:', error);\n                throw new errors_1.TonConnectError('connect error');\n            }\n        });\n    }\n    listen(callback) {\n        this.listeners.push(callback);\n        return () => (this.listeners = this.listeners.filter(listener => listener !== callback));\n    }\n    disconnectListener() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const disconnectMessage = {\n                event: 'disconnect',\n                requestId: Number(1),\n                payload: {},\n            };\n            this.listeners.forEach(listener => listener(disconnectMessage));\n            yield this.closeConnection();\n        });\n    }\n    connectListener(walletMessage) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('Wallet message received:', walletMessage);\n            //connect 与connecterror  disconnect\n            if (walletMessage.requestId !== undefined) {\n                const lastId = yield this.connectionStorage.getLastWalletEventId();\n                if (lastId !== undefined && Number(walletMessage.requestId) <= lastId) {\n                    (0, log_1.logError)(`Received event id (=${walletMessage.requestId}) must be greater than stored last wallet event id (=${lastId}) `);\n                    return;\n                }\n            }\n            // `this.listeners` might be modified in the event handler\n            const listeners = this.listeners;\n            if (walletMessage.method === 'connect') {\n                const tonAddrItem = walletMessage.payload.responses.find(item => item.name === 'ton_addr');\n                const tonProfItem = walletMessage.payload.responses.find(item => item.name === 'ton_proof');\n                const walletInfo = walletMessage.payload.wallet;\n                const tonDeviceInfo = {\n                    platform: walletInfo.platform,\n                    appName: walletInfo.appName,\n                    appVersion: walletInfo.appVersion,\n                    maxProtocolVersion: walletInfo.maxProtocolVersion,\n                    features: walletInfo.features.ton,\n                };\n                const itemArr = [];\n                if (tonAddrItem) {\n                    itemArr.push(tonAddrItem);\n                }\n                if (tonProfItem) {\n                    itemArr.push(tonProfItem);\n                }\n                const oldStorage = yield this.connectionStorage.getConnection();\n                let oldSourceHttp;\n                if (oldStorage && oldStorage.connectionSource) {\n                    oldSourceHttp = oldStorage.connectionSource;\n                }\n                else {\n                    oldSourceHttp = this.walletConnectionSource;\n                }\n                const tonConnectInfo = {\n                    type: 'http',\n                    lastWalletEventId: Number(walletMessage.requestId),\n                    connectEvent: {\n                        event: 'connect',\n                        payload: {\n                            items: itemArr,\n                            device: tonDeviceInfo,\n                        },\n                    },\n                    connectionSource: oldSourceHttp,\n                    channelId: oldStorage === null || oldStorage === void 0 ? void 0 : oldStorage.channelId,\n                    nextRpcRequestId: 0,\n                };\n                yield this.connectionStorage.storeConnection(tonConnectInfo);\n                const successMessage = {\n                    event: 'connect',\n                    requestId: Number(walletMessage.requestId),\n                    payload: tonConnectInfo.connectEvent.payload,\n                };\n                console.log('Wallet message --->>success>>>:', successMessage);\n                listeners.forEach(listener => listener(successMessage));\n            }\n            else if (walletMessage.method === 'connect_error') {\n                yield this.connectionStorage.storeLastWalletEventId(Number(walletMessage.requestId));\n                const errorMessage = {\n                    event: 'connect_error',\n                    requestId: Number(walletMessage.requestId),\n                    payload: walletMessage.payload,\n                };\n                listeners.forEach(listener => listener(errorMessage));\n            }\n        });\n    }\n    closeConnection() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            console.log('close connection');\n            this.listeners = [];\n            (_a = this.engine) === null || _a === void 0 ? void 0 : _a.disconnect();\n            yield ((_b = this.connectManager) === null || _b === void 0 ? void 0 : _b.disconnect());\n            yield this.connectionStorage.removeConnection();\n        });\n    }\n    restoreConnection() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const storedConnection = yield this.connectionStorage.getHttpConnection();\n            if (!storedConnection) {\n                return;\n            }\n            if ((0, bridge_connection_1.isPendingConnectionHttp)(storedConnection)) {\n                return;\n            }\n            if (storedConnection.channelId) {\n                try {\n                    const successMessage = {\n                        event: 'connect',\n                        requestId: Number(0),\n                        payload: storedConnection.connectEvent.payload,\n                    };\n                    this.listeners.forEach(listener => listener(successMessage));\n                    const channelId = storedConnection.channelId;\n                    // TOOD 激活这个通道\n                    yield this.connectManager.restoreConnect(channelId);\n                }\n                catch (e) {\n                    //清空本地数据\n                    yield this.closeConnection();\n                }\n            }\n            else {\n                //清空本地数据\n                yield this.closeConnection();\n            }\n        });\n    }\n    getUniversalLink() {\n        const fullUrl = `${this.standardUniversalLink}?deeplink=${encodeURIComponent(this.standardDeeplink)}`;\n        return fullUrl;\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve) => __awaiter(this, void 0, void 0, function* () {\n                let called = false;\n                const onRequestSent = () => {\n                    if (!called) {\n                        called = true;\n                        this.closeConnection().then(resolve);\n                    }\n                };\n                try {\n                    yield this.sendRequest({ method: 'disconnect', params: [] }, { onRequestSent: onRequestSent, attempts: 1 });\n                }\n                catch (e) {\n                    (0, log_1.logDebug)('Disconnect error:', e);\n                    if (!called) {\n                        this.closeConnection().then(resolve);\n                    }\n                }\n                finally {\n                    onRequestSent();\n                }\n            }));\n        });\n    }\n    sendRequest(request, options) {\n        console.log(\"sendTransaction  sendRequest\");\n        return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            yield ((_a = this.engine) === null || _a === void 0 ? void 0 : _a.send(request, function (response) {\n                resolve(response);\n            }, { attempts: options === null || options === void 0 ? void 0 : options.attempts }));\n            (_b = options === null || options === void 0 ? void 0 : options.onRequestSent) === null || _b === void 0 ? void 0 : _b.call(options);\n        }));\n    }\n}\nexports.BridgeProvider = BridgeProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isPendingConnectionHttp = isPendingConnectionHttp;\nfunction isPendingConnectionHttp(connection) {\n    return !('connectEvent' in connection);\n}\n// export type BridgeConnectionHttpRaw = Omit<BridgeConnectionHttp, 'session'> & {\n//     session: BridgeSessionRaw;\n// };\n//\n// export type BridgePendingConnectionHttpRaw = Omit<BridgePendingConnectionHttp, 'sessionCrypto'> & {\n//     sessionCrypto: KeyPair;\n// };\n//\n// export type BridgeConnectionRaw =\n//     | BridgeConnectionHttpRaw\n//     | BridgePendingConnectionHttpRaw;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FALLBACK_WALLETS_LIST = void 0;\nexports.FALLBACK_WALLETS_LIST = [\n    {\n        \"app_name\": \"okxTonWallet\",\n        \"name\": \"OKX Wallet\",\n        \"image\": \"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png\",\n        \"about_url\": \"https://www.okx.com/web3\",\n        \"universal_url\": \"https://www.okx.com/download\",\n        \"bridge\": [\n            {\n                \"type\": \"sse\",\n                \"url\": \"https://www.okx.com/tonbridge/discover/rpc/bridge\"\n            }\n        ],\n        \"platforms\": [\"chrome\", \"safari\", \"firefox\", \"ios\", \"android\"]\n    }\n];\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BridgeConnectionStorage = void 0;\nconst errors_1 = require(\"../errors\");\nclass BridgeConnectionStorage {\n    constructor(storage) {\n        this.storage = storage;\n        this.storeKey = 'okx-ton-connect-storage_bridge-connection';\n    }\n    storeConnection(connection) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.storage.setItem(this.storeKey, JSON.stringify(connection));\n        });\n    }\n    removeConnection() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.storage.removeItem(this.storeKey);\n        });\n    }\n    getConnection() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const stored = yield this.storage.getItem(this.storeKey);\n            if (!stored) {\n                return null;\n            }\n            let connection;\n            connection = JSON.parse(stored);\n            return connection;\n        });\n    }\n    getHttpConnection() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const connection = yield this.getConnection();\n            if (!connection) {\n                throw new errors_1.TonConnectError('Trying to read HTTP connection source while nothing is stored');\n            }\n            return connection;\n        });\n    }\n    storeLastWalletEventId(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const connection = yield this.getConnection();\n            if (connection && ('connectEvent' in connection)) {\n                connection.lastWalletEventId = id;\n                return this.storeConnection(connection);\n            }\n        });\n    }\n    getLastWalletEventId() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const connection = yield this.getConnection();\n            if (connection && 'lastWalletEventId' in connection) {\n                return connection.lastWalletEventId;\n            }\n            return undefined;\n        });\n    }\n    increaseNextRpcRequestId() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const connection = yield this.getConnection();\n            if (connection && 'nextRpcRequestId' in connection) {\n                const lastId = connection.nextRpcRequestId || 1;\n                connection.nextRpcRequestId = lastId + 1;\n                return this.storeConnection(connection);\n            }\n        });\n    }\n    getNextRpcRequestId() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const connection = yield this.getConnection();\n            if (connection && 'nextRpcRequestId' in connection) {\n                return connection.nextRpcRequestId || 1;\n            }\n            return 0;\n        });\n    }\n}\nexports.BridgeConnectionStorage = BridgeConnectionStorage;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultStorage = void 0;\nconst web_api_1 = require(\"../utils/web-api\");\n/**\n * Default storage to save protocol data, uses `localStorage` if it is available. In Safari's private mode, it uses `InMemoryStorage`. In Node.js, it throws an error.\n */\nclass DefaultStorage {\n    constructor() {\n        this.localStorage = (0, web_api_1.tryGetLocalStorage)();\n    }\n    getItem(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.localStorage.getItem(key);\n        });\n    }\n    removeItem(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.localStorage.removeItem(key);\n        });\n    }\n    setItem(key, value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.localStorage.setItem(key, value);\n        });\n    }\n}\nexports.DefaultStorage = DefaultStorage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InMemoryStorage = void 0;\n/**\n * In memory storage like localStorage, but without persistence.\n * Uses as a fallback for localStorage in Safari's private mode.\n */\nclass InMemoryStorage {\n    static getInstance() {\n        if (!InMemoryStorage.instance) {\n            InMemoryStorage.instance = new InMemoryStorage();\n        }\n        return InMemoryStorage.instance;\n    }\n    constructor() {\n        this.storage = {};\n    }\n    get length() {\n        return Object.keys(this.storage).length;\n    }\n    clear() {\n        this.storage = {};\n    }\n    getItem(key) {\n        var _a;\n        return (_a = this.storage[key]) !== null && _a !== void 0 ? _a : null;\n    }\n    key(index) {\n        var _a;\n        const keys = Object.keys(this.storage);\n        if (index < 0 || index >= keys.length) {\n            return null;\n        }\n        return (_a = keys[index]) !== null && _a !== void 0 ? _a : null;\n    }\n    removeItem(key) {\n        delete this.storage[key];\n    }\n    setItem(key, value) {\n        this.storage[key] = value;\n    }\n}\nexports.InMemoryStorage = InMemoryStorage;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OKXTonConnect = void 0;\nconst errors_1 = require(\"./errors\");\nconst wallets_list_manager_1 = require(\"./wallets-list-manager\");\nconst bridge_provider_1 = require(\"./provider/bridge/bridge-provider\");\nconst default_storage_1 = require(\"./storage/default-storage\");\nconst feature_support_1 = require(\"./utils/feature-support\");\nconst ton_connect_tracker_1 = require(\"./tracker/ton-connect-tracker\");\nconst send_transaction_parser_1 = require(\"./parsers/send-transaction-parser\");\nconst version_1 = require(\"./constants/version\");\nconst dapp_metadata_error_1 = require(\"./errors/dapp/dapp-metadata.error\");\nconst bridge_connection_storage_1 = require(\"./storage/bridge-connection-storage\");\nconst connect_errors_parser_1 = require(\"./parsers/connect-errors-parser\");\nconst log_1 = require(\"./utils/log\");\nconst manifest_not_found_error_1 = require(\"./errors/protocol/events/connect/manifest-not-found.error\");\nconst manifest_content_error_error_1 = require(\"./errors/protocol/events/connect/manifest-content-error.error\");\nconst url_1 = require(\"./utils/url\");\n// import { createAbortController } from '/utils/create-abort-controller';\nclass OKXTonConnect {\n    constructor(options) {\n        this.walletsList = new wallets_list_manager_1.WalletsListManager();\n        this._wallet = null;\n        this.provider = null;\n        this.statusChangeSubscriptions = [];\n        this.statusChangeErrorSubscriptions = [];\n        this.storage = new default_storage_1.DefaultStorage();\n        if (!(options === null || options === void 0 ? void 0 : options.metaData)) {\n            throw new dapp_metadata_error_1.DappMetadataError('Dapp metaData can not be null');\n        }\n        this.dappSettings = {\n            metaData: options.metaData,\n        };\n        //本地钱包列表\n        this.walletsList = new wallets_list_manager_1.WalletsListManager();\n        this.tracker = new ton_connect_tracker_1.TonConnectTracker({\n            tonConnectSdkVersion: version_1.tonConnectSdkVersion\n        });\n        this.bridgeConnectionStorage = new bridge_connection_storage_1.BridgeConnectionStorage(this.storage);\n    }\n    /**\n     * Shows if the wallet is connected right now.\n     */\n    get connected() {\n        return this._wallet !== null;\n    }\n    /**\n     * Current connected account or null if no account is connected.\n     */\n    get account() {\n        var _a;\n        return ((_a = this._wallet) === null || _a === void 0 ? void 0 : _a.account) || null;\n    }\n    /**\n     * Current connected wallet or null if no account is connected.\n     */\n    get wallet() {\n        return this._wallet;\n    }\n    set wallet(value) {\n        this._wallet = value;\n        this.statusChangeSubscriptions.forEach(callback => callback(this._wallet));\n    }\n    connect(request) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            console.log('sdk调试打印--->> connect', request);\n            if (this.connected) {\n                throw new errors_1.WalletAlreadyConnectedError();\n            }\n            (_a = this.provider) === null || _a === void 0 ? void 0 : _a.closeConnection();\n            const walletInfo = this.getWallets()[0];\n            console.log('sdk调试打印--->> walletInfo--->>>>>', walletInfo);\n            this.provider = new bridge_provider_1.BridgeProvider(this.storage, {\n                universalLink: walletInfo.universalLink,\n                bridgeUrl: walletInfo.bridgeUrl,\n            });\n            this.provider.listen(this.walletEventsListener.bind(this));\n            this.tracker.trackConnectionStarted();\n            return this.provider.connect(this.createConnectRequest(request), request === null || request === void 0 ? void 0 : request.redirect);\n        });\n    }\n    walletEventsListener(e) {\n        switch (e.event) {\n            case 'connect':\n                this.onWalletConnected(e.payload);\n                break;\n            case 'connect_error':\n                this.onWalletConnectError(e.payload);\n                break;\n            case 'disconnect':\n                this.onWalletDisconnected('wallet');\n        }\n    }\n    onWalletConnected(connectEvent) {\n        const tonAccountItem = connectEvent.items.find(item => item.name === 'ton_addr');\n        const tonProofItem = connectEvent.items.find(item => item.name === 'ton_proof');\n        if (!tonAccountItem) {\n            throw new errors_1.TonConnectError('ton_addr connection item was not found');\n        }\n        const wallet = {\n            device: connectEvent.device,\n            provider: this.provider.type,\n            account: {\n                address: tonAccountItem.address,\n                chain: tonAccountItem.network,\n                walletStateInit: tonAccountItem.walletStateInit,\n                publicKey: tonAccountItem.publicKey\n            }\n        };\n        if (tonProofItem) {\n            wallet.connectItems = {\n                tonProof: tonProofItem\n            };\n        }\n        this.wallet = wallet;\n        console.log('Ton connect --->>onWalletConnected>>>:', wallet);\n        this.tracker.trackConnectionCompleted(wallet);\n    }\n    onWalletConnectError(connectEventError) {\n        var _a;\n        const error = connect_errors_parser_1.connectErrorsParser.parseError(connectEventError);\n        this.statusChangeErrorSubscriptions.forEach(errorsHandler => errorsHandler(error));\n        (0, log_1.logDebug)(error);\n        this.tracker.trackConnectionError((_a = connectEventError.message) !== null && _a !== void 0 ? _a : \"\", connectEventError.code);\n        if (error instanceof manifest_not_found_error_1.ManifestNotFoundError || error instanceof manifest_content_error_error_1.ManifestContentErrorError) {\n            (0, log_1.logError)(error);\n            throw error;\n        }\n    }\n    onWalletDisconnected(scope) {\n        this.tracker.trackDisconnection(this.wallet, scope);\n        this.wallet = null;\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!this.connected) {\n                throw new errors_1.WalletNotConnectedError();\n            }\n            this.onWalletDisconnected('dapp');\n            yield ((_a = this.provider) === null || _a === void 0 ? void 0 : _a.disconnect());\n        });\n    }\n    getWallets() {\n        return this.walletsList.getWallets();\n    }\n    onStatusChange(callback, errorsHandler) {\n        this.statusChangeSubscriptions.push(callback);\n        if (errorsHandler) {\n            this.statusChangeErrorSubscriptions.push(errorsHandler);\n        }\n        return () => {\n            this.statusChangeSubscriptions = this.statusChangeSubscriptions.filter(item => item !== callback);\n            if (errorsHandler) {\n                this.statusChangeErrorSubscriptions = this.statusChangeErrorSubscriptions.filter(item => item !== errorsHandler);\n            }\n        };\n    }\n    restoreConnection() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            this.tracker.trackConnectionRestoringStarted();\n            let provider = null;\n            try {\n                provider = yield bridge_provider_1.BridgeProvider.fromStorage(this.storage);\n            }\n            catch (_b) {\n                this.tracker.trackConnectionRestoringError('Provider is not restored');\n                yield this.bridgeConnectionStorage.removeConnection();\n                provider === null || provider === void 0 ? void 0 : provider.closeConnection();\n                provider = null;\n                return;\n            }\n            if (!provider) {\n                (0, log_1.logError)('Provider is not restored');\n                this.tracker.trackConnectionRestoringError('Provider is not restored');\n                return;\n            }\n            (_a = this.provider) === null || _a === void 0 ? void 0 : _a.closeConnection();\n            this.provider = provider;\n            provider.listen(this.walletEventsListener.bind(this));\n            return this.provider.restoreConnection();\n        });\n    }\n    sendTransaction(transaction, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // const abortController = createAbortController(options?.signal);\n            // if (abortController.signal.aborted) {\n            //     throw new TonConnectError('Transaction sending was aborted');\n            // }\n            this.checkConnection();\n            (0, feature_support_1.checkSendTransactionSupport)(this.wallet.device.features, {\n                requiredMessagesNumber: transaction.messages.length\n            });\n            this.tracker.trackTransactionSentForSignature(this.wallet, transaction);\n            console.log(\"sendTransaction  start\");\n            const { validUntil } = transaction, tx = __rest(transaction, [\"validUntil\"]);\n            const from = transaction.from || this.account.address;\n            const network = transaction.network || this.account.chain;\n            console.log(\"sendTransaction  before sendRequest\");\n            const response = yield this.provider.sendRequest(send_transaction_parser_1.sendTransactionParser.convertToRpcRequest(Object.assign(Object.assign({}, tx), { valid_until: validUntil, from,\n                network })), {\n                onRequestSent: () => {\n                    var _a, _b;\n                    (_a = options === null || options === void 0 ? void 0 : options.onRequestSent) === null || _a === void 0 ? void 0 : _a.call(options);\n                    (0, url_1.openOKXDeeplinkWithFallback)((_b = this.provider) === null || _b === void 0 ? void 0 : _b.getUniversalLink());\n                }\n            });\n            if (send_transaction_parser_1.sendTransactionParser.isError(response)) {\n                this.tracker.trackTransactionSigningFailed(this.wallet, transaction, response.error.message, response.error.code);\n                return send_transaction_parser_1.sendTransactionParser.parseAndThrowError(response);\n            }\n            const result = send_transaction_parser_1.sendTransactionParser.convertFromRpcResponse(response);\n            this.tracker.trackTransactionSigned(this.wallet, transaction, result);\n            return result;\n        });\n    }\n    checkConnection() {\n        if (!this.connected) {\n            throw new errors_1.WalletNotConnectedError();\n        }\n    }\n    createConnectRequest(request) {\n        const items = [\n            {\n                name: 'ton_addr'\n            }\n        ];\n        if (request === null || request === void 0 ? void 0 : request.tonProof) {\n            items.push({\n                name: 'ton_proof',\n                payload: request.tonProof\n            });\n        }\n        return {\n            dappInfo: this.dappSettings.metaData,\n            items: items\n        };\n    }\n}\nexports.OKXTonConnect = OKXTonConnect;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserEventDispatcher = void 0;\nconst web_api_1 = require(\"../utils/web-api\");\n/**\n * A concrete implementation of EventDispatcher that dispatches events to the browser window.\n */\nclass BrowserEventDispatcher {\n    constructor() {\n        /**\n         * The window object, possibly undefined in a server environment.\n         * @private\n         */\n        this.window = (0, web_api_1.getWindow)();\n    }\n    /**\n     * Dispatches an event with the given name and details to the browser window.\n     * @param eventName - The name of the event to dispatch.\n     * @param eventDetails - The details of the event to dispatch.\n     * @returns A promise that resolves when the event has been dispatched.\n     */\n    dispatchEvent(eventName, eventDetails) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const event = new CustomEvent(eventName, { detail: eventDetails });\n            (_a = this.window) === null || _a === void 0 ? void 0 : _a.dispatchEvent(event);\n        });\n    }\n    /**\n     * Adds an event listener to the browser window.\n     * @param eventName - The name of the event to listen for.\n     * @param listener - The listener to add.\n     * @param options - The options for the listener.\n     * @returns A function that removes the listener.\n     */\n    addEventListener(eventName, listener, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            (_a = this.window) === null || _a === void 0 ? void 0 : _a.addEventListener(eventName, listener, options);\n            return () => {\n                var _a;\n                return (_a = this.window) === null || _a === void 0 ? void 0 : _a.removeEventListener(eventName, listener);\n            };\n        });\n    }\n}\nexports.BrowserEventDispatcher = BrowserEventDispatcher;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TonConnectTracker = void 0;\nconst types_1 = require(\"./types\");\nconst browser_event_dispatcher_1 = require(\"./browser-event-dispatcher\");\n/**\n * Tracker for TonConnect user actions, such as transaction signing, connection, etc.\n *\n * List of events:\n *  * `connection-started`: when a user starts connecting a wallet.\n *  * `connection-completed`: when a user successfully connected a wallet.\n *  * `connection-error`: when a user cancels a connection or there is an error during the connection process.\n *  * `connection-restoring-started`: when the dApp starts restoring a connection.\n *  * `connection-restoring-completed`: when the dApp successfully restores a connection.\n *  * `connection-restoring-error`: when the dApp fails to restore a connection.\n *  * `disconnection`: when a user starts disconnecting a wallet.\n *  * `transaction-sent-for-signature`: when a user sends a transaction for signature.\n *  * `transaction-signed`: when a user successfully signs a transaction.\n *  * `transaction-signing-failed`: when a user cancels transaction signing or there is an error during the signing process.\n *\n * If you want to track user actions, you can subscribe to the window events with prefix `ton-connect-`:\n *\n * @example\n * window.addEventListener('ton-connect-transaction-sent-for-signature', (event) => {\n *    console.log('Transaction init', event.detail);\n * });\n *\n * @internal\n */\nclass TonConnectTracker {\n    /**\n     * Version of the library.\n     */\n    get version() {\n        return (0, types_1.createVersionInfo)({\n            ton_connect_sdk_lib: this.tonConnectSdkVersion,\n            ton_connect_ui_lib: this.tonConnectUiVersion\n        });\n    }\n    constructor(options) {\n        /**\n         * Event prefix for user actions.\n         * @private\n         */\n        this.eventPrefix = 'ton-connect-';\n        /**\n         * TonConnect UI version.\n         */\n        this.tonConnectUiVersion = null;\n        this.eventDispatcher = new browser_event_dispatcher_1.BrowserEventDispatcher();\n        this.tonConnectSdkVersion = options.tonConnectSdkVersion;\n        this.init().catch();\n    }\n    /**\n     * Called once when the tracker is created and request version other libraries.\n     */\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.setRequestVersionHandler();\n                this.tonConnectUiVersion = yield this.requestTonConnectUiVersion();\n            }\n            catch (e) { }\n        });\n    }\n    /**\n     * Set request version handler.\n     * @private\n     */\n    setRequestVersionHandler() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.eventDispatcher.addEventListener('ton-connect-request-version', () => __awaiter(this, void 0, void 0, function* () {\n                yield this.eventDispatcher.dispatchEvent('ton-connect-response-version', (0, types_1.createResponseVersionEvent)(this.tonConnectSdkVersion));\n            }));\n        });\n    }\n    /**\n     * Request TonConnect UI version.\n     * @private\n     */\n    requestTonConnectUiVersion() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this.eventDispatcher.addEventListener('ton-connect-ui-response-version', (event) => {\n                        resolve(event.detail.version);\n                    }, { once: true });\n                    yield this.eventDispatcher.dispatchEvent('ton-connect-ui-request-version', (0, types_1.createRequestVersionEvent)());\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }));\n        });\n    }\n    /**\n     * Emit user action event to the window.\n     * @param eventDetails\n     * @private\n     */\n    dispatchUserActionEvent(eventDetails) {\n        try {\n            this.eventDispatcher\n                .dispatchEvent(`${this.eventPrefix}${eventDetails.type}`, eventDetails)\n                .catch();\n        }\n        catch (e) { }\n    }\n    /**\n     * Track connection init event.\n     * @param args\n     */\n    trackConnectionStarted(...args) {\n        try {\n            const event = (0, types_1.createConnectionStartedEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n    /**\n     * Track connection success event.\n     * @param args\n     */\n    trackConnectionCompleted(...args) {\n        try {\n            const event = (0, types_1.createConnectionCompletedEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n    /**\n     * Track connection error event.\n     * @param args\n     */\n    trackConnectionError(...args) {\n        try {\n            const event = (0, types_1.createConnectionErrorEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n    /**\n     * Track connection restoring init event.\n     * @param args\n     */\n    trackConnectionRestoringStarted(...args) {\n        try {\n            const event = (0, types_1.createConnectionRestoringStartedEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n    /**\n     * Track connection restoring success event.\n     * @param args\n     */\n    trackConnectionRestoringCompleted(...args) {\n        try {\n            const event = (0, types_1.createConnectionRestoringCompletedEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n    /**\n     * Track connection restoring error event.\n     * @param args\n     */\n    trackConnectionRestoringError(...args) {\n        try {\n            const event = (0, types_1.createConnectionRestoringErrorEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n    /**\n     * Track disconnect event.\n     * @param args\n     */\n    trackDisconnection(...args) {\n        try {\n            const event = (0, types_1.createDisconnectionEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n    /**\n     * Track transaction init event.\n     * @param args\n     */\n    trackTransactionSentForSignature(...args) {\n        try {\n            const event = (0, types_1.createTransactionSentForSignatureEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n    /**\n     * Track transaction signed event.\n     * @param args\n     */\n    trackTransactionSigned(...args) {\n        try {\n            const event = (0, types_1.createTransactionSignedEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n    /**\n     * Track transaction error event.\n     * @param args\n     */\n    trackTransactionSigningFailed(...args) {\n        try {\n            const event = (0, types_1.createTransactionSigningFailedEvent)(this.version, ...args);\n            this.dispatchUserActionEvent(event);\n        }\n        catch (e) { }\n    }\n}\nexports.TonConnectTracker = TonConnectTracker;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createRequestVersionEvent = createRequestVersionEvent;\nexports.createResponseVersionEvent = createResponseVersionEvent;\nexports.createVersionInfo = createVersionInfo;\nexports.createConnectionStartedEvent = createConnectionStartedEvent;\nexports.createConnectionCompletedEvent = createConnectionCompletedEvent;\nexports.createConnectionErrorEvent = createConnectionErrorEvent;\nexports.createConnectionRestoringStartedEvent = createConnectionRestoringStartedEvent;\nexports.createConnectionRestoringCompletedEvent = createConnectionRestoringCompletedEvent;\nexports.createConnectionRestoringErrorEvent = createConnectionRestoringErrorEvent;\nexports.createTransactionSentForSignatureEvent = createTransactionSentForSignatureEvent;\nexports.createTransactionSignedEvent = createTransactionSignedEvent;\nexports.createTransactionSigningFailedEvent = createTransactionSigningFailedEvent;\nexports.createDisconnectionEvent = createDisconnectionEvent;\n/**\n * Create a request version event.\n */\nfunction createRequestVersionEvent() {\n    return {\n        type: 'request-version'\n    };\n}\n/**\n * Create a response version event.\n * @param version\n */\nfunction createResponseVersionEvent(version) {\n    return {\n        type: 'response-version',\n        version: version\n    };\n}\n/**\n * Create a version info.\n * @param version\n */\nfunction createVersionInfo(version) {\n    return {\n        ton_connect_sdk_lib: version.ton_connect_sdk_lib,\n        ton_connect_ui_lib: version.ton_connect_ui_lib\n    };\n}\nfunction createConnectionInfo(version, wallet) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const isTonProof = ((_a = wallet === null || wallet === void 0 ? void 0 : wallet.connectItems) === null || _a === void 0 ? void 0 : _a.tonProof) && 'proof' in wallet.connectItems.tonProof;\n    const authType = isTonProof ? 'ton_proof' : 'ton_addr';\n    return {\n        wallet_address: (_c = (_b = wallet === null || wallet === void 0 ? void 0 : wallet.account) === null || _b === void 0 ? void 0 : _b.address) !== null && _c !== void 0 ? _c : null,\n        wallet_type: (_d = wallet === null || wallet === void 0 ? void 0 : wallet.device.appName) !== null && _d !== void 0 ? _d : null,\n        wallet_version: (_e = wallet === null || wallet === void 0 ? void 0 : wallet.device.appVersion) !== null && _e !== void 0 ? _e : null,\n        auth_type: authType,\n        custom_data: Object.assign({ chain_id: (_g = (_f = wallet === null || wallet === void 0 ? void 0 : wallet.account) === null || _f === void 0 ? void 0 : _f.chain) !== null && _g !== void 0 ? _g : null, provider: (_h = wallet === null || wallet === void 0 ? void 0 : wallet.provider) !== null && _h !== void 0 ? _h : null }, createVersionInfo(version))\n    };\n}\n/**\n * Create a connection init event.\n */\nfunction createConnectionStartedEvent(version) {\n    return {\n        type: 'connection-started',\n        custom_data: createVersionInfo(version)\n    };\n}\n/**\n * Create a connection completed event.\n * @param version\n * @param wallet\n */\nfunction createConnectionCompletedEvent(version, wallet) {\n    return Object.assign({ type: 'connection-completed', is_success: true }, createConnectionInfo(version, wallet));\n}\n/**\n * Create a connection error event.\n * @param version\n * @param error_message\n * @param errorCode\n */\nfunction createConnectionErrorEvent(version, error_message, errorCode) {\n    return {\n        type: 'connection-error',\n        is_success: false,\n        error_message: error_message,\n        error_code: errorCode !== null && errorCode !== void 0 ? errorCode : null,\n        custom_data: createVersionInfo(version)\n    };\n}\n/**\n * Create a connection restoring started event.\n */\nfunction createConnectionRestoringStartedEvent(version) {\n    return {\n        type: 'connection-restoring-started',\n        custom_data: createVersionInfo(version)\n    };\n}\n/**\n * Create a connection restoring completed event.\n * @param version\n * @param wallet\n */\nfunction createConnectionRestoringCompletedEvent(version, wallet) {\n    return Object.assign({ type: 'connection-restoring-completed', is_success: true }, createConnectionInfo(version, wallet));\n}\n/**\n * Create a connection restoring error event.\n * @param version\n * @param errorMessage\n */\nfunction createConnectionRestoringErrorEvent(version, errorMessage) {\n    return {\n        type: 'connection-restoring-error',\n        is_success: false,\n        error_message: errorMessage,\n        custom_data: createVersionInfo(version)\n    };\n}\nfunction createTransactionInfo(wallet, transaction) {\n    var _a, _b, _c, _d;\n    return {\n        valid_until: (_a = String(transaction.validUntil)) !== null && _a !== void 0 ? _a : null,\n        from: (_d = (_b = transaction.from) !== null && _b !== void 0 ? _b : (_c = wallet === null || wallet === void 0 ? void 0 : wallet.account) === null || _c === void 0 ? void 0 : _c.address) !== null && _d !== void 0 ? _d : null,\n        messages: transaction.messages.map(message => {\n            var _a, _b;\n            return ({\n                address: (_a = message.address) !== null && _a !== void 0 ? _a : null,\n                amount: (_b = message.amount) !== null && _b !== void 0 ? _b : null\n            });\n        })\n    };\n}\n/**\n * Create a transaction init event.\n * @param version\n * @param wallet\n * @param transaction\n */\nfunction createTransactionSentForSignatureEvent(version, wallet, transaction) {\n    return Object.assign(Object.assign({ type: 'transaction-sent-for-signature' }, createConnectionInfo(version, wallet)), createTransactionInfo(wallet, transaction));\n}\n/**\n * Create a transaction signed event.\n * @param version\n * @param wallet\n * @param transaction\n * @param signedTransaction\n */\nfunction createTransactionSignedEvent(version, wallet, transaction, signedTransaction) {\n    return Object.assign(Object.assign({ type: 'transaction-signed', is_success: true, signed_transaction: signedTransaction.boc }, createConnectionInfo(version, wallet)), createTransactionInfo(wallet, transaction));\n}\n/**\n * Create a transaction error event.\n * @param version\n * @param wallet\n * @param transaction\n * @param errorMessage\n * @param errorCode\n */\nfunction createTransactionSigningFailedEvent(version, wallet, transaction, errorMessage, errorCode) {\n    return Object.assign(Object.assign({ type: 'transaction-signing-failed', is_success: false, error_message: errorMessage, error_code: errorCode !== null && errorCode !== void 0 ? errorCode : null }, createConnectionInfo(version, wallet)), createTransactionInfo(wallet, transaction));\n}\n/**\n * Create a disconnect event.\n * @param version\n * @param wallet\n * @param scope\n * @returns\n */\nfunction createDisconnectionEvent(version, wallet, scope) {\n    return Object.assign({ type: 'disconnection', scope: scope }, createConnectionInfo(version, wallet));\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callForSuccess = callForSuccess;\nconst errors_1 = require(\"../errors\");\nconst delay_1 = require(\"./delay\");\n/**\n * Function to call ton api until we get response.\n * Because ton network is pretty unstable we need to make sure response is final.\n * @param {T} fn - function to call\n * @param {CallForSuccessOptions} [options] - optional configuration options\n */\nfunction callForSuccess(fn, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        const attempts = (_a = options === null || options === void 0 ? void 0 : options.attempts) !== null && _a !== void 0 ? _a : 3;\n        const delayMs = (_b = options === null || options === void 0 ? void 0 : options.delayMs) !== null && _b !== void 0 ? _b : 800;\n        if (typeof fn !== 'function') {\n            throw new errors_1.TonConnectError(`Expected a function, got ${typeof fn}`);\n        }\n        let i = 0;\n        let lastError;\n        while (i < attempts) {\n            try {\n                return yield fn();\n            }\n            catch (err) {\n                lastError = err;\n                i++;\n                if (i < attempts) {\n                    yield (0, delay_1.delay)(delayMs);\n                }\n            }\n        }\n        throw lastError;\n    });\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.delay = delay;\nconst errors_1 = require(\"../errors\");\n/**\n * Delays the execution of code for a specified number of milliseconds.\n * @param {number} timeout - The number of milliseconds to delay the execution.\n * @param {DelayOptions} [options] - Optional configuration options for the delay.\n * @return {Promise<void>} - A promise that resolves after the specified delay, or rejects if the delay is aborted.\n */\nfunction delay(timeout, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            var _a, _b;\n            if ((_a = options === null || options === void 0 ? void 0 : options.signal) === null || _a === void 0 ? void 0 : _a.aborted) {\n                reject(new errors_1.TonConnectError('Delay aborted'));\n                return;\n            }\n            const timeoutId = setTimeout(() => resolve(), timeout);\n            (_b = options === null || options === void 0 ? void 0 : options.signal) === null || _b === void 0 ? void 0 : _b.addEventListener('abort', () => {\n                clearTimeout(timeoutId);\n                reject(new errors_1.TonConnectError('Delay aborted'));\n            });\n        });\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkSendTransactionSupport = checkSendTransactionSupport;\nconst wallet_not_support_feature_error_1 = require(\"../errors/wallet/wallet-not-support-feature.error\");\nconst log_1 = require(\"./log\");\nfunction checkSendTransactionSupport(features, options) {\n    const supportsDeprecatedSendTransactionFeature = features.includes('ton_sendTransaction');\n    const sendTransactionFeature = features.find(feature => feature && typeof feature === 'object' && feature.name === 'ton_sendTransaction');\n    if (!supportsDeprecatedSendTransactionFeature && !sendTransactionFeature) {\n        throw new wallet_not_support_feature_error_1.WalletNotSupportFeatureError(\"Wallet doesn't support SendTransaction feature.\");\n    }\n    if (sendTransactionFeature && sendTransactionFeature.maxMessages !== undefined) {\n        if (sendTransactionFeature.maxMessages < options.requiredMessagesNumber) {\n            throw new wallet_not_support_feature_error_1.WalletNotSupportFeatureError(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${sendTransactionFeature.maxMessages}, but ${options.requiredMessagesNumber} is required.`);\n        }\n        return;\n    }\n    (0, log_1.logWarning)(\"Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.\");\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.logDebug = logDebug;\nexports.logError = logError;\nexports.logWarning = logWarning;\nfunction logDebug(...args) {\n    if (typeof 'console' !== undefined) {\n        try {\n            console.debug('[TON_CONNECT_SDK]', ...args);\n        }\n        catch (_a) { }\n    }\n}\nfunction logError(...args) {\n    if (typeof 'console' !== undefined) {\n        try {\n            console.error('[TON_CONNECT_SDK]', ...args);\n        }\n        catch (_a) { }\n    }\n}\nfunction logWarning(...args) {\n    if (typeof 'console' !== undefined) {\n        try {\n            console.warn('[TON_CONNECT_SDK]', ...args);\n        }\n        catch (_a) { }\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeUrlLastSlash = removeUrlLastSlash;\nexports.addPathToUrl = addPathToUrl;\nexports.openOKXDeeplinkWithFallback = openOKXDeeplinkWithFallback;\nfunction removeUrlLastSlash(url) {\n    if (url.slice(-1) === '/') {\n        return url.slice(0, -1);\n    }\n    return url;\n}\nfunction addPathToUrl(url, path) {\n    return removeUrlLastSlash(url) + '/' + path;\n}\nfunction openOKXDeeplinkWithFallback(deeplinkUrl) {\n    window.open(deeplinkUrl);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getWindow = getWindow;\nexports.tryGetWindowKeys = tryGetWindowKeys;\nexports.getDocument = getDocument;\nexports.getWebPageManifest = getWebPageManifest;\nexports.tryGetLocalStorage = tryGetLocalStorage;\nconst errors_1 = require(\"../errors\");\nconst in_memory_storage_1 = require(\"../storage/models/in-memory-storage\");\nfunction getWindow() {\n    if (typeof window === 'undefined') {\n        return undefined;\n    }\n    return window;\n}\n/**\n * The function try to get window keys, if it is not available it returns empty array.\n * As an example, for Safari's private mode it returns empty array, because the browser does not allow to get window keys.\n */\nfunction tryGetWindowKeys() {\n    const window = getWindow();\n    if (!window) {\n        return [];\n    }\n    try {\n        return Object.keys(window);\n    }\n    catch (_a) {\n        return [];\n    }\n}\nfunction getDocument() {\n    if (typeof document === 'undefined') {\n        return undefined;\n    }\n    return document;\n}\nfunction getWebPageManifest() {\n    var _a;\n    const origin = (_a = getWindow()) === null || _a === void 0 ? void 0 : _a.location.origin;\n    if (origin) {\n        return origin + '/tonconnect-manifest.json';\n    }\n    return '';\n}\n/**\n * Returns `localStorage` if it is available. In Safari's private mode, it returns `InMemoryStorage`. In Node.js, it throws an error.\n */\nfunction tryGetLocalStorage() {\n    if (isLocalStorageAvailable()) {\n        return localStorage;\n    }\n    if (isNodeJs()) {\n        throw new errors_1.TonConnectError('`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector');\n    }\n    return in_memory_storage_1.InMemoryStorage.getInstance();\n}\n/**\n * Checks if `localStorage` is available.\n */\nfunction isLocalStorageAvailable() {\n    // We use a try/catch block because Safari's private mode throws an error when attempting to access localStorage.\n    try {\n        return typeof localStorage !== 'undefined';\n    }\n    catch (_a) {\n        return false;\n    }\n}\n/**\n * Checks if the environment is Node.js.\n */\nfunction isNodeJs() {\n    return (typeof process !== 'undefined' && process.versions != null && process.versions.node != null);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletsListManager = void 0;\nconst fallback_wallets_list_1 = require(\"./resources/fallback-wallets-list\");\nclass WalletsListManager {\n    constructor() {\n        this.walletsListCache = null;\n    }\n    getWallets() {\n        let walletsList = fallback_wallets_list_1.FALLBACK_WALLETS_LIST;\n        this.walletsListCache = this.walletConfigDTOListToWalletConfigList(walletsList);\n        return this.walletsListCache;\n    }\n    walletConfigDTOListToWalletConfigList(walletConfigDTO) {\n        return walletConfigDTO.map(walletConfigDTO => {\n            const walletConfigBase = {\n                name: walletConfigDTO.name,\n                appName: walletConfigDTO.app_name,\n                imageUrl: walletConfigDTO.image,\n                aboutUrl: walletConfigDTO.about_url,\n                tondns: walletConfigDTO.tondns,\n                platforms: walletConfigDTO.platforms\n            };\n            const walletConfig = walletConfigBase;\n            walletConfigDTO.bridge.forEach(bridge => {\n                if (bridge.type === 'sse') {\n                    walletConfig.bridgeUrl = bridge.url;\n                    walletConfig.universalLink =\n                        walletConfigDTO.universal_url;\n                    walletConfig.deepLink = walletConfigDTO.deepLink;\n                }\n            });\n            return walletConfig;\n        });\n    }\n}\nexports.WalletsListManager = WalletsListManager;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OKXWalletConnector = void 0;\nconst constants_1 = require(\"./constants\");\nconst safejson_1 = require(\"../misc/safejson\");\nconst utils_1 = require(\"../utils\");\nconst events_1 = require(\"events\");\nconst WS = (0, utils_1.resolveWebSocketImplementation)();\nclass OKXWalletConnector {\n    constructor(url) {\n        this.events = new events_1.EventEmitter();\n        this.state = constants_1.ConnectorState.InitState;\n        if (!(0, utils_1.checkWSUrl)(url)) {\n            throw new Error(`CONNECTOR: invalid url ${url}`);\n        }\n        this.url = url;\n    }\n    get connected() {\n        return typeof this.socket !== \"undefined\";\n    }\n    get connecting() {\n        return this.state == constants_1.ConnectorState.Connecting;\n    }\n    // ------------------------------------------------------\n    // TODO: 暂定推送结构\n    onPayload(e) {\n        if (typeof e.data === \"undefined\")\n            return;\n        console.log('get received data');\n        console.log(e);\n        this.events.emit(\"payload\", e.data);\n    }\n    onClose(event) {\n        this.socket = undefined;\n        this.state = constants_1.ConnectorState.Disconnected;\n        this.events.emit(\"close\", event);\n    }\n    onError(id, e) {\n        const payload = { id: id, msg: e.toString() };\n        this.events.emit(\"payload\", payload);\n    }\n    onopen(socket) {\n        socket.onmessage = (event) => this.onPayload(event);\n        socket.onclose = (event) => this.onClose(event);\n        this.socket = socket;\n        this.state = constants_1.ConnectorState.Connected;\n        this.events.emit(\"open\");\n    }\n    // ------------------------------------------------------\n    emitError(errorEvent) {\n        this.events.emit(\"fail\", errorEvent);\n    }\n    // ------------------------------------------------------\n    registOpen(url = this.url) {\n        if (!(0, utils_1.checkWSUrl)(url)) {\n            throw new Error(`CONNECTOR: invalid url ${url}`);\n        }\n        if (this.connecting) {\n            /// event observer limits\n            const maxListenerCount = this.events.getMaxListeners();\n            if (this.events.listenerCount(\"open\") >= maxListenerCount ||\n                this.events.listenerCount(\"fail\") >= maxListenerCount) {\n                this.events.setMaxListeners(maxListenerCount + 1);\n            }\n            return new Promise((resolve, reject) => {\n                this.events.once(\"fail\", (error) => {\n                    if (this.events.getMaxListeners() > constants_1.EVENT_EMITTER_MAX_LISTENERS) {\n                        this.events.setMaxListeners(constants_1.EVENT_EMITTER_MAX_LISTENERS);\n                    }\n                    reject(error);\n                });\n                this.events.once(\"open\", () => {\n                    if (this.events.getMaxListeners() > constants_1.EVENT_EMITTER_MAX_LISTENERS) {\n                        this.events.setMaxListeners(constants_1.EVENT_EMITTER_MAX_LISTENERS);\n                    }\n                    if (typeof this.socket == \"undefined\") {\n                        return reject(new Error(\"Connect lost\"));\n                    }\n                    resolve(this.socket);\n                });\n            });\n        }\n        this.url = url;\n        this.state = constants_1.ConnectorState.Connecting;\n        const origin = new URLSearchParams(url).get(\"origin\");\n        // TODO: 参考wallet connect 连接设置，localhost时为false\n        const opts = { rejectUnauthorized: false };\n        return new Promise((resolve, reject) => {\n            const socket = new WS(url, [], opts);\n            if ((0, utils_1.hasBuiltInWebSocket)()) {\n                socket.onerror = (event) => {\n                    const errorEvent = event;\n                    reject(this.emitError(errorEvent.error));\n                };\n            }\n            else {\n                socket.on(\"error\", (errorEvent) => {\n                    reject(this.emitError(errorEvent));\n                });\n            }\n            socket.onopen = () => {\n                console.log('socket opened');\n                this.onopen(socket);\n                resolve(socket);\n            };\n        });\n    }\n    // ------------------------------------------------------\n    onVisibleChanged() {\n        if (document.visibilityState === 'visible') {\n            // check and restore\n            if (this.state == constants_1.ConnectorState.Connected && typeof this.socket === \"undefined\") {\n                console.log('CONNECTION need reopen');\n                this.registOpen();\n            }\n        }\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.registOpen(this.url);\n            // listener for reconnect\n            document.removeEventListener('visibilitychange', this.onVisibleChanged);\n            document.addEventListener('visibilitychange', this.onVisibleChanged);\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => {\n                if (typeof this.socket === \"undefined\") {\n                    // reject(new Error(\"CONNECTION closed\"))\n                    return;\n                }\n                this.socket.onclose = (event) => {\n                    this.onClose(event);\n                    resolve();\n                };\n                this.socket.close();\n            });\n        });\n    }\n    currentStatus() {\n        return {\n            state: this.state,\n            url: this.url\n        };\n    }\n    // 推送数据中需要透传event字段作为回调标记\n    // event 会映射为 jsonstr\n    /// @params Promise\n    /// @params success/failed callback\n    addListener(event, decrypt, success, failed) {\n        this.events.on(\"payload\", (e) => {\n            var _a;\n            console.log(`<<< get payload ${e}`);\n            console.log(e);\n            let parsedEvent = (0, safejson_1.safeJsonParse)(e);\n            // parse the data to chose success or failed\n            if (parsedEvent.params && parsedEvent.params.data) {\n                let rawMsg = (_a = parsedEvent.params.data) === null || _a === void 0 ? void 0 : _a.message;\n                if (rawMsg) {\n                    let msg = decrypt(rawMsg);\n                    success(event, msg);\n                }\n            }\n        });\n        this.events.on(\"fail\", (e) => {\n            console.log(`CONNECT failed: ${e}`);\n            failed(event, e.toString());\n        });\n    }\n    addPackageParse(callback) {\n        this.events.on(\"payload\", (e) => __awaiter(this, void 0, void 0, function* () {\n            // parse the data to chose success or failed\n            console.log(`<<<< received e:${e}`);\n            let param = (0, safejson_1.safeJsonParse)(e);\n            yield callback(param);\n        }));\n    }\n    once(event, listener) {\n        this.events.once(event, listener);\n    }\n    off(event, listener) {\n        this.events.off(event, listener);\n    }\n    removeListener(event, listener) {\n        this.events.removeListener(event, listener);\n    }\n    send(payload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.socket === \"undefined\") {\n                console.log(`>>> send payload undefined ${payload}`);\n                this.socket = yield this.registOpen();\n            }\n            try {\n                console.log(`>>> send payload ${(0, safejson_1.safeJsonStringify)(payload)}`);\n                this.socket.send((0, safejson_1.safeJsonStringify)(payload));\n            }\n            catch (e) {\n                this.onError(payload.id, e);\n            }\n        });\n    }\n    getMsgPayloadFromHistory(msg) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof msg === \"undefined\")\n                return;\n            let tmpMsg = {\n                params: {\n                    data: msg\n                }\n            };\n            let jsonstr = (0, safejson_1.safeJsonStringify)(msg);\n            console.log('get received data from history');\n            console.log(jsonstr);\n            jsonstr = (0, safejson_1.safeJsonStringify)(tmpMsg);\n            this.events.emit(\"payload\", tmpMsg);\n        });\n    }\n    onOpen(callback) {\n        this.events.on(\"open\", () => __awaiter(this, void 0, void 0, function* () {\n            console.log(`>>> ws opened`);\n            yield callback();\n        }));\n    }\n}\nexports.OKXWalletConnector = OKXWalletConnector;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConnectionManager = void 0;\nconst connect_1 = require(\"./connect\");\nconst constants_1 = require(\"./constants\");\nconst events_1 = require(\"events\");\nconst storage_1 = require(\"./storage\");\nconst utils_1 = require(\"../utils\");\nconst crypto_1 = require(\"../crypto\");\nconst jwt_1 = require(\"./jwt\");\nconst safejson_1 = require(\"../misc/safejson\");\nclass ConnectionManager {\n    constructor() {\n        this.events = new events_1.EventEmitter();\n        // local storage\n        this.connectStorage = new storage_1.Storage(constants_1.OKXCONNECTOR_CACHE_KEY);\n        // crypto keypair\n        const keyPairInfo = this.getCachedCryptoKeyPair();\n        this.crypto = new crypto_1.SessionCrypto(keyPairInfo);\n        this.jwtKeyPair = (0, jwt_1.generateKeyPair)();\n        this.saveCryptoKeyPair(this.crypto.stringifyKeypair());\n        // wss connection\n        this.connector = new connect_1.OKXWalletConnector(constants_1.OKXCONNECTOR_WS_URL);\n        // connection state\n        this.sendEnable = false;\n        this.packageId = 0;\n        this.connectedWalletPK = '';\n        console.log(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`);\n    }\n    saveCryptoKeyPair(keyPair) {\n        let cacheInfo = (0, safejson_1.safeJsonStringify)(keyPair);\n        this.connectStorage.saveContent(cacheInfo, constants_1.OKXCONNECTOR_CRYPTO_KEY);\n    }\n    getCachedCryptoKeyPair() {\n        const kp = this.connectStorage.getItem(constants_1.OKXCONNECTOR_CRYPTO_KEY);\n        const content = kp === null || kp === void 0 ? void 0 : kp.content;\n        if (typeof content == 'string') {\n            console.log('get cached crypto key:');\n            console.log(content);\n            let keyPairInfo = (0, safejson_1.safeJsonParse)(content);\n            return keyPairInfo;\n        }\n        else {\n            this.connectStorage.clearCache();\n        }\n        return null;\n    }\n    isWalletPKReady() {\n        console.log(`isWalletPKReady  ===> ${this.connectedWalletPK}`);\n        return this.connectedWalletPK.length > 0;\n    }\n    makeJWT(topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield (0, jwt_1.signJWT)(topic, constants_1.OKXCONNECTOR_JWT_SIDE, constants_1.OKXCONNECTOR_JWT_TTL, // 24h\n            this.jwtKeyPair);\n        });\n    }\n    parsePackage(input_1) {\n        return __awaiter(this, arguments, void 0, function* (input, ignoreACK = false) {\n            var _a;\n            const msgId = parseInt(input.id);\n            if (msgId > this.packageId) {\n                this.packageId = msgId;\n            }\n            this.events.emit(input.id, input);\n            // send back ACK\n            if (!ignoreACK) {\n                yield this.sendACK(input.id, true);\n                this.packageId += 1;\n                let topic = (_a = this.connectStorage.getItem(constants_1.OKXCONNECTOR_TOKEN_CACHE)) === null || _a === void 0 ? void 0 : _a.content;\n                if (topic) {\n                    yield this.sendReceive(this.packageId.toString(), input.id, topic);\n                }\n            }\n        });\n    }\n    restoreConnect(topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if ((typeof topic !== 'string') || topic.length === 0) {\n                throw new Error('CONNECTION: invalid topic');\n            }\n            yield this.disconnect();\n            this.connectStorage.saveContent(topic, constants_1.OKXCONNECTOR_TOKEN_CACHE);\n            yield this.connect();\n        });\n    }\n    getConnectInfo() {\n        var topic = (0, utils_1.generateTopic)();\n        console.log(`generate topic token: ${topic}`);\n        this.connectStorage.saveContent(topic, constants_1.OKXCONNECTOR_TOKEN_CACHE);\n        const info = {\n            channelId: topic,\n            clientId: this.crypto.stringifyKeypair().publicKey,\n        };\n        return info;\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let lastConnectId = this.connectStorage.getItem(constants_1.OKXCONNECTOR_TOKEN_CACHE);\n            //1. generate topic & jwt\n            var topic = (0, utils_1.generateTopic)();\n            if (typeof lastConnectId !== 'undefined' && lastConnectId !== null) {\n                console.log(`read last connect id: ${lastConnectId}`);\n                topic = lastConnectId.content;\n            }\n            console.log(`generate topic token: ${topic}`);\n            this.connectStorage.saveContent(topic, constants_1.OKXCONNECTOR_TOKEN_CACHE);\n            var jwtToken = yield this.makeJWT(topic);\n            console.log(`generate jwt token: ${jwtToken}`);\n            this.connectStorage.saveContent(jwtToken, 'jwt');\n            // 1. 收到open事件就会进行login和subscribe流程\n            this.connector.onOpen(() => __awaiter(this, void 0, void 0, function* () {\n                console.log(`1. connector on open`);\n                //2. send jwt to login\n                this.events.once(this.packageId.toString(), () => __awaiter(this, void 0, void 0, function* () {\n                    // ack\n                    this.packageId += 1;\n                    //3. send subscribe\n                    this.events.once(this.packageId.toString(), () => __awaiter(this, void 0, void 0, function* () {\n                        // ack\n                        this.packageId += 1;\n                        console.log(`4. subscribe callback then send fetch: ${this.packageId}`);\n                        // 4. fetch messages\n                        yield this.sendFetchAndConsumeMessages(this.packageId.toString(), topic);\n                    }));\n                    console.log(`3. login callback then send subscribe: ${this.packageId}`);\n                    yield this.connector.send({\n                        id: this.packageId.toString(),\n                        jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                        method: constants_1.CONNECT_METHOD_SUB,\n                        params: {\n                            topic: topic\n                        }\n                    });\n                }));\n                console.log(`2. login called`);\n                yield this.connector.send({\n                    id: this.packageId.toString(),\n                    jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                    method: constants_1.CONNECT_METHOD_LOGIN,\n                    params: {\n                        token: jwtToken\n                    }\n                });\n                // 4. listen when dapp back to front, receive wallet public key\n                this.connector.addPackageParse((event) => {\n                    var _a;\n                    console.log(`connect: parse package`);\n                    console.log(event);\n                    if (!(\"params\" in event) || !(\"data\" in event[\"params\"])) {\n                        // TODO: test resend msg\n                        console.log('connect: TEST: received msg');\n                        this.parsePackage(event, true);\n                        return;\n                    }\n                    let rawMsg = (_a = event.params.data) === null || _a === void 0 ? void 0 : _a.message;\n                    if (typeof rawMsg !== 'undefined') {\n                        rawMsg = rawMsg.replace(/'/g, '\"');\n                        let parsedMessage = (0, safejson_1.safeJsonParse)(rawMsg);\n                        if (typeof parsedMessage !== 'string' && \"clientId\" in parsedMessage && parsedMessage.clientId.length > 0) {\n                            this.connectedWalletPK = parsedMessage.clientId;\n                            console.log(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`);\n                        }\n                    }\n                    // TODO: TEST ignore receive echo\n                    this.parsePackage(event, event.method === constants_1.CONNECT_METHOD_RECEIVE);\n                });\n            }));\n            yield this.connector.connect();\n            const info = {\n                channelId: topic,\n                clientId: this.crypto.stringifyKeypair().publicKey,\n            };\n            return info;\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.connector.disconnect();\n            //TODO: clean cached topic\n            this.connectStorage.clearCache(constants_1.OKXCONNECTOR_TOKEN_CACHE);\n        });\n    }\n    addListener(event, success, fail) {\n        this.connector.addListener((0, safejson_1.safeJsonStringify)(event), (rawMsg) => {\n            // if (this.isWalletPKReady()) {\n            //    throw new Error('connection not finish')\n            // }\n            rawMsg = rawMsg.replace(/'/g, '\"');\n            console.log(`addListener ===> ${rawMsg}`);\n            if (typeof rawMsg !== 'undefined') {\n                var msgObj = (0, safejson_1.safeJsonParse)(rawMsg);\n                var msg = msgObj.message;\n                this.connectedWalletPK = msgObj.clientId;\n                console.log(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`);\n                var result = this.crypto.decrypt(msg, this.connectedWalletPK);\n                console.log(`addListener ===> ${result}`);\n                return result;\n            }\n        }, success, fail);\n    }\n    send(msg) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // 从msg构建传输层包结构\n            console.log(`messagesend =====> ${msg}`);\n            if (!this.isWalletPKReady()) {\n                // TODO: channel not ready\n                throw new Error('connection not finish');\n            }\n            let message = this.crypto.encrypt(msg, this.connectedWalletPK);\n            // topic只维护一份\n            let topic = this.connectStorage.getItem(constants_1.OKXCONNECTOR_TOKEN_CACHE);\n            const payload = {\n                id: this.packageId.toString(),\n                method: constants_1.CONNECT_METHOD_PUBLISH,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                params: {\n                    message: {\n                        // messageId: hashKey(message,BASE64), // TODO:make message id from message\n                        messageId: Date.now().toString(), // TODO:make message id from message\n                        topic: topic === null || topic === void 0 ? void 0 : topic.content,\n                        message: message,\n                        ttl: constants_1.OKXCONNECTOR_MESSAGE_TTL\n                    }\n                } // crypted\n            };\n            yield this.connector.send(payload);\n        });\n    }\n    sendACK(msgId_1, success_1) {\n        return __awaiter(this, arguments, void 0, function* (msgId, success, reason = undefined) {\n            if (success === true) {\n                const payload = {\n                    id: msgId,\n                    jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                    result: true\n                };\n                yield this.connector.send(payload);\n            }\n            else if (reason) {\n                const payload = {\n                    id: this.packageId.toString(),\n                    jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                    error: {\n                        code: reason.code, //int\n                        message: reason.message\n                    }\n                };\n                yield this.connector.send(payload);\n            }\n        });\n    }\n    // send receive\n    sendReceive(msgId, messageId, topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const payload = {\n                id: msgId,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                method: constants_1.CONNECT_METHOD_RECEIVE,\n                params: {\n                    data: {\n                        messageId: messageId,\n                        topic: topic\n                    }\n                }\n            };\n            yield this.connector.send(payload);\n        });\n    }\n    // send receive\n    // 1. fetch all \n    // 2. send back receive\n    // 3. check has more, if so, repeat from 1st step\n    sendFetchAndConsumeMessages(msgId, topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            //1. send fetch\n            this.events.once(msgId, (fetchedMessages) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c;\n                //2. consume received messages\n                if (fetchedMessages.result) {\n                    var hasMore = fetchedMessages.result.hasMore;\n                    var receivedMsgs = fetchedMessages.result.data;\n                    for (let i = 0; i < receivedMsgs.length; i++) {\n                        let msg = receivedMsgs[i];\n                        this.packageId += 1;\n                        let messageId = msg.messageId;\n                        let msgTopic = msg.topic;\n                        if (msgTopic == topic) {\n                            yield this.connector.getMsgPayloadFromHistory(msg);\n                            // 如果未推送记录中topic与当前topic相同，则回receive\n                            yield this.sendReceive(this.packageId.toString(), messageId, topic);\n                        }\n                    }\n                    // 3. 检查hasMore, 如果未完全拉取，则继续请求fetch message\n                    if (hasMore) {\n                        const cachedTopic = (_a = this.connectStorage.getItem(constants_1.OKXCONNECTOR_TOKEN_CACHE)) === null || _a === void 0 ? void 0 : _a.content;\n                        this.packageId += 1;\n                        yield this.sendFetchAndConsumeMessages(this.packageId.toString(), topic);\n                    }\n                }\n                else {\n                    console.log(`CONNECT: get error rsp ${(_b = fetchedMessages.error) === null || _b === void 0 ? void 0 : _b.code} : ${(_c = fetchedMessages.error) === null || _c === void 0 ? void 0 : _c.message}`);\n                }\n            }));\n            console.log('5. send fetch more');\n            const payload = {\n                id: msgId,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                method: constants_1.CONNECT_METHOD_FETCHMSG,\n                params: {\n                    data: {\n                        topic: topic\n                    }\n                }\n            };\n            yield this.connector.send(payload);\n        });\n    }\n    // test api\n    getCryptoInfo() {\n        var _a;\n        const keyPairInfo = this.crypto.stringifyKeypair();\n        const jwt = this.connectStorage.getItem('jwt');\n        return {\n            kp: keyPairInfo,\n            topic: (_a = this.connectStorage.getItem(constants_1.OKXCONNECTOR_TOKEN_CACHE)) === null || _a === void 0 ? void 0 : _a.content,\n            jwt: jwt === null || jwt === void 0 ? void 0 : jwt.content\n        };\n    }\n    cleanCache() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.connectStorage.clearCache();\n            // await this.disconnect()\n        });\n    }\n}\nexports.ConnectionManager = ConnectionManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConnectorState = exports.CONNECT_METHOD_FETCHMSG = exports.CONNECT_METHOD_RECEIVE = exports.CONNECT_METHOD_UNSUB = exports.CONNECT_METHOD_SUB = exports.CONNECT_METHOD_PUBLISH = exports.CONNECT_METHOD_LOGIN = exports.CONNECT_METHOD_PUSH = exports.CONNECT_JSONRPC_VER = exports.OKXCONNECTOR_MESSAGE_TTL = exports.OKXCONNECTOR_JWT_TTL = exports.OKXCONNECTOR_TOKEN_CACHE = exports.OKXCONNECTOR_CRYPTO_KEY = exports.OKXCONNECTOR_CACHE_KEY = exports.OKXCONNECTOR_JWT_SIDE = exports.OKXCONNECTOR_WS_URL = exports.EVENT_EMITTER_MAX_LISTENERS = void 0;\nexports.EVENT_EMITTER_MAX_LISTENERS = 10;\nexports.OKXCONNECTOR_WS_URL = \"wss://test-walletreplay.okg.com/ws/v1/wallet-connect-relay\";\nexports.OKXCONNECTOR_JWT_SIDE = \"wallet\";\nexports.OKXCONNECTOR_CACHE_KEY = \"test_key\";\nexports.OKXCONNECTOR_CRYPTO_KEY = \"test_crypto_key\";\nexports.OKXCONNECTOR_TOKEN_CACHE = \"test_token\";\nexports.OKXCONNECTOR_JWT_TTL = 86400000;\nexports.OKXCONNECTOR_MESSAGE_TTL = 300000;\n// --------------- JSON RPC ---------------\nexports.CONNECT_JSONRPC_VER = \"2.0\";\n// --------------- ws methods -------------\nexports.CONNECT_METHOD_PUSH = \"push\";\nexports.CONNECT_METHOD_LOGIN = \"login\";\nexports.CONNECT_METHOD_PUBLISH = \"publish\";\nexports.CONNECT_METHOD_SUB = \"subscribe\";\nexports.CONNECT_METHOD_UNSUB = \"unsubscribe\";\nexports.CONNECT_METHOD_RECEIVE = \"receive\";\nexports.CONNECT_METHOD_FETCHMSG = \"fetchMessages\";\nexports.ConnectorState = {\n    InitState: 0,\n    Connecting: 1,\n    Connected: 2,\n    Disconnected: 3,\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MULTICODEC_ED25519_LENGTH = exports.MULTICODEC_ED25519_HEADER = exports.MULTICODEC_ED25519_BASE = exports.MULTICODEC_ED25519_ENCODING = exports.DID_METHOD = exports.DID_PREFIX = exports.DID_DELIMITER = exports.KEY_PAIR_SEED_LENGTH = exports.DATA_ENCODING = exports.JSON_ENCODING = exports.JWT_ENCODING = exports.JWT_DELIMITER = exports.JWT_IRIDIUM_TYP = exports.JWT_IRIDIUM_ALG = exports.JWTHeaderType = void 0;\nexports.generateKeyPair = generateKeyPair;\nexports.decodeJSON = decodeJSON;\nexports.encodeJSON = encodeJSON;\nexports.encodeIss = encodeIss;\nexports.decodeIss = decodeIss;\nexports.encodeSig = encodeSig;\nexports.decodeSig = decodeSig;\nexports.encodeData = encodeData;\nexports.decodeData = decodeData;\nexports.encodeJWT = encodeJWT;\nexports.decodeJWT = decodeJWT;\nexports.signJWT = signJWT;\nexports.verifyJWT = verifyJWT;\nconst ed25519 = __importStar(require(\"@stablelib/ed25519\"));\nconst to_string_1 = require(\"uint8arrays/to-string\");\nconst from_string_1 = require(\"uint8arrays/from-string\");\nconst safejson_1 = require(\"../misc/safejson\");\nconst utils_1 = require(\"../utils\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nexports.JWTHeaderType = \"dapp\";\nexports.JWT_IRIDIUM_ALG = \"EdDSA\";\nexports.JWT_IRIDIUM_TYP = \"JWT\";\nexports.JWT_DELIMITER = \".\";\nexports.JWT_ENCODING = \"base64url\";\nexports.JSON_ENCODING = \"utf8\";\nexports.DATA_ENCODING = \"utf8\";\nexports.KEY_PAIR_SEED_LENGTH = 32;\nexports.DID_DELIMITER = \":\";\nexports.DID_PREFIX = \"did\";\nexports.DID_METHOD = \"key\";\nexports.MULTICODEC_ED25519_ENCODING = \"base58btc\";\nexports.MULTICODEC_ED25519_BASE = \"z\";\nexports.MULTICODEC_ED25519_HEADER = \"K36\";\nexports.MULTICODEC_ED25519_LENGTH = 32;\nfunction generateKeyPair() {\n    // let local_seed = randomBytes(KEY_PAIR_SEED_LENGTH)\n    // return ed25519.generateKeyPairFromSeed(local_seed);\n    return tweetnacl_1.default.sign.keyPair();\n}\nfunction decodeJSON(str) {\n    return (0, safejson_1.safeJsonParse)((0, to_string_1.toString)((0, from_string_1.fromString)(str, exports.JWT_ENCODING), exports.JSON_ENCODING));\n}\nfunction encodeJSON(val) {\n    return (0, to_string_1.toString)((0, from_string_1.fromString)((0, safejson_1.safeJsonStringify)(val), exports.JSON_ENCODING), exports.JWT_ENCODING);\n}\n// ---------- Issuer ----------------------------------------------- //\n//  function base58Encode(buffer: Uint8Array) {\n//   const BASE58_ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\n//   let num = BigInt('0x' + Array.from(buffer).map(byte => byte.toString(16).padStart(2, '0')).join(''));\n//   let result = '';\n//   while (num > 0) {\n//     let divmod = num % 58n;\n//     num = num / 58n;\n//     result = BASE58_ALPHABET.charAt(Number(divmod)) + result;\n//   }\n//   for (let byte of buffer) {\n//     if (byte === 0) result = '1' + result;\n//     else break;\n//   }\n//   return result;\n// }\nfunction encodeIss(publicKey) {\n    // const header = fromString(MULTICODEC_ED25519_HEADER, MULTICODEC_ED25519_ENCODING);\n    // console.log(`header: ${toHexString(header)}`)\n    console.log(`publicKey: ${(0, utils_1.toHexString)(publicKey)}`);\n    var publicKeyStr = (0, to_string_1.toString)(publicKey, exports.MULTICODEC_ED25519_ENCODING);\n    // var publicKeyStr58 =  bs58.encode(publicKey)\n    // console.log(`publicKey base58: ${publicKeyStr}, ${publicKeyStr58}`)\n    // console.log(`multi codec: ${multicodec}`)\n    return [exports.DID_PREFIX, exports.DID_METHOD, publicKeyStr].join(exports.DID_DELIMITER);\n}\nfunction decodeIss(issuer) {\n    const [prefix, method, multicodec] = issuer.split(exports.DID_DELIMITER);\n    if (prefix !== exports.DID_PREFIX || method !== exports.DID_METHOD) {\n        throw new Error(`Issuer must be a DID with method \"key\"`);\n    }\n    // 简化iss编码后multicodec直接用base58解码即可得到publicKey\n    // const base = multicodec.slice(0, 1);\n    // if (base !== MULTICODEC_ED25519_BASE) {\n    //   throw new Error(`Issuer must be a key in mulicodec format`);\n    // }\n    // const bytes = fromString(multicodec.slice(1), MULTICODEC_ED25519_ENCODING);\n    // const type = toString(bytes.slice(0, 2), MULTICODEC_ED25519_ENCODING);\n    // if (type !== MULTICODEC_ED25519_HEADER) {\n    //   throw new Error(`Issuer must be a public key with type \"Ed25519\"`);\n    // }\n    // const publicKey = bytes.slice(2);\n    const publicKey = (0, from_string_1.fromString)(multicodec, exports.MULTICODEC_ED25519_ENCODING);\n    if (publicKey.length !== exports.MULTICODEC_ED25519_LENGTH) {\n        throw new Error(`Issuer must be a public key with length 32 bytes`);\n    }\n    return publicKey;\n}\n// ---------- Signature ----------------------------------------------- //\nfunction encodeSig(bytes) {\n    return (0, to_string_1.toString)(bytes, exports.JWT_ENCODING);\n}\nfunction decodeSig(encoded) {\n    return (0, from_string_1.fromString)(encoded, exports.JWT_ENCODING);\n}\n// ---------- Data ----------------------------------------------- //\nfunction encodeData(params) {\n    return (0, from_string_1.fromString)([encodeJSON(params.header), encodeJSON(params.payload)].join(exports.JWT_DELIMITER), exports.DATA_ENCODING);\n}\nfunction decodeData(data) {\n    const params = (0, to_string_1.toString)(data, exports.DATA_ENCODING).split(exports.JWT_DELIMITER);\n    const header = decodeJSON(params[0]);\n    const payload = decodeJSON(params[1]);\n    return { header, payload };\n}\n// ---------- JWT ----------------------------------------------- //\nfunction encodeJWT(params) {\n    return [encodeJSON(params.header), encodeJSON(params.payload), encodeSig(params.signature)].join(exports.JWT_DELIMITER);\n}\nfunction decodeJWT(jwt) {\n    const params = jwt.split(exports.JWT_DELIMITER);\n    const header = decodeJSON(params[0]);\n    const payload = decodeJSON(params[1]);\n    const signature = decodeSig(params[2]);\n    const data = (0, from_string_1.fromString)(params.slice(0, 2).join(exports.JWT_DELIMITER), exports.DATA_ENCODING);\n    return { header, payload, signature, data };\n}\nfunction signJWT(sub_1, aud_1, ttl_1, keyPair_1) {\n    return __awaiter(this, arguments, void 0, function* (sub, aud, ttl, keyPair, iat = Math.floor(Date.now())) {\n        const header = { alg: exports.JWT_IRIDIUM_ALG, typ: exports.JWT_IRIDIUM_TYP };\n        const iss = encodeIss(keyPair.publicKey);\n        const exp = iat + ttl;\n        const act = \"authenticate user\";\n        const payload = { iss, sub, aud, act, iat, exp };\n        const data = encodeData({ header, payload });\n        // const signature = ed25519.sign(keyPair.secretKey, data);\n        console.log(`get sec kp: ${keyPair.secretKey} {${keyPair.secretKey.length}}`);\n        const signature = tweetnacl_1.default.sign.detached(data, keyPair.secretKey);\n        return encodeJWT({ header, payload, signature });\n    });\n}\nfunction verifyJWT(jwt) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { header, payload, data, signature } = decodeJWT(jwt);\n        if (header.alg !== exports.JWT_IRIDIUM_ALG || header.typ !== exports.JWT_IRIDIUM_TYP) {\n            throw new Error(\"JWT must use EdDSA algorithm\");\n        }\n        const publicKey = decodeIss(payload.iss);\n        return ed25519.verify(publicKey, data, signature);\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Storage = void 0;\nconst utils_1 = require(\"../utils\");\nconst safejson_1 = require(\"../misc/safejson\");\nclass Storage {\n    constructor(subKey) {\n        // 1. load data from local storage\n        const localStorage = (0, utils_1.resolveLocalStorage)();\n        this.subKey = subKey;\n        console.log('--------get current local storage --------');\n        console.log(localStorage);\n        const cacheStr = localStorage.getItem(Storage.cacheKey + subKey);\n        if (typeof cacheStr === \"undefined\" || cacheStr === null) {\n            console.log(\"with no cache\");\n            this.cache = {};\n            return;\n        }\n        console.log(cacheStr);\n        if ((cacheStr === null || cacheStr === void 0 ? void 0 : cacheStr.length) > 0) {\n            var cacheObj = (0, safejson_1.safeJsonParse)(cacheStr);\n            this.cache = cacheObj;\n        }\n        console.log(`get cache obj: ${this.cache}`);\n        if (typeof this.cache === 'undefined' || this.cache == null) {\n            this.cache = {};\n        }\n    }\n    saveContent(content, key, id = '-') {\n        let item = {\n            id: id,\n            timestamp: Date.now().toString(),\n            content: content\n        };\n        this.saveItem(item, key);\n    }\n    saveItem(item, key) {\n        let localKey = Storage.cacheKey + this.subKey;\n        const localStorage = (0, utils_1.resolveLocalStorage)();\n        console.log(this.cache);\n        console.log(`get cache obj: ${this.cache}, ${key}, ${item}`);\n        this.cache[key] = item;\n        let totalCacheStr = (0, safejson_1.safeJsonStringify)(this.cache);\n        console.log(`STORAGE: ${key} @ ${this.cache}`);\n        localStorage.setItem(localKey, totalCacheStr);\n    }\n    getItem(key) {\n        console.log(`STORAGE: ${key} @ ${this.cache}`);\n        return this.cache[key];\n    }\n    clearCache(key = undefined) {\n        if (key === undefined) {\n            // clean all\n            this.cache = {};\n            let localKey = Storage.cacheKey + this.subKey;\n            localStorage.setItem(localKey, '');\n        }\n        else {\n            let localKey = Storage.cacheKey + this.subKey;\n            const localStorage = (0, utils_1.resolveLocalStorage)();\n            console.log(this.cache);\n            this.cache[key] = null;\n            let totalCacheStr = (0, safejson_1.safeJsonStringify)(this.cache);\n            console.log(`STORAGE: clean key ${key} @ ${this.cache}`);\n            localStorage.setItem(localKey, totalCacheStr);\n        }\n    }\n}\nexports.Storage = Storage;\nStorage.cacheKey = 'OKXStorageKey';\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionCrypto = void 0;\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst utils_1 = require(\"./utils\");\nclass SessionCrypto {\n    constructor(keyPair) {\n        this.nonceLength = 24;\n        this.sessionKeyPair = keyPair ? this.createKeypairFromString(keyPair) : this.createKeypair();\n    }\n    createKeypair() {\n        return tweetnacl_1.default.box.keyPair();\n    }\n    createKeypairFromString(keyPair) {\n        return {\n            publicKey: (0, utils_1.hexToByteArray)(keyPair.publicKey),\n            secretKey: (0, utils_1.hexToByteArray)(keyPair.secretKey),\n        };\n    }\n    createNonce() {\n        return tweetnacl_1.default.randomBytes(this.nonceLength);\n    }\n    get keyPair() {\n        return this.sessionKeyPair;\n    }\n    encrypt(message, receiverPublicKey) {\n        const encodedMessage = new TextEncoder().encode(message);\n        const nonce = this.createNonce();\n        const encrypted = tweetnacl_1.default.box(encodedMessage, nonce, (0, utils_1.hexToByteArray)(receiverPublicKey), this.keyPair.secretKey);\n        var hexResult = (0, utils_1.toHexString)((0, utils_1.concatUint8Arrays)(nonce, encrypted));\n        var encodedResult = new TextEncoder().encode(hexResult);\n        return (0, utils_1.base64encode)(encodedResult, false);\n    }\n    decrypt(message, senderPublicKey) {\n        let base64Content = (0, utils_1.base64decode)(message, true);\n        let messageByteArray = base64Content.toUint8Array();\n        const [nonce, internalMessage] = (0, utils_1.splitToUint8Arrays)(messageByteArray, this.nonceLength);\n        const decrypted = tweetnacl_1.default.box.open(internalMessage, nonce, (0, utils_1.hexToByteArray)(senderPublicKey), this.keyPair.secretKey);\n        if (!decrypted) {\n            throw new Error(`Decryption error: \\n message: ${message.toString()} \\n sender pubkey: ${senderPublicKey.toString()} \\n keypair pubkey: ${this.keyPair.publicKey.toString()} \\n keypair secretkey: ${this.keyPair.secretKey.toString()}`);\n        }\n        return new TextDecoder().decode(decrypted);\n    }\n    stringifyKeypair() {\n        return {\n            publicKey: (0, utils_1.toHexString)(this.keyPair.publicKey),\n            secretKey: (0, utils_1.toHexString)(this.keyPair.secretKey)\n        };\n    }\n}\nexports.SessionCrypto = SessionCrypto;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateOKXLink = generateOKXLink;\nconst buffer_1 = require(\"buffer\");\nfunction generateOKXLink(params) {\n    let payloadStr = `{ \"protocolVer\":1, \"channelId\":\"${params.channelId}\", \"clientId\":\"${params.clientId}\", \"dAppInfo\":{ \"url\":\"url\", \"name\":\"testApp\", \"iconUrl\":\"url\" }, \"requestId\":\"${params.requestId}\", \"requests\":[ { \"name\":\"ton_addr\" }, { \"name\":\"ton_proof\", \"payload\":\"${params.testPayload}\"}], \"redirect\":\"${params.redirect}\" }`;\n    let base64Str = buffer_1.Buffer.from(payloadStr).toString('base64');\n    return `https://www.okx.com/download?deeplink=okx%3A%2F%2Fweb3%2Fwallet%2Fconnect%3Fparam%3D${base64Str}`;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.safeJsonParse = safeJsonParse;\nexports.safeJsonStringify = safeJsonStringify;\nconst JSONStringify = (data) => JSON.stringify(data, (_, value) => (typeof value === \"bigint\" ? value.toString() + \"n\" : value));\n/*\n  Function to parse JSON.\n  If JSON has values in our custom format BigInt (strings with \"n\" character at the end), we just parse them to BigInt values.\n  If JSON has big number values, but not in our custom format, we copy it, and in a copy we convert those values to our custom format,\n  then parse them to BigInt values.\n  Other values (not big numbers and not our custom format BigInt values) are not affected and parsed as native JSON.parse() would parse them.\n*/\nconst JSONParse = (json) => {\n    /*\n      Big numbers are found and marked using Regex with this condition:\n      Number's length is bigger than 16 || Number's length is 16 and any numerical digit of the number is greater than that of the Number.MAX_SAFE_INTEGER\n      Additionally, it skips values that are strings (between double quotes).\n      */\n    // prettier-ignore\n    // eslint-disable-next-line no-useless-escape\n    const numbersBiggerThanMaxInt = /(?<!\")(?<=:)\\b(\\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\\}\\]]|$)/g;\n    const serializedData = json.replace(numbersBiggerThanMaxInt, (match) => `\"${match}n\"`);\n    return JSON.parse(serializedData, (_, value) => {\n        const isCustomFormatBigInt = typeof value === \"string\" && value.match(/^\\d+n$/);\n        if (isCustomFormatBigInt)\n            return BigInt(value.substring(0, value.length - 1));\n        return value;\n    });\n};\nfunction safeJsonParse(value) {\n    if (typeof value !== \"string\") {\n        console.log(value);\n        throw new Error(`Cannot safe json parse value of type ${typeof value}`);\n    }\n    try {\n        return JSONParse(value);\n    }\n    catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(\"safeJsonParse error:\", e);\n        return value;\n    }\n}\nfunction safeJsonStringify(value) {\n    return typeof value === \"string\" ? value : JSONStringify(value) || \"\";\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RANDOM_LENGTH = exports.isBrowser = exports.resolveLocalStorage = exports.hasLocalStorage = exports.hasBuiltInWebSocket = exports.resolveWebSocketImplementation = void 0;\nexports.hexToByteArray = hexToByteArray;\nexports.toHexString = toHexString;\nexports.concatUint8Arrays = concatUint8Arrays;\nexports.splitToUint8Arrays = splitToUint8Arrays;\nexports.base64encode = base64encode;\nexports.base64decode = base64decode;\nexports.checkWSUrl = checkWSUrl;\nexports.hashKey = hashKey;\nexports.generateRandomBytes32 = generateRandomBytes32;\nexports.generateTopic = generateTopic;\nexports.generateDeepLink = generateDeepLink;\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst tweetnacl_util_1 = __importDefault(require(\"tweetnacl-util\"));\nconst from_string_1 = require(\"uint8arrays/from-string\");\nconst to_string_1 = require(\"uint8arrays/to-string\");\nconst sha256_1 = require(\"@stablelib/sha256\");\nconst safejson_1 = require(\"./misc/safejson\");\nconst deeplink_1 = require(\"./deeplink\");\nconst BASE16 = \"base16\";\nfunction hexToByteArray(hexString) {\n    if (hexString.length % 2 !== 0) {\n        throw new Error(`Cannot convert ${hexString} to bytesArray`);\n    }\n    const result = new Uint8Array(hexString.length / 2);\n    for (let i = 0; i < hexString.length; i += 2) {\n        result[i / 2] = parseInt(hexString.slice(i, i + 2), 16);\n    }\n    return result;\n}\nfunction toHexString(byteArray) {\n    let hexString = '';\n    byteArray.forEach(byte => {\n        hexString += ('0' + (byte & 0xff).toString(16)).slice(-2);\n    });\n    return hexString;\n}\nfunction concatUint8Arrays(buffer1, buffer2) {\n    const mergedArray = new Uint8Array(buffer1.length + buffer2.length);\n    mergedArray.set(buffer1);\n    mergedArray.set(buffer2, buffer1.length);\n    return mergedArray;\n}\nfunction splitToUint8Arrays(array, index) {\n    if (index >= array.length) {\n        throw new Error('Index is out of buffer');\n    }\n    const subArray1 = array.slice(0, index);\n    const subArray2 = array.slice(index);\n    return [subArray1, subArray2];\n}\nfunction encodeUint8Array(value, urlSafe) {\n    const encoded = tweetnacl_util_1.default.encodeBase64(value);\n    if (!urlSafe) {\n        return encoded;\n    }\n    return encodeURIComponent(encoded);\n}\nfunction decodeToUint8Array(value, urlSafe) {\n    if (urlSafe) {\n        value = decodeURIComponent(value);\n    }\n    return tweetnacl_util_1.default.decodeBase64(value);\n}\nfunction base64encode(value, urlSafe) {\n    let uint8Array;\n    if (value instanceof Uint8Array) {\n        uint8Array = value;\n    }\n    else {\n        if (typeof value !== 'string') {\n            value = (0, safejson_1.safeJsonStringify)(value);\n        }\n        uint8Array = tweetnacl_util_1.default.decodeUTF8(value);\n    }\n    return encodeUint8Array(uint8Array, urlSafe);\n}\nfunction base64decode(value, urlSafe) {\n    const decodedUint8Array = decodeToUint8Array(value, urlSafe);\n    return {\n        toString() {\n            return tweetnacl_util_1.default.encodeUTF8(decodedUint8Array);\n        },\n        toObject() {\n            try {\n                return (0, safejson_1.safeJsonParse)(tweetnacl_util_1.default.encodeUTF8(decodedUint8Array));\n            }\n            catch (e) {\n                return null;\n            }\n        },\n        toUint8Array() {\n            return decodedUint8Array;\n        }\n    };\n}\nfunction checkWSUrl(url) {\n    const match = url.match(new RegExp(/^\\w+:/, \"gi\"));\n    if (!match || !match.length) {\n        return false;\n    }\n    let scheme = match[0];\n    return new RegExp(\"^wss?:\").test(scheme);\n}\nconst resolveWebSocketImplementation = () => {\n    if (typeof WebSocket !== \"undefined\") {\n        return WebSocket;\n    }\n    else if (typeof global !== \"undefined\" && typeof global.WebSocket !== \"undefined\") {\n        return global.WebSocket;\n    }\n    else if (typeof window !== \"undefined\" && typeof window.WebSocket !== \"undefined\") {\n        return window.WebSocket;\n    }\n    else if (typeof self !== \"undefined\" && typeof self.WebSocket !== \"undefined\") {\n        return self.WebSocket;\n    }\n    return require(\"ws\");\n};\nexports.resolveWebSocketImplementation = resolveWebSocketImplementation;\nconst hasBuiltInWebSocket = () => typeof WebSocket !== \"undefined\" ||\n    (typeof global !== \"undefined\" && typeof global.WebSocket !== \"undefined\") ||\n    (typeof window !== \"undefined\" && typeof window.WebSocket !== \"undefined\") ||\n    (typeof self !== \"undefined\" && typeof self.WebSocket !== \"undefined\");\nexports.hasBuiltInWebSocket = hasBuiltInWebSocket;\nconst hasLocalStorage = () => (typeof global !== \"undefined\" && (typeof global.localStorage !== \"undefined\")) ||\n    (typeof window !== \"undefined\" && typeof window.localStorage !== \"undefined\");\nexports.hasLocalStorage = hasLocalStorage;\nconst resolveLocalStorage = () => {\n    if (typeof global !== \"undefined\" && typeof global.localStorage !== \"undefined\") {\n        return global.localStorage;\n    }\n    else if (typeof window !== \"undefined\" && typeof window.localStorage !== \"undefined\") {\n        return window.localStorage;\n    }\n    return localStorage;\n};\nexports.resolveLocalStorage = resolveLocalStorage;\nconst isBrowser = () => typeof window !== \"undefined\";\nexports.isBrowser = isBrowser;\nexports.RANDOM_LENGTH = 32;\nfunction hashKey(key, encode = BASE16) {\n    console.log(`hash key called ${key}`);\n    const result = (0, sha256_1.hash)((0, from_string_1.fromString)(key, encode));\n    return (0, to_string_1.toString)(result, encode);\n}\nfunction generateRandomBytes32() {\n    return tweetnacl_1.default.randomBytes(exports.RANDOM_LENGTH);\n}\nfunction generateTopic() {\n    let randomBytes32 = generateRandomBytes32();\n    console.log(`generate topic called ${randomBytes32}`);\n    return hashKey((0, to_string_1.toString)(randomBytes32, BASE16));\n}\nfunction generateDeepLink(param) {\n    return (0, deeplink_1.generateOKXLink)(param);\n}\n","\n<template>\n  <div id=\"app\">\n    <el-container>\n      <el-header>OKX Connect</el-header>\n      <el-main>\n        <!-- 钱包信息 -->\n        <el-card class=\"wallet-info\">\n          <template #header>\n            <div>钱包信息</div>\n          </template>\n          <el-row class=\"info-row\">\n            <el-col :span=\"24\">\n              <strong>Wallet Address:</strong> {{ getWalletAddress }}\n            </el-col>\n          </el-row>\n<!--          <el-row class=\"info-row\">-->\n<!--            <el-col :span=\"24\">-->\n<!--              <strong>Universal Link:</strong> {{ updateUniLink }}-->\n<!--            </el-col>-->\n<!--          </el-row>-->\n        </el-card>\n\n        <!-- 连接钱包 -->\n        <el-card class=\"wallet-actions\">\n          <template #header>\n            <div>钱包操作</div>\n          </template>\n          <el-row :gutter=\"12\">\n            <el-col :span=\"24\">\n              <el-input v-model=\"testProofPayload\" placeholder=\"proofPayload\"></el-input>\n            </el-col>\n          </el-row>\n          <el-row :gutter=\"12\" class=\"button-row\">\n            <el-col :span=\"24\">\n              <el-button type=\"primary\" @click=\"connectBtnClicked\" icon=\"el-icon-connection\">{{ connectStatusStr }}</el-button>\n            </el-col>\n          </el-row>\n          <el-row :gutter=\"12\" class=\"button-row\">\n            <el-col :span=\"24\">\n              <el-button type=\"warning\" @click=\"resotreConnectAction\" icon=\"el-icon-refresh-right\">尝试重连</el-button>\n            </el-col>\n          </el-row>\n          <el-row :gutter=\"12\"  class=\"button-row\">\n            <el-col :span=\"24\">\n              <el-button type=\"danger\" @click=\"disconnectAction\" icon=\"el-icon-switch-button\" :disabled=\"walletAddress.length == 0\">{{ disconnectStatusStr }}</el-button>\n            </el-col>\n          </el-row>\n        </el-card>\n\n        <!-- 发送交易 -->\n        <el-card class=\"transaction\">\n          <template #header>\n            <div>交易</div>\n          </template>\n          <el-row :gutter=\"12\">\n            <el-col :span=\"24\">\n              <el-input v-model=\"testTransaction\" placeholder=\"sendTransactions\"></el-input>\n            </el-col>\n          </el-row>\n          <el-row :gutter=\"12\" class=\"button-row\">\n            <el-col :span=\"24\">\n              <el-button type=\"primary\" @click=\"sendTransaction()\">{{ testTransactionStr }}</el-button>\n            </el-col>\n          </el-row>\n        </el-card>\n\n        <!-- 本地加解密KeyPair -->\n        <el-card class=\"keypair-info\">\n          <template #header>\n            <div>本地加解密KeyPair</div>\n          </template>\n          <el-row :gutter=\"12\">\n            <el-col :xs=\"24\" :sm=\"12\">\n              <div class=\"input-label\">PubKey:</div>\n              <el-input v-model=\"localPubKey\" placeholder=\"PublicKey\" disabled></el-input>\n            </el-col>\n            <el-col :xs=\"24\" :sm=\"12\">\n              <div class=\"input-label\">SecKey:</div>\n              <el-input v-model=\"localSecKey\" placeholder=\"SecretKey\" disabled></el-input>\n            </el-col>\n          </el-row>\n        </el-card>\n\n        <!-- 清理缓存 -->\n        <el-card class=\"clear-cache\">\n          <el-row>\n            <el-col :span=\"24\">\n              <el-button type=\"danger\" @click=\"clearCacheKeyPair()\" icon=\"el-icon-delete\">清理本地缓存</el-button>\n            </el-col>\n          </el-row>\n        </el-card>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<style scoped>\n/* 重置全局边距和内边距 */\nbody, html {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n}\n\n/* 确保 app 容器占满整个视口 */\n#app {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 0px;\n}\n\n/* 调整 el-container 样式 */\n.el-container {\n  min-height: 100vh;\n  margin: 0;\n  padding: 0;\n}\n\n/* 调整 el-header 样式 */\n.el-header {\n  background-color: #333333;\n  color: white;\n  height: 50px;\n  line-height: 40px;\n  padding-top: 5px;\n  font-size: 18px;\n  font-weight: bold;\n}\n\n/* 调整 el-main 样式 */\n.el-main {\n  padding: 10px 20px;\n  flex-grow: 1;\n}\n\n.el-card {\n  margin-bottom: 20px;\n}\n\n.info-row {\n  margin-bottom: 10px;\n}\n\n.input-label {\n  margin-bottom: 5px;\n}\n\n.el-input {\n  margin-bottom: 10px;\n}\n\n/* 通用按钮样式 */\n.wallet-actions .el-button,\n.transaction .el-button,\n.clear-cache .el-button {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 40px;\n}\n\n.wallet-actions .el-button span,\n.transaction .el-button span,\n.clear-cache .el-button span {\n  margin: 0 auto;\n}\n\n/* 按钮行间距 */\n.wallet-actions .button-row,\n.transaction .button-row {\n  margin-bottom: 8px;\n}\n\n.wallet-actions .button-row:last-child,\n.transaction .button-row:last-child {\n  margin-bottom: 0;\n}\n\n/* 调整图标和文字的对齐 */\n.wallet-actions .el-button [class^=\"el-icon-\"],\n.transaction .el-button [class^=\"el-icon-\"],\n.clear-cache .el-button [class^=\"el-icon-\"] {\n  margin-right: 5px;\n  vertical-align: middle;\n}\n\n/* 新增：调整发送交易按钮与输入框的间距 */\n.transaction .el-row:not(:last-child) {\n  margin-bottom: 10px; /* 这个值原来可能是20px左右，现在减半 */\n}\n</style>\n<script>\n// import * as sdk from \"../../src/index\"\nimport {OKXTonConnect, ConnectionManager, utils} from \"../../src/index\"\nvar TON = new OKXTonConnect({metaData: {\n            name:\"测试dapp\",\n            icon:\"\",\n            url:\"\"\n        }})\nwindow.ton = TON\nvar testCM = new ConnectionManager()\n// async function testconnect() {\n//   await testCM.connect()\n// }\n\n\nasync function testSendTransaction(){\n  // await TON.connect()\n  let transactionRequest = {\"validUntil\":1722481054071,\"network\":-239,\"from\":\"12345\",\"messages\":[{\"address\":\"EQARULUYsmJq1RiZ-YiH-IJLcAZUVkVff-KBPwEmmaQGH6aC\",\"amount\":\"285000000\",\"payload\":\"te6cckEBAgEAiAABbQ+KfqUAAACYOR4QzEBfXhAIAO87mQKicbKgHIk4pSPP4k5xhHqutqYgAB7USnesDnCcECwbgQMBAJclk4VhgBD3JEg1TUr75iTijBghOKm/sxNDXUBl7CD6WMut0Q85yAZ+V1MAKNBrbGziXTXC9CetaXjoHL28y7L1wbJwuhzumC3yzL7QVwlJkA==\"}]}\n  TON.sendTransaction(transactionRequest)\n}\n\nexport default {\n  name: 'App',\n  data: ()=> {\n    return {\n      testTopic: '',\n      testPublicKey: '',\n      testProofPayload: '',\n      pendingDeepLink: '-',\n      logList: [],\n      connectReady: false,\n      connectStatusStr: '连接钱包',\n      disconnectStatusStr: '断开钱包',\n      localPubKey: '',\n      localSecKey: '',\n      testTransaction:'',\n      testTransactionStr:'发送交易',\n      walletAddress:'',\n    }\n  },\n  computed: {\n    updateUniLink:function(){\n      console.log(`update uni link: ${this.testTopic} ${this.testPublicKey}`)\n      let pendingDeepLink = utils.generateDeepLink(\n        {\n          protocolVer: \"1\",\n          channelId: this.testTopic,\n          clientId: this.testPublicKey,\n          dAppInfo: {\n            name: \"test\",\n            url: \"-\",\n            iconUrl: \"-\"\n          },\n          requestId:\"0\",\n          testPayload: this.testProofPayload\n        }\n      )\n      return pendingDeepLink\n    },\n    getWalletAddress:function (){\n      return this.walletAddress;\n    },\n\n\n  },\n  methods: {\n    async connectBtnClicked() {\n      console.log('get connect wallet btn clicked');\n      this.testTonSdk();\n    },\n    async disconnectAction() {\n      console.log('get disconnect wallet btn clicked');\n      TON.disconnect();\n    },\n    async resotreConnectAction() {\n      console.log('get restore wallet btn clicked');\n      TON.restoreConnection();\n    },\n    clearCacheKeyPair: () => {\n      console.log(`generate local key pair`)\n      testCM.cleanCache()\n      // testTonSdk()\n\n    },\n    sendTransaction:()=>{\n      console.log('sendTransaction')\n      testSendTransaction()\n    },\n\n    async testTonSdk(){\n      console.log('---testProofPayload--->>>>----',this.testProofPayload);\n      let proof = {\n        tonProof:this.testProofPayload,\n        redirect:\"tg://resolve\"\n      };\n\n      console.log('-------------testTonSdk------>>>>----',proof);\n\n      await  TON.connect(proof);\n\n\n    }\n\n  },\n  created() {\n    // testEncrypt('test msg')\n    console.log('test sdk here')\n    console.log(TON)\n  },\n  mounted() {\n    this.connectReady = true\n    // console.log('test connect called')\n    // testconnect()\n    const keyPairInfo = testCM.getCryptoInfo()\n    console.log(keyPairInfo)\n    this.localPubKey = keyPairInfo.kp.publicKey\n    this.localSecKey = keyPairInfo.kp.secretKey\n    this.testPublicKey = this.localPubKey\n    this.testTopic = keyPairInfo.topic?.content\n\n    TON.onStatusChange(function (walletInfo) {\n      console.log('--测试dapp 收到钱包数据---->>>>----',walletInfo);\n      if (walletInfo){\n        this.walletAddress = walletInfo.account.address;\n      }else {\n        this.walletAddress = \"已经断开了\";\n      }\n\n    }.bind(this));\n\n  }\n}\n</script>","import { render } from \"./App.vue?vue&type=template&id=1a321d10&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1a321d10&scoped=true&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1a321d10\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport ElementPlus from 'element-plus'\nimport 'element-plus/dist/index.css'\nimport App from './App.vue'\n\nconst app = createApp(App)\n\napp.use(ElementPlus)\napp.mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkokxconnect\"] = self[\"webpackChunkokxconnect\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(4058); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","exports","ConnectionManager","SessionCrypto","utils","OKXWalletConnector","OKXTonConnect","ton_connect_1","require","connect_1","crypto_1","connectionManager_1","session_crypto_1","__importDefault","utils_1","tweetnacl_1","constructor","keyPair","nonceLength","createKeypairFromString","createKeypair","sessionId","toHexString","publicKey","default","box","hexToByteArray","secretKey","createNonce","console","log","randomBytes","encrypt","message","receiverPublicKey","encodedMessage","TextEncoder","encode","nonce","encrypted","concatUint8Arrays","decrypt","senderPublicKey","internalMessage","splitToUint8Arrays","decrypted","open","Error","toString","TextDecoder","decode","stringifyKeypair","__exportStar","p","CHAIN","CHAIN_1","CONNECT_EVENT_ERROR_CODES","CONNECT_ITEM_ERROR_CODES","connect_event_1","DISCONNECT_ERROR_CODES","SIGN_DATA_ERROR_CODES","SEND_TRANSACTION_ERROR_CODES","send_transaction_rpc_response_1","sign_data_rpc_response_1","disconnect_rpc_response_1","Base64","tweetnacl_util_1","encodeUint8Array","urlSafe","encoded","encodeBase64","encodeURIComponent","decodeToUint8Array","decodeURIComponent","decodeBase64","uint8Array","Uint8Array","JSON","stringify","decodeUTF8","decodedUint8Array","encodeUTF8","toObject","parse","e","toUint8Array","buffer1","buffer2","mergedArray","length","set","array","index","subArray1","slice","subArray2","byteArray","hexString","forEach","byte","i","parseInt","isNode","base64_1","binary_1","web_api_1","process","versions","node","tonConnectSdkVersion","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","rejected","done","then","apply","Engine","bridge_connection_storage_1","default_storage_1","call_for_success_1","safejson_1","connectionManager","pendingRequests","Map","disconnectListener","connectionStorage","BridgeConnectionStorage","DefaultStorage","addListener","event","msg","jsonResponse","safeJsonParse","handleResponse","addDisconnectListener","disconnecter","push","disconnect","clear","getRequestId","requestId","getNextRpcRequestId","increaseNextRpcRequestId","bindRequestForPromise","send","request","option","callForSuccess","assign","response","safeJsonStringify","delete","method","listener","WrongAddressError","wrong_address_error_1","ton_connect_error_1","TonConnectError","info","ParseHexError","parse_hex_error_1","DappMetadataError","UnknownError","unknown_error_1","UserRejectsError","user_rejects_error_1","ManifestContentErrorError","ManifestNotFoundError","BadRequestError","UnknownAppError","bad_request_error_1","unknown_app_error_1","LocalstorageNotFoundError","localstorage_not_found_error_1","super","prefix","name","setPrototypeOf","WalletNotInjectedError","WalletNotConnectedError","WalletAlreadyConnectedError","wallet_already_connected_error_1","wallet_not_connected_error_1","wallet_not_injected_error_1","WalletNotSupportFeatureError","FetchWalletsError","fetch_wallets_error_1","connectErrorsParser","errors_1","manifest_content_error_error_1","manifest_not_found_error_1","errors_2","protocol_1","connectEventErrorsCodes","UNKNOWN_ERROR","USER_REJECTS_ERROR","BAD_REQUEST_ERROR","UNKNOWN_APP_ERROR","MANIFEST_NOT_FOUND_ERROR","MANIFEST_CONTENT_ERROR","ConnectErrorsParser","parseError","error","ErrorConstructor","code","RpcParser","isError","sendTransactionParser","rpc_parser_1","sendTransactionErrors","SendTransactionParser","convertToRpcRequest","params","parseAndThrowError","convertFromRpcResponse","rpcResponse","boc","BridgeProvider","bridge_connection_1","url_1","log_1","version_1","engine_1","wallets_list_manager_1","buffer_1","storage","connectSource","type","standardUniversalLink","standardDeeplink","listeners","connectManager","engine","walletConnectionSource","fromStorage","bridgeConnectionStorage","connection","getHttpConnection","isPendingConnectionHttp","bridgeUrl","WalletsListManager","getWallets","connect","redirect","connectInfo","getConnectInfo","connectRequest","protocolVer","Number","topic","channelId","clientId","dAppInfo","dappInfo","requests","items","connectRequestStr","base64Encoded","Buffer","from","deeplinkUrl","deeplinkEncodeUrl","universalLink","fullUrl","storeConnection","connectionSource","_a","_b","openOKXDeeplinkWithFallback","connectListener","bind","listen","callback","filter","disconnectMessage","payload","closeConnection","walletMessage","lastId","getLastWalletEventId","logError","tonAddrItem","responses","find","item","tonProfItem","walletInfo","wallet","tonDeviceInfo","platform","appName","appVersion","maxProtocolVersion","features","ton","itemArr","oldStorage","getConnection","oldSourceHttp","tonConnectInfo","lastWalletEventId","connectEvent","device","nextRpcRequestId","successMessage","storeLastWalletEventId","errorMessage","removeConnection","restoreConnection","storedConnection","restoreConnect","getUniversalLink","called","onRequestSent","sendRequest","attempts","logDebug","options","FALLBACK_WALLETS_LIST","storeKey","setItem","removeItem","stored","getItem","id","localStorage","tryGetLocalStorage","key","InMemoryStorage","getInstance","instance","keys","__rest","s","t","indexOf","getOwnPropertySymbols","propertyIsEnumerable","bridge_provider_1","feature_support_1","ton_connect_tracker_1","send_transaction_parser_1","dapp_metadata_error_1","connect_errors_parser_1","walletsList","_wallet","provider","statusChangeSubscriptions","statusChangeErrorSubscriptions","metaData","dappSettings","tracker","TonConnectTracker","connected","account","walletEventsListener","trackConnectionStarted","createConnectRequest","onWalletConnected","onWalletConnectError","onWalletDisconnected","tonAccountItem","tonProofItem","address","chain","network","walletStateInit","connectItems","tonProof","trackConnectionCompleted","connectEventError","errorsHandler","trackConnectionError","scope","trackDisconnection","onStatusChange","trackConnectionRestoringStarted","trackConnectionRestoringError","sendTransaction","transaction","checkConnection","checkSendTransactionSupport","requiredMessagesNumber","messages","trackTransactionSentForSignature","validUntil","tx","valid_until","trackTransactionSigningFailed","trackTransactionSigned","BrowserEventDispatcher","window","getWindow","dispatchEvent","eventName","eventDetails","CustomEvent","detail","addEventListener","removeEventListener","types_1","browser_event_dispatcher_1","version","createVersionInfo","ton_connect_sdk_lib","ton_connect_ui_lib","tonConnectUiVersion","eventPrefix","eventDispatcher","init","catch","setRequestVersionHandler","requestTonConnectUiVersion","createResponseVersionEvent","once","createRequestVersionEvent","dispatchUserActionEvent","args","createConnectionStartedEvent","createConnectionCompletedEvent","createConnectionErrorEvent","createConnectionRestoringStartedEvent","trackConnectionRestoringCompleted","createConnectionRestoringCompletedEvent","createConnectionRestoringErrorEvent","createDisconnectionEvent","createTransactionSentForSignatureEvent","createTransactionSignedEvent","createTransactionSigningFailedEvent","createConnectionInfo","_c","_d","_e","_f","_g","_h","isTonProof","authType","wallet_address","wallet_type","wallet_version","auth_type","custom_data","chain_id","is_success","error_message","errorCode","error_code","createTransactionInfo","String","map","amount","signedTransaction","signed_transaction","delay_1","fn","delayMs","lastError","err","delay","timeout","signal","aborted","timeoutId","setTimeout","clearTimeout","wallet_not_support_feature_error_1","supportsDeprecatedSendTransactionFeature","includes","sendTransactionFeature","feature","maxMessages","logWarning","debug","warn","removeUrlLastSlash","url","addPathToUrl","path","tryGetWindowKeys","getDocument","getWebPageManifest","in_memory_storage_1","document","origin","location","isLocalStorageAvailable","isNodeJs","fallback_wallets_list_1","walletsListCache","walletConfigDTOListToWalletConfigList","walletConfigDTO","walletConfigBase","app_name","imageUrl","image","aboutUrl","about_url","tondns","platforms","walletConfig","bridge","universal_url","deepLink","constants_1","events_1","WS","resolveWebSocketImplementation","events","EventEmitter","state","ConnectorState","InitState","checkWSUrl","socket","connecting","Connecting","onPayload","data","emit","onClose","Disconnected","onError","onopen","onmessage","onclose","Connected","emitError","errorEvent","registOpen","maxListenerCount","getMaxListeners","listenerCount","setMaxListeners","EVENT_EMITTER_MAX_LISTENERS","URLSearchParams","opts","rejectUnauthorized","hasBuiltInWebSocket","onerror","on","onVisibleChanged","visibilityState","close","currentStatus","success","failed","parsedEvent","rawMsg","addPackageParse","param","off","removeListener","getMsgPayloadFromHistory","tmpMsg","jsonstr","onOpen","storage_1","jwt_1","connectStorage","Storage","OKXCONNECTOR_CACHE_KEY","keyPairInfo","getCachedCryptoKeyPair","crypto","jwtKeyPair","generateKeyPair","saveCryptoKeyPair","connector","OKXCONNECTOR_WS_URL","sendEnable","packageId","connectedWalletPK","cacheInfo","saveContent","OKXCONNECTOR_CRYPTO_KEY","kp","content","clearCache","isWalletPKReady","makeJWT","signJWT","OKXCONNECTOR_JWT_SIDE","OKXCONNECTOR_JWT_TTL","parsePackage","input_1","arguments","input","ignoreACK","msgId","sendACK","OKXCONNECTOR_TOKEN_CACHE","sendReceive","generateTopic","lastConnectId","jwtToken","sendFetchAndConsumeMessages","jsonrpc","CONNECT_JSONRPC_VER","CONNECT_METHOD_SUB","CONNECT_METHOD_LOGIN","token","replace","parsedMessage","CONNECT_METHOD_RECEIVE","fail","msgObj","CONNECT_METHOD_PUBLISH","messageId","Date","now","ttl","OKXCONNECTOR_MESSAGE_TTL","msgId_1","success_1","reason","fetchedMessages","hasMore","receivedMsgs","msgTopic","CONNECT_METHOD_FETCHMSG","getCryptoInfo","jwt","cleanCache","CONNECT_METHOD_UNSUB","CONNECT_METHOD_PUSH","MULTICODEC_ED25519_LENGTH","MULTICODEC_ED25519_HEADER","MULTICODEC_ED25519_BASE","MULTICODEC_ED25519_ENCODING","DID_METHOD","DID_PREFIX","DID_DELIMITER","KEY_PAIR_SEED_LENGTH","DATA_ENCODING","JSON_ENCODING","JWT_ENCODING","JWT_DELIMITER","JWT_IRIDIUM_TYP","JWT_IRIDIUM_ALG","JWTHeaderType","decodeJSON","encodeJSON","encodeIss","decodeIss","encodeSig","decodeSig","encodeData","decodeData","encodeJWT","decodeJWT","verifyJWT","ed25519","to_string_1","from_string_1","sign","str","fromString","val","publicKeyStr","join","issuer","multicodec","split","bytes","header","signature","sub_1","aud_1","ttl_1","keyPair_1","sub","aud","iat","Math","floor","alg","typ","iss","exp","act","detached","verify","subKey","resolveLocalStorage","cacheStr","cacheKey","cache","cacheObj","timestamp","saveItem","localKey","totalCacheStr","sessionKeyPair","hexResult","encodedResult","base64encode","base64Content","base64decode","messageByteArray","generateOKXLink","payloadStr","testPayload","base64Str","JSONStringify","_","JSONParse","json","numbersBiggerThanMaxInt","serializedData","match","isCustomFormatBigInt","BigInt","substring","RANDOM_LENGTH","isBrowser","hasLocalStorage","hashKey","generateRandomBytes32","generateDeepLink","sha256_1","deeplink_1","BASE16","RegExp","scheme","test","WebSocket","global","self","hash","randomBytes32","_createElementVNode","class","_createElementBlock","_hoisted_1","_createVNode","_component_el_container","_withCtx","_component_el_header","_createTextVNode","_component_el_main","_component_el_card","_hoisted_2","_component_el_row","_component_el_col","span","_hoisted_3","_toDisplayString","$options","getWalletAddress","_hoisted_4","gutter","_component_el_input","modelValue","_ctx","testProofPayload","_cache","$event","placeholder","_component_el_button","onClick","connectBtnClicked","icon","connectStatusStr","resotreConnectAction","disconnectAction","disabled","walletAddress","disconnectStatusStr","_hoisted_5","testTransaction","testTransactionStr","_hoisted_6","xs","sm","_hoisted_7","localPubKey","_hoisted_8","localSecKey","clearCacheKeyPair","TON","testCM","async","testSendTransaction","transactionRequest","testTopic","testPublicKey","pendingDeepLink","logList","connectReady","computed","updateUniLink","iconUrl","methods","testTonSdk","proof","created","mounted","__exports__","render","app","createApp","App","use","ElementPlus","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","deferred","O","chunkIds","priority","notFulfilled","Infinity","j","every","splice","r","n","getter","d","a","definition","g","globalThis","Function","obj","prop","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}