parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"DXpI":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=v(e),c(t,y()?Reflect.construct(e,r||[],v(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||!s(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,v(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function l(t,e,r){if(y())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&b(o,r.prototype),o}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(y=function(){return!!t})()}function s(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TonConnectError=void 0;var O=function(t){function r(t){var n;return e(this,r),(n=u(this,r,[t])).message="".concat(r.prefix," ").concat(n.constructor.name).concat(n.info?": "+n.info:"").concat(t?"\n"+t:""),Object.setPrototypeOf(n,r.prototype),n}return p(r,a(Error)),n(r,[{key:"info",get:function(){return""}}])}();exports.TonConnectError=O,O.prefix="[TON_CONNECT_SDK_ERROR]";
},{}],"cBIN":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=a(e),c(t,l()?Reflect.construct(e,r||[],a(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserRejectsError=void 0;var y=require("../../../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return p(r,y.TonConnectError),o(r,[{key:"info",get:function(){return"User rejects the action in the wallet."}}])}();exports.UserRejectsError=b;
},{"../../../ton-connect.error":"DXpI"}],"bMTl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserRejectsError=void 0;var e=require("./user-rejects.error");Object.defineProperty(exports,"UserRejectsError",{enumerable:!0,get:function(){return e.UserRejectsError}});
},{"./user-rejects.error":"cBIN"}],"p3dR":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./connect"),exports);
},{"./connect":"bMTl"}],"a6b8":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=l(e),c(t,a()?Reflect.construct(e,r||[],l(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BadRequestError=void 0;var s=require("../../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return p(r,s.TonConnectError),o(r,[{key:"info",get:function(){return"Request to the wallet contains errors."}}])}();exports.BadRequestError=b;
},{"../../ton-connect.error":"DXpI"}],"o0jE":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=l(e),c(t,p()?Reflect.construct(e,r||[],l(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(p=function(){return!!t})()}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnknownAppError=void 0;var s=require("../../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return a(r,s.TonConnectError),n(r,[{key:"info",get:function(){return"App tries to send rpc request to the injected wallet while not connected."}}])}();exports.UnknownAppError=b;
},{"../../ton-connect.error":"DXpI"}],"V5ej":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnknownAppError=exports.BadRequestError=void 0;var r=require("./bad-request.error");Object.defineProperty(exports,"BadRequestError",{enumerable:!0,get:function(){return r.BadRequestError}});var e=require("./unknown-app.error");Object.defineProperty(exports,"UnknownAppError",{enumerable:!0,get:function(){return e.UnknownAppError}});
},{"./bad-request.error":"a6b8","./unknown-app.error":"o0jE"}],"HULz":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./events"),exports),t(require("./responses"),exports);
},{"./events":"p3dR","./responses":"V5ej"}],"FGnY":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function c(t,e,r){return e=a(e),u(t,l()?Reflect.construct(e,r||[],a(t).constructor):e.apply(t,r))}function u(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WalletAlreadyConnectedError=void 0;var b=require("../ton-connect.error"),s=function(t){function r(){return e(this,r),c(this,r,arguments)}return p(r,b.TonConnectError),n(r,[{key:"info",get:function(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}}])}();exports.WalletAlreadyConnectedError=s;
},{"../ton-connect.error":"DXpI"}],"tMjV":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function c(t,e,r){return e=a(e),u(t,l()?Reflect.construct(e,r||[],a(t).constructor):e.apply(t,r))}function u(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WalletNotConnectedError=void 0;var s=require("../ton-connect.error"),b=function(t){function r(){return e(this,r),c(this,r,arguments)}return p(r,s.TonConnectError),o(r,[{key:"info",get:function(){return"Send transaction or other protocol methods called while wallet is not connected."}}])}();exports.WalletNotConnectedError=b;
},{"../ton-connect.error":"DXpI"}],"wyst":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=a(e),c(t,l()?Reflect.construct(e,r||[],a(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WalletNotInjectedError=void 0;var s=require("../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return p(r,s.TonConnectError),o(r,[{key:"info",get:function(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}}])}();exports.WalletNotInjectedError=b;
},{"../ton-connect.error":"DXpI"}],"tq3g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WalletNotInjectedError=exports.WalletNotConnectedError=exports.WalletAlreadyConnectedError=void 0;var e=require("./wallet-already-connected.error");Object.defineProperty(exports,"WalletAlreadyConnectedError",{enumerable:!0,get:function(){return e.WalletAlreadyConnectedError}});var r=require("./wallet-not-connected.error");Object.defineProperty(exports,"WalletNotConnectedError",{enumerable:!0,get:function(){return r.WalletNotConnectedError}});var t=require("./wallet-not-injected.error");Object.defineProperty(exports,"WalletNotInjectedError",{enumerable:!0,get:function(){return t.WalletNotInjectedError}});
},{"./wallet-already-connected.error":"FGnY","./wallet-not-connected.error":"tMjV","./wallet-not-injected.error":"wyst"}],"dz9E":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=l(e),c(t,a()?Reflect.construct(e,r||[],l(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.LocalstorageNotFoundError=void 0;var s=require("../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return p(r,s.TonConnectError),o(r,[{key:"info",get:function(){return"Storage was not specified in the `DappMetadata` and default `localStorage` was not detected in the environment."}}])}();exports.LocalstorageNotFoundError=b;
},{"../ton-connect.error":"DXpI"}],"kYxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LocalstorageNotFoundError=void 0;var r=require("./localstorage-not-found.error");Object.defineProperty(exports,"LocalstorageNotFoundError",{enumerable:!0,get:function(){return r.LocalstorageNotFoundError}});
},{"./localstorage-not-found.error":"dz9E"}],"CUoc":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=a(e),c(t,l()?Reflect.construct(e,r||[],a(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FetchWalletsError=void 0;var s=require("../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return p(r,s.TonConnectError),o(r,[{key:"info",get:function(){return"An error occurred while fetching the wallets list."}}])}();exports.FetchWalletsError=b;
},{"../ton-connect.error":"DXpI"}],"JpaN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FetchWalletsError=void 0;var e=require("./fetch-wallets.error");Object.defineProperty(exports,"FetchWalletsError",{enumerable:!0,get:function(){return e.FetchWalletsError}});
},{"./fetch-wallets.error":"CUoc"}],"bNCK":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function e(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(r){var e=i(r,"string");return"symbol"==t(e)?e:e+""}function i(r,e){if("object"!=t(r)||!r)return r;var o=r[Symbol.toPrimitive];if(void 0!==o){var n=o.call(r,e||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}function u(t,r,e){return r=l(r),c(t,a()?Reflect.construct(r,e||[],l(t).constructor):r.apply(t,e))}function c(r,e){if(e&&("object"==t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(r)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&s(t,r)}function s(t,r){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WrongAddressError=void 0;var y=require("../ton-connect.error"),b=function(t){function e(){return r(this,e),u(this,e,arguments)}return p(e,y.TonConnectError),o(e,[{key:"info",get:function(){return"Passed address is in incorrect format."}}])}();exports.WrongAddressError=b;
},{"../ton-connect.error":"DXpI"}],"kq8s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WrongAddressError=void 0;var r=require("./wrong-address.error");Object.defineProperty(exports,"WrongAddressError",{enumerable:!0,get:function(){return r.WrongAddressError}});
},{"./wrong-address.error":"bNCK"}],"AXSs":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=l(e),c(t,a()?Reflect.construct(e,r||[],l(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParseHexError=void 0;var s=require("../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return p(r,s.TonConnectError),o(r,[{key:"info",get:function(){return"Passed hex is in incorrect format."}}])}();exports.ParseHexError=b;
},{"../ton-connect.error":"DXpI"}],"M4w5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParseHexError=void 0;var e=require("./parse-hex.error");Object.defineProperty(exports,"ParseHexError",{enumerable:!0,get:function(){return e.ParseHexError}});
},{"./parse-hex.error":"AXSs"}],"LX6R":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function e(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(r){var e=n(r,"string");return"symbol"==t(e)?e:e+""}function n(r,e){if("object"!=t(r)||!r)return r;var o=r[Symbol.toPrimitive];if(void 0!==o){var n=o.call(r,e||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function u(t,r,e){return r=p(r),c(t,l()?Reflect.construct(r,e||[],p(t).constructor):r.apply(t,e))}function c(r,e){if(e&&("object"==t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(r)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&y(t,r)}function y(t,r){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnknownError=void 0;var b=require("./ton-connect.error"),s=function(t){function r(){return i(this,r),u(this,r,arguments)}return a(r,b.TonConnectError),e(r)}();exports.UnknownError=s;
},{"./ton-connect.error":"DXpI"}],"bdNY":[function(require,module,exports) {
"use strict";var r=this&&this.__createBinding||(Object.create?function(r,e,t,o){void 0===o&&(o=t);var n=Object.getOwnPropertyDescriptor(e,t);n&&("get"in n?e.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,o,n)}:function(r,e,t,o){void 0===o&&(o=t),r[o]=e[t]}),e=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||r(t,e,o)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnknownError=exports.TonConnectError=void 0,e(require("./protocol"),exports),e(require("./wallet"),exports),e(require("./storage"),exports),e(require("./wallets-manager"),exports),e(require("./address"),exports),e(require("./binary"),exports);var t=require("./ton-connect.error");Object.defineProperty(exports,"TonConnectError",{enumerable:!0,get:function(){return t.TonConnectError}});var o=require("./unknown.error");Object.defineProperty(exports,"UnknownError",{enumerable:!0,get:function(){return o.UnknownError}});
},{"./protocol":"HULz","./wallet":"tq3g","./storage":"kYxL","./wallets-manager":"JpaN","./address":"kq8s","./binary":"M4w5","./ton-connect.error":"DXpI","./unknown.error":"LX6R"}],"CCKs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FALLBACK_WALLETS_LIST=void 0,exports.FALLBACK_WALLETS_LIST=[{app_name:"okxTonWallet",name:"OKX Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",universal_url:"https://www.okx.com/download",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"]}];
},{}],"ptWY":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WalletsListManager=void 0;var a=require("./resources/fallback-wallets-list"),l=function(){return n(function t(){e(this,t),this.walletsListCache=null},[{key:"getWallets",value:function(){var t=a.FALLBACK_WALLETS_LIST;return this.walletsListCache=this.walletConfigDTOListToWalletConfigList(t),this.walletsListCache}},{key:"walletConfigDTOListToWalletConfigList",value:function(t){return t.map(function(t){var e={name:t.name,appName:t.app_name,imageUrl:t.image,aboutUrl:t.about_url,tondns:t.tondns,platforms:t.platforms};return t.bridge.forEach(function(r){"sse"===r.type&&(e.bridgeUrl=r.url,e.universalLink=t.universal_url,e.deepLink=t.deepLink)}),e})}}])}();exports.WalletsListManager=l;
},{"./resources/fallback-wallets-list":"CCKs"}],"uqSh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"KABm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DisconnectRpcRequest=exports.SignDataRpcRequest=exports.SendTransactionRpcRequest=exports.RpcRequests=exports.AppRequest=void 0;var e=require("./app-request");Object.defineProperty(exports,"AppRequest",{enumerable:!0,get:function(){return e.AppRequest}}),Object.defineProperty(exports,"RpcRequests",{enumerable:!0,get:function(){return e.RpcRequests}});var t=require("./send-transaction-rpc-request");Object.defineProperty(exports,"SendTransactionRpcRequest",{enumerable:!0,get:function(){return t.SendTransactionRpcRequest}});var r=require("./sign-data-rpc-request");Object.defineProperty(exports,"SignDataRpcRequest",{enumerable:!0,get:function(){return r.SignDataRpcRequest}});var n=require("./disconnect-rpc-request");Object.defineProperty(exports,"DisconnectRpcRequest",{enumerable:!0,get:function(){return n.DisconnectRpcRequest}});
},{"./app-request":"uqSh","./send-transaction-rpc-request":"uqSh","./sign-data-rpc-request":"uqSh","./disconnect-rpc-request":"uqSh"}],"Um3n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TonProofItem=exports.TonAddressItem=exports.ConnectItem=exports.ConnectRequest=void 0;var e=require("./connect-request");Object.defineProperty(exports,"ConnectRequest",{enumerable:!0,get:function(){return e.ConnectRequest}});var t=require("./connect-item");Object.defineProperty(exports,"ConnectItem",{enumerable:!0,get:function(){return t.ConnectItem}}),Object.defineProperty(exports,"TonAddressItem",{enumerable:!0,get:function(){return t.TonAddressItem}}),Object.defineProperty(exports,"TonProofItem",{enumerable:!0,get:function(){return t.TonProofItem}});
},{"./connect-request":"uqSh","./connect-item":"uqSh"}],"oJVf":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var p=Object.getOwnPropertyDescriptor(t,r);p&&("get"in p?t.__esModule:!p.writable&&!p.configurable)||(p={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,p)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(r,a)||e(r,t,a)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DappMetadata=exports.AppMessage=void 0;var r=require("./app-message");Object.defineProperty(exports,"AppMessage",{enumerable:!0,get:function(){return r.AppMessage}});var a=require("./dapp-metadata");Object.defineProperty(exports,"DappMetadata",{enumerable:!0,get:function(){return a.DappMetadata}}),t(require("./request"),exports),t(require("./connect-request"),exports);
},{"./app-message":"uqSh","./dapp-metadata":"uqSh","./request":"KABm","./connect-request":"Um3n"}],"aviv":[function(require,module,exports) {
"use strict";var R,E;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CONNECT_ITEM_ERROR_CODES=exports.CONNECT_EVENT_ERROR_CODES=void 0,function(R){R[R.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",R[R.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",R[R.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",R[R.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",R[R.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",R[R.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",R[R.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(R||(exports.CONNECT_EVENT_ERROR_CODES=R={})),function(R){R[R.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",R[R.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(E||(exports.CONNECT_ITEM_ERROR_CODES=E={}));
},{}],"LRDy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WalletEvent=exports.DisconnectEvent=exports.CONNECT_ITEM_ERROR_CODES=exports.TonAddressItemReply=exports.TonProofItemReplyError=exports.TonProofItemReplySuccess=exports.TonProofItemReply=exports.ConnectItemReplyError=exports.ConnectItemReply=exports.CONNECT_EVENT_ERROR_CODES=exports.ConnectEventError=exports.ConnectEventSuccess=exports.ConnectEvent=void 0;var e=require("./connect-event");Object.defineProperty(exports,"ConnectEvent",{enumerable:!0,get:function(){return e.ConnectEvent}}),Object.defineProperty(exports,"ConnectEventSuccess",{enumerable:!0,get:function(){return e.ConnectEventSuccess}}),Object.defineProperty(exports,"ConnectEventError",{enumerable:!0,get:function(){return e.ConnectEventError}}),Object.defineProperty(exports,"CONNECT_EVENT_ERROR_CODES",{enumerable:!0,get:function(){return e.CONNECT_EVENT_ERROR_CODES}}),Object.defineProperty(exports,"ConnectItemReply",{enumerable:!0,get:function(){return e.ConnectItemReply}}),Object.defineProperty(exports,"ConnectItemReplyError",{enumerable:!0,get:function(){return e.ConnectItemReplyError}}),Object.defineProperty(exports,"TonProofItemReply",{enumerable:!0,get:function(){return e.TonProofItemReply}}),Object.defineProperty(exports,"TonProofItemReplySuccess",{enumerable:!0,get:function(){return e.TonProofItemReplySuccess}}),Object.defineProperty(exports,"TonProofItemReplyError",{enumerable:!0,get:function(){return e.TonProofItemReplyError}}),Object.defineProperty(exports,"TonAddressItemReply",{enumerable:!0,get:function(){return e.TonAddressItemReply}}),Object.defineProperty(exports,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return e.CONNECT_ITEM_ERROR_CODES}});var t=require("./disconnect-event");Object.defineProperty(exports,"DisconnectEvent",{enumerable:!0,get:function(){return t.DisconnectEvent}});var r=require("./wallet-event");Object.defineProperty(exports,"WalletEvent",{enumerable:!0,get:function(){return r.WalletEvent}});
},{"./connect-event":"aviv","./disconnect-event":"uqSh","./wallet-event":"uqSh"}],"sBPd":[function(require,module,exports) {
"use strict";var R;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SEND_TRANSACTION_ERROR_CODES=void 0,function(R){R[R.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",R[R.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",R[R.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",R[R.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",R[R.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(R||(exports.SEND_TRANSACTION_ERROR_CODES=R={}));
},{}],"ICMN":[function(require,module,exports) {
"use strict";var R;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SIGN_DATA_ERROR_CODES=void 0,function(R){R[R.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",R[R.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",R[R.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",R[R.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",R[R.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(R||(exports.SIGN_DATA_ERROR_CODES=R={}));
},{}],"yZQ3":[function(require,module,exports) {
"use strict";var R;Object.defineProperty(exports,"__esModule",{value:!0}),exports.DISCONNECT_ERROR_CODES=void 0,function(R){R[R.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",R[R.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",R[R.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",R[R.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(R||(exports.DISCONNECT_ERROR_CODES=R={}));
},{}],"Kzsk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WalletResponseTemplateSuccess=exports.WalletResponseTemplateError=exports.DISCONNECT_ERROR_CODES=exports.DisconnectRpcResponseError=exports.DisconnectRpcResponseSuccess=exports.DisconnectRpcResponse=exports.SIGN_DATA_ERROR_CODES=exports.SignDataRpcResponseError=exports.SignDataRpcResponseSuccess=exports.SignDataRpcResponse=exports.SEND_TRANSACTION_ERROR_CODES=exports.SendTransactionRpcResponseError=exports.SendTransactionRpcResponseSuccess=exports.SendTransactionRpcResponse=exports.RpcResponses=exports.WalletResponseError=exports.WalletResponseSuccess=exports.WalletResponse=void 0;var e=require("./wallet-response");Object.defineProperty(exports,"WalletResponse",{enumerable:!0,get:function(){return e.WalletResponse}}),Object.defineProperty(exports,"WalletResponseSuccess",{enumerable:!0,get:function(){return e.WalletResponseSuccess}}),Object.defineProperty(exports,"WalletResponseError",{enumerable:!0,get:function(){return e.WalletResponseError}}),Object.defineProperty(exports,"RpcResponses",{enumerable:!0,get:function(){return e.RpcResponses}});var r=require("./send-transaction-rpc-response");Object.defineProperty(exports,"SendTransactionRpcResponse",{enumerable:!0,get:function(){return r.SendTransactionRpcResponse}}),Object.defineProperty(exports,"SendTransactionRpcResponseSuccess",{enumerable:!0,get:function(){return r.SendTransactionRpcResponseSuccess}}),Object.defineProperty(exports,"SendTransactionRpcResponseError",{enumerable:!0,get:function(){return r.SendTransactionRpcResponseError}}),Object.defineProperty(exports,"SEND_TRANSACTION_ERROR_CODES",{enumerable:!0,get:function(){return r.SEND_TRANSACTION_ERROR_CODES}});var n=require("./sign-data-rpc-response");Object.defineProperty(exports,"SignDataRpcResponse",{enumerable:!0,get:function(){return n.SignDataRpcResponse}}),Object.defineProperty(exports,"SignDataRpcResponseSuccess",{enumerable:!0,get:function(){return n.SignDataRpcResponseSuccess}}),Object.defineProperty(exports,"SignDataRpcResponseError",{enumerable:!0,get:function(){return n.SignDataRpcResponseError}}),Object.defineProperty(exports,"SIGN_DATA_ERROR_CODES",{enumerable:!0,get:function(){return n.SIGN_DATA_ERROR_CODES}});var s=require("./disconnect-rpc-response");Object.defineProperty(exports,"DisconnectRpcResponse",{enumerable:!0,get:function(){return s.DisconnectRpcResponse}}),Object.defineProperty(exports,"DisconnectRpcResponseSuccess",{enumerable:!0,get:function(){return s.DisconnectRpcResponseSuccess}}),Object.defineProperty(exports,"DisconnectRpcResponseError",{enumerable:!0,get:function(){return s.DisconnectRpcResponseError}}),Object.defineProperty(exports,"DISCONNECT_ERROR_CODES",{enumerable:!0,get:function(){return s.DISCONNECT_ERROR_CODES}});var t=require("./wallet-response-template");Object.defineProperty(exports,"WalletResponseTemplateError",{enumerable:!0,get:function(){return t.WalletResponseTemplateError}}),Object.defineProperty(exports,"WalletResponseTemplateSuccess",{enumerable:!0,get:function(){return t.WalletResponseTemplateSuccess}});
},{"./wallet-response":"uqSh","./send-transaction-rpc-response":"sBPd","./sign-data-rpc-response":"ICMN","./disconnect-rpc-response":"yZQ3","./wallet-response-template":"uqSh"}],"Di1N":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var o in t)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||e(r,t,o)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WalletMessage=void 0,t(require("./wallet-event"),exports),t(require("./wallet-response"),exports);var r=require("./wallet-message");Object.defineProperty(exports,"WalletMessage",{enumerable:!0,get:function(){return r.WalletMessage}});
},{"./wallet-event":"LRDy","./wallet-response":"Kzsk","./wallet-message":"uqSh"}],"VU2E":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CHAIN=void 0,function(e){e.MAINNET="-239",e.TESTNET="-3"}(e||(exports.CHAIN=e={}));
},{}],"n3oa":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&("get"in o?r.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),r=this&&this.__exportStar||function(r,t){for(var n in r)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||e(t,r,n)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CHAIN=exports.SignDataFeature=exports.SendTransactionFeature=exports.SendTransactionFeatureDeprecated=exports.Feature=exports.DeviceInfo=exports.RpcMethod=void 0,r(require("./app-message"),exports),r(require("./wallet-message"),exports);var t=require("./rpc-method");Object.defineProperty(exports,"RpcMethod",{enumerable:!0,get:function(){return t.RpcMethod}});var n=require("./device-info");Object.defineProperty(exports,"DeviceInfo",{enumerable:!0,get:function(){return n.DeviceInfo}});var o=require("./feature");Object.defineProperty(exports,"Feature",{enumerable:!0,get:function(){return o.Feature}}),Object.defineProperty(exports,"SendTransactionFeatureDeprecated",{enumerable:!0,get:function(){return o.SendTransactionFeatureDeprecated}}),Object.defineProperty(exports,"SendTransactionFeature",{enumerable:!0,get:function(){return o.SendTransactionFeature}}),Object.defineProperty(exports,"SignDataFeature",{enumerable:!0,get:function(){return o.SignDataFeature}});var a=require("./CHAIN");Object.defineProperty(exports,"CHAIN",{enumerable:!0,get:function(){return a.CHAIN}});
},{"./app-message":"oJVf","./wallet-message":"Di1N","./rpc-method":"uqSh","./device-info":"uqSh","./feature":"uqSh","./CHAIN":"VU2E"}],"rDCW":[function(require,module,exports) {

},{}],"fsae":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;!function(e,n){"use strict";"undefined"!=typeof module&&module.exports?module.exports=n():e.nacl?e.nacl.util=n():(e.nacl={},e.nacl.util=n())}(this,function(){"use strict";var n={};function r(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return n.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var n,r=unescape(encodeURIComponent(e)),t=new Uint8Array(r.length);for(n=0;n<r.length;n++)t[n]=r.charCodeAt(n);return t},n.encodeUTF8=function(e){var n,r=[];for(n=0;n<e.length;n++)r.push(String.fromCharCode(e[n]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==e.from?(n.encodeBase64=function(n){return e.from(n).toString("base64")},n.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(e.from(n,"base64"),0))}):(n.encodeBase64=function(n){return new e(n).toString("base64")},n.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(new e(n,"base64"),0))}):(n.encodeBase64=function(e){var n,r=[],t=e.length;for(n=0;n<t;n++)r.push(String.fromCharCode(e[n]));return btoa(r.join(""))},n.decodeBase64=function(e){r(e);var n,t=atob(e),o=new Uint8Array(t.length);for(n=0;n<t.length;n++)o[n]=t.charCodeAt(n);return o}),n});
},{"buffer":"rDCW"}],"VVa6":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Base64=void 0;var t=e(require("tweetnacl-util"));function n(e,n){var r=t.default.encodeBase64(e);return n?encodeURIComponent(r):r}function r(e,n){return n&&(e=decodeURIComponent(e)),t.default.decodeBase64(e)}function o(e){var r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e instanceof Uint8Array?r=e:("string"!=typeof e&&(e=JSON.stringify(e)),r=t.default.decodeUTF8(e)),n(r,o)}function u(e){var n=r(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return{toString:function(){return t.default.encodeUTF8(n)},toObject:function(){try{return JSON.parse(t.default.encodeUTF8(n))}catch(e){return null}},toUint8Array:function(){return n}}}exports.Base64={encode:o,decode:u};
},{"tweetnacl-util":"fsae"}],"Pw6f":[function(require,module,exports) {
"use strict";function t(t,r){var e=new Uint8Array(t.length+r.length);return e.set(t),e.set(r,t.length),e}function r(t,r){if(r>=t.length)throw new Error("Index is out of buffer");return[t.slice(0,r),t.slice(r)]}function e(t){var r="";return t.forEach(function(t){r+=("0"+(255&t).toString(16)).slice(-2)}),r}function n(t){if(t.length%2!=0)throw new Error("Cannot convert ".concat(t," to bytesArray"));for(var r=new Uint8Array(t.length/2),e=0;e<t.length;e+=2)r[e/2]=parseInt(t.slice(e,e+2),16);return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatUint8Arrays=t,exports.splitToUint8Arrays=r,exports.toHexString=e,exports.hexToByteArray=n;
},{}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"rCff":[function(require,module,exports) {
var process = require("process");
var e=require("process");function r(){return void 0!==e&&null!=e.versions&&null!=e.versions.node}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNode=r;
},{"process":"pBGv"}],"vn98":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNode=exports.hexToByteArray=exports.toHexString=exports.splitToUint8Arrays=exports.concatUint8Arrays=exports.Base64=void 0;var e=require("./base64");Object.defineProperty(exports,"Base64",{enumerable:!0,get:function(){return e.Base64}});var r=require("./binary");Object.defineProperty(exports,"concatUint8Arrays",{enumerable:!0,get:function(){return r.concatUint8Arrays}}),Object.defineProperty(exports,"splitToUint8Arrays",{enumerable:!0,get:function(){return r.splitToUint8Arrays}}),Object.defineProperty(exports,"toHexString",{enumerable:!0,get:function(){return r.toHexString}}),Object.defineProperty(exports,"hexToByteArray",{enumerable:!0,get:function(){return r.hexToByteArray}});var t=require("./web-api");Object.defineProperty(exports,"isNode",{enumerable:!0,get:function(){return t.isNode}});
},{"./base64":"VVa6","./binary":"Pw6f","./web-api":"rCff"}],"WYSB":[function(require,module,exports) {
!function(r){"use strict";var t=function(r){var t,n=new Float64Array(16);if(r)for(t=0;t<r.length;t++)n[t]=r[t];return n},n=function(){throw new Error("no PRNG")},e=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var i=t(),h=t([1]),a=t([56129,1]),f=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),s=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),c=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),y=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function l(r,t,n,e){r[t]=n>>24&255,r[t+1]=n>>16&255,r[t+2]=n>>8&255,r[t+3]=255&n,r[t+4]=e>>24&255,r[t+5]=e>>16&255,r[t+6]=e>>8&255,r[t+7]=255&e}function w(r,t,n,e,o){var i,h=0;for(i=0;i<o;i++)h|=r[t+i]^n[e+i];return(1&h-1>>>8)-1}function v(r,t,n,e){return w(r,t,n,e,16)}function p(r,t,n,e){return w(r,t,n,e,32)}function b(r,t,n,e){!function(r,t,n,e){for(var o,i=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,h=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,s=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,c=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,y=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,l=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,w=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,v=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,b=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,g=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,A=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,_=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,U=i,d=h,E=a,x=f,M=s,m=u,B=c,S=y,k=l,K=w,Y=v,L=p,T=b,z=g,R=A,P=_,N=0;N<20;N+=2)U^=(o=(T^=(o=(k^=(o=(M^=(o=U+T|0)<<7|o>>>25)+U|0)<<9|o>>>23)+M|0)<<13|o>>>19)+k|0)<<18|o>>>14,m^=(o=(d^=(o=(z^=(o=(K^=(o=m+d|0)<<7|o>>>25)+m|0)<<9|o>>>23)+K|0)<<13|o>>>19)+z|0)<<18|o>>>14,Y^=(o=(B^=(o=(E^=(o=(R^=(o=Y+B|0)<<7|o>>>25)+Y|0)<<9|o>>>23)+R|0)<<13|o>>>19)+E|0)<<18|o>>>14,P^=(o=(L^=(o=(S^=(o=(x^=(o=P+L|0)<<7|o>>>25)+P|0)<<9|o>>>23)+x|0)<<13|o>>>19)+S|0)<<18|o>>>14,U^=(o=(x^=(o=(E^=(o=(d^=(o=U+x|0)<<7|o>>>25)+U|0)<<9|o>>>23)+d|0)<<13|o>>>19)+E|0)<<18|o>>>14,m^=(o=(M^=(o=(S^=(o=(B^=(o=m+M|0)<<7|o>>>25)+m|0)<<9|o>>>23)+B|0)<<13|o>>>19)+S|0)<<18|o>>>14,Y^=(o=(K^=(o=(k^=(o=(L^=(o=Y+K|0)<<7|o>>>25)+Y|0)<<9|o>>>23)+L|0)<<13|o>>>19)+k|0)<<18|o>>>14,P^=(o=(R^=(o=(z^=(o=(T^=(o=P+R|0)<<7|o>>>25)+P|0)<<9|o>>>23)+T|0)<<13|o>>>19)+z|0)<<18|o>>>14;U=U+i|0,d=d+h|0,E=E+a|0,x=x+f|0,M=M+s|0,m=m+u|0,B=B+c|0,S=S+y|0,k=k+l|0,K=K+w|0,Y=Y+v|0,L=L+p|0,T=T+b|0,z=z+g|0,R=R+A|0,P=P+_|0,r[0]=U>>>0&255,r[1]=U>>>8&255,r[2]=U>>>16&255,r[3]=U>>>24&255,r[4]=d>>>0&255,r[5]=d>>>8&255,r[6]=d>>>16&255,r[7]=d>>>24&255,r[8]=E>>>0&255,r[9]=E>>>8&255,r[10]=E>>>16&255,r[11]=E>>>24&255,r[12]=x>>>0&255,r[13]=x>>>8&255,r[14]=x>>>16&255,r[15]=x>>>24&255,r[16]=M>>>0&255,r[17]=M>>>8&255,r[18]=M>>>16&255,r[19]=M>>>24&255,r[20]=m>>>0&255,r[21]=m>>>8&255,r[22]=m>>>16&255,r[23]=m>>>24&255,r[24]=B>>>0&255,r[25]=B>>>8&255,r[26]=B>>>16&255,r[27]=B>>>24&255,r[28]=S>>>0&255,r[29]=S>>>8&255,r[30]=S>>>16&255,r[31]=S>>>24&255,r[32]=k>>>0&255,r[33]=k>>>8&255,r[34]=k>>>16&255,r[35]=k>>>24&255,r[36]=K>>>0&255,r[37]=K>>>8&255,r[38]=K>>>16&255,r[39]=K>>>24&255,r[40]=Y>>>0&255,r[41]=Y>>>8&255,r[42]=Y>>>16&255,r[43]=Y>>>24&255,r[44]=L>>>0&255,r[45]=L>>>8&255,r[46]=L>>>16&255,r[47]=L>>>24&255,r[48]=T>>>0&255,r[49]=T>>>8&255,r[50]=T>>>16&255,r[51]=T>>>24&255,r[52]=z>>>0&255,r[53]=z>>>8&255,r[54]=z>>>16&255,r[55]=z>>>24&255,r[56]=R>>>0&255,r[57]=R>>>8&255,r[58]=R>>>16&255,r[59]=R>>>24&255,r[60]=P>>>0&255,r[61]=P>>>8&255,r[62]=P>>>16&255,r[63]=P>>>24&255}(r,t,n,e)}function g(r,t,n,e){!function(r,t,n,e){for(var o,i=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,h=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,s=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,c=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,y=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,l=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,w=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,v=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,b=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,g=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,A=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,_=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,U=0;U<20;U+=2)i^=(o=(b^=(o=(l^=(o=(s^=(o=i+b|0)<<7|o>>>25)+i|0)<<9|o>>>23)+s|0)<<13|o>>>19)+l|0)<<18|o>>>14,u^=(o=(h^=(o=(g^=(o=(w^=(o=u+h|0)<<7|o>>>25)+u|0)<<9|o>>>23)+w|0)<<13|o>>>19)+g|0)<<18|o>>>14,v^=(o=(c^=(o=(a^=(o=(A^=(o=v+c|0)<<7|o>>>25)+v|0)<<9|o>>>23)+A|0)<<13|o>>>19)+a|0)<<18|o>>>14,_^=(o=(p^=(o=(y^=(o=(f^=(o=_+p|0)<<7|o>>>25)+_|0)<<9|o>>>23)+f|0)<<13|o>>>19)+y|0)<<18|o>>>14,i^=(o=(f^=(o=(a^=(o=(h^=(o=i+f|0)<<7|o>>>25)+i|0)<<9|o>>>23)+h|0)<<13|o>>>19)+a|0)<<18|o>>>14,u^=(o=(s^=(o=(y^=(o=(c^=(o=u+s|0)<<7|o>>>25)+u|0)<<9|o>>>23)+c|0)<<13|o>>>19)+y|0)<<18|o>>>14,v^=(o=(w^=(o=(l^=(o=(p^=(o=v+w|0)<<7|o>>>25)+v|0)<<9|o>>>23)+p|0)<<13|o>>>19)+l|0)<<18|o>>>14,_^=(o=(A^=(o=(g^=(o=(b^=(o=_+A|0)<<7|o>>>25)+_|0)<<9|o>>>23)+b|0)<<13|o>>>19)+g|0)<<18|o>>>14;r[0]=i>>>0&255,r[1]=i>>>8&255,r[2]=i>>>16&255,r[3]=i>>>24&255,r[4]=u>>>0&255,r[5]=u>>>8&255,r[6]=u>>>16&255,r[7]=u>>>24&255,r[8]=v>>>0&255,r[9]=v>>>8&255,r[10]=v>>>16&255,r[11]=v>>>24&255,r[12]=_>>>0&255,r[13]=_>>>8&255,r[14]=_>>>16&255,r[15]=_>>>24&255,r[16]=c>>>0&255,r[17]=c>>>8&255,r[18]=c>>>16&255,r[19]=c>>>24&255,r[20]=y>>>0&255,r[21]=y>>>8&255,r[22]=y>>>16&255,r[23]=y>>>24&255,r[24]=l>>>0&255,r[25]=l>>>8&255,r[26]=l>>>16&255,r[27]=l>>>24&255,r[28]=w>>>0&255,r[29]=w>>>8&255,r[30]=w>>>16&255,r[31]=w>>>24&255}(r,t,n,e)}var A=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function _(r,t,n,e,o,i,h){var a,f,s=new Uint8Array(16),u=new Uint8Array(64);for(f=0;f<16;f++)s[f]=0;for(f=0;f<8;f++)s[f]=i[f];for(;o>=64;){for(b(u,s,h,A),f=0;f<64;f++)r[t+f]=n[e+f]^u[f];for(a=1,f=8;f<16;f++)a=a+(255&s[f])|0,s[f]=255&a,a>>>=8;o-=64,t+=64,e+=64}if(o>0)for(b(u,s,h,A),f=0;f<o;f++)r[t+f]=n[e+f]^u[f];return 0}function U(r,t,n,e,o){var i,h,a=new Uint8Array(16),f=new Uint8Array(64);for(h=0;h<16;h++)a[h]=0;for(h=0;h<8;h++)a[h]=e[h];for(;n>=64;){for(b(f,a,o,A),h=0;h<64;h++)r[t+h]=f[h];for(i=1,h=8;h<16;h++)i=i+(255&a[h])|0,a[h]=255&i,i>>>=8;n-=64,t+=64}if(n>0)for(b(f,a,o,A),h=0;h<n;h++)r[t+h]=f[h];return 0}function d(r,t,n,e,o){var i=new Uint8Array(32);g(i,e,o,A);for(var h=new Uint8Array(8),a=0;a<8;a++)h[a]=e[a+16];return U(r,t,n,h,i)}function E(r,t,n,e,o,i,h){var a=new Uint8Array(32);g(a,i,h,A);for(var f=new Uint8Array(8),s=0;s<8;s++)f[s]=i[s+16];return _(r,t,n,e,o,f,a)}var x=function(r){var t,n,e,o,i,h,a,f;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&r[0]|(255&r[1])<<8,this.r[0]=8191&t,n=255&r[2]|(255&r[3])<<8,this.r[1]=8191&(t>>>13|n<<3),e=255&r[4]|(255&r[5])<<8,this.r[2]=7939&(n>>>10|e<<6),o=255&r[6]|(255&r[7])<<8,this.r[3]=8191&(e>>>7|o<<9),i=255&r[8]|(255&r[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,h=255&r[10]|(255&r[11])<<8,this.r[6]=8191&(i>>>14|h<<2),a=255&r[12]|(255&r[13])<<8,this.r[7]=8065&(h>>>11|a<<5),f=255&r[14]|(255&r[15])<<8,this.r[8]=8191&(a>>>8|f<<8),this.r[9]=f>>>5&127,this.pad[0]=255&r[16]|(255&r[17])<<8,this.pad[1]=255&r[18]|(255&r[19])<<8,this.pad[2]=255&r[20]|(255&r[21])<<8,this.pad[3]=255&r[22]|(255&r[23])<<8,this.pad[4]=255&r[24]|(255&r[25])<<8,this.pad[5]=255&r[26]|(255&r[27])<<8,this.pad[6]=255&r[28]|(255&r[29])<<8,this.pad[7]=255&r[30]|(255&r[31])<<8};function M(r,t,n,e,o,i){var h=new x(i);return h.update(n,e,o),h.finish(r,t),0}function m(r,t,n,e,o,i){var h=new Uint8Array(16);return M(h,0,n,e,o,i),v(r,t,h,0)}function B(r,t,n,e,o){var i;if(n<32)return-1;for(E(r,0,t,0,n,e,o),M(r,16,r,32,n-32,r),i=0;i<16;i++)r[i]=0;return 0}function S(r,t,n,e,o){var i,h=new Uint8Array(32);if(n<32)return-1;if(d(h,0,32,e,o),0!==m(t,16,t,32,n-32,h))return-1;for(E(r,0,t,0,n,e,o),i=0;i<32;i++)r[i]=0;return 0}function k(r,t){var n;for(n=0;n<16;n++)r[n]=0|t[n]}function K(r){var t,n,e=1;for(t=0;t<16;t++)n=r[t]+e+65535,e=Math.floor(n/65536),r[t]=n-65536*e;r[0]+=e-1+37*(e-1)}function Y(r,t,n){for(var e,o=~(n-1),i=0;i<16;i++)e=o&(r[i]^t[i]),r[i]^=e,t[i]^=e}function L(r,n){var e,o,i,h=t(),a=t();for(e=0;e<16;e++)a[e]=n[e];for(K(a),K(a),K(a),o=0;o<2;o++){for(h[0]=a[0]-65517,e=1;e<15;e++)h[e]=a[e]-65535-(h[e-1]>>16&1),h[e-1]&=65535;h[15]=a[15]-32767-(h[14]>>16&1),i=h[15]>>16&1,h[14]&=65535,Y(a,h,1-i)}for(e=0;e<16;e++)r[2*e]=255&a[e],r[2*e+1]=a[e]>>8}function T(r,t){var n=new Uint8Array(32),e=new Uint8Array(32);return L(n,r),L(e,t),p(n,0,e,0)}function z(r){var t=new Uint8Array(32);return L(t,r),1&t[0]}function R(r,t){var n;for(n=0;n<16;n++)r[n]=t[2*n]+(t[2*n+1]<<8);r[15]&=32767}function P(r,t,n){for(var e=0;e<16;e++)r[e]=t[e]+n[e]}function N(r,t,n){for(var e=0;e<16;e++)r[e]=t[e]-n[e]}function O(r,t,n){var e,o,i=0,h=0,a=0,f=0,s=0,u=0,c=0,y=0,l=0,w=0,v=0,p=0,b=0,g=0,A=0,_=0,U=0,d=0,E=0,x=0,M=0,m=0,B=0,S=0,k=0,K=0,Y=0,L=0,T=0,z=0,R=0,P=n[0],N=n[1],O=n[2],C=n[3],F=n[4],I=n[5],Z=n[6],G=n[7],q=n[8],D=n[9],V=n[10],X=n[11],j=n[12],H=n[13],J=n[14],Q=n[15];i+=(e=t[0])*P,h+=e*N,a+=e*O,f+=e*C,s+=e*F,u+=e*I,c+=e*Z,y+=e*G,l+=e*q,w+=e*D,v+=e*V,p+=e*X,b+=e*j,g+=e*H,A+=e*J,_+=e*Q,h+=(e=t[1])*P,a+=e*N,f+=e*O,s+=e*C,u+=e*F,c+=e*I,y+=e*Z,l+=e*G,w+=e*q,v+=e*D,p+=e*V,b+=e*X,g+=e*j,A+=e*H,_+=e*J,U+=e*Q,a+=(e=t[2])*P,f+=e*N,s+=e*O,u+=e*C,c+=e*F,y+=e*I,l+=e*Z,w+=e*G,v+=e*q,p+=e*D,b+=e*V,g+=e*X,A+=e*j,_+=e*H,U+=e*J,d+=e*Q,f+=(e=t[3])*P,s+=e*N,u+=e*O,c+=e*C,y+=e*F,l+=e*I,w+=e*Z,v+=e*G,p+=e*q,b+=e*D,g+=e*V,A+=e*X,_+=e*j,U+=e*H,d+=e*J,E+=e*Q,s+=(e=t[4])*P,u+=e*N,c+=e*O,y+=e*C,l+=e*F,w+=e*I,v+=e*Z,p+=e*G,b+=e*q,g+=e*D,A+=e*V,_+=e*X,U+=e*j,d+=e*H,E+=e*J,x+=e*Q,u+=(e=t[5])*P,c+=e*N,y+=e*O,l+=e*C,w+=e*F,v+=e*I,p+=e*Z,b+=e*G,g+=e*q,A+=e*D,_+=e*V,U+=e*X,d+=e*j,E+=e*H,x+=e*J,M+=e*Q,c+=(e=t[6])*P,y+=e*N,l+=e*O,w+=e*C,v+=e*F,p+=e*I,b+=e*Z,g+=e*G,A+=e*q,_+=e*D,U+=e*V,d+=e*X,E+=e*j,x+=e*H,M+=e*J,m+=e*Q,y+=(e=t[7])*P,l+=e*N,w+=e*O,v+=e*C,p+=e*F,b+=e*I,g+=e*Z,A+=e*G,_+=e*q,U+=e*D,d+=e*V,E+=e*X,x+=e*j,M+=e*H,m+=e*J,B+=e*Q,l+=(e=t[8])*P,w+=e*N,v+=e*O,p+=e*C,b+=e*F,g+=e*I,A+=e*Z,_+=e*G,U+=e*q,d+=e*D,E+=e*V,x+=e*X,M+=e*j,m+=e*H,B+=e*J,S+=e*Q,w+=(e=t[9])*P,v+=e*N,p+=e*O,b+=e*C,g+=e*F,A+=e*I,_+=e*Z,U+=e*G,d+=e*q,E+=e*D,x+=e*V,M+=e*X,m+=e*j,B+=e*H,S+=e*J,k+=e*Q,v+=(e=t[10])*P,p+=e*N,b+=e*O,g+=e*C,A+=e*F,_+=e*I,U+=e*Z,d+=e*G,E+=e*q,x+=e*D,M+=e*V,m+=e*X,B+=e*j,S+=e*H,k+=e*J,K+=e*Q,p+=(e=t[11])*P,b+=e*N,g+=e*O,A+=e*C,_+=e*F,U+=e*I,d+=e*Z,E+=e*G,x+=e*q,M+=e*D,m+=e*V,B+=e*X,S+=e*j,k+=e*H,K+=e*J,Y+=e*Q,b+=(e=t[12])*P,g+=e*N,A+=e*O,_+=e*C,U+=e*F,d+=e*I,E+=e*Z,x+=e*G,M+=e*q,m+=e*D,B+=e*V,S+=e*X,k+=e*j,K+=e*H,Y+=e*J,L+=e*Q,g+=(e=t[13])*P,A+=e*N,_+=e*O,U+=e*C,d+=e*F,E+=e*I,x+=e*Z,M+=e*G,m+=e*q,B+=e*D,S+=e*V,k+=e*X,K+=e*j,Y+=e*H,L+=e*J,T+=e*Q,A+=(e=t[14])*P,_+=e*N,U+=e*O,d+=e*C,E+=e*F,x+=e*I,M+=e*Z,m+=e*G,B+=e*q,S+=e*D,k+=e*V,K+=e*X,Y+=e*j,L+=e*H,T+=e*J,z+=e*Q,_+=(e=t[15])*P,h+=38*(d+=e*O),a+=38*(E+=e*C),f+=38*(x+=e*F),s+=38*(M+=e*I),u+=38*(m+=e*Z),c+=38*(B+=e*G),y+=38*(S+=e*q),l+=38*(k+=e*D),w+=38*(K+=e*V),v+=38*(Y+=e*X),p+=38*(L+=e*j),b+=38*(T+=e*H),g+=38*(z+=e*J),A+=38*(R+=e*Q),i=(e=(i+=38*(U+=e*N))+(o=1)+65535)-65536*(o=Math.floor(e/65536)),h=(e=h+o+65535)-65536*(o=Math.floor(e/65536)),a=(e=a+o+65535)-65536*(o=Math.floor(e/65536)),f=(e=f+o+65535)-65536*(o=Math.floor(e/65536)),s=(e=s+o+65535)-65536*(o=Math.floor(e/65536)),u=(e=u+o+65535)-65536*(o=Math.floor(e/65536)),c=(e=c+o+65535)-65536*(o=Math.floor(e/65536)),y=(e=y+o+65535)-65536*(o=Math.floor(e/65536)),l=(e=l+o+65535)-65536*(o=Math.floor(e/65536)),w=(e=w+o+65535)-65536*(o=Math.floor(e/65536)),v=(e=v+o+65535)-65536*(o=Math.floor(e/65536)),p=(e=p+o+65535)-65536*(o=Math.floor(e/65536)),b=(e=b+o+65535)-65536*(o=Math.floor(e/65536)),g=(e=g+o+65535)-65536*(o=Math.floor(e/65536)),A=(e=A+o+65535)-65536*(o=Math.floor(e/65536)),_=(e=_+o+65535)-65536*(o=Math.floor(e/65536)),i=(e=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(e/65536)),h=(e=h+o+65535)-65536*(o=Math.floor(e/65536)),a=(e=a+o+65535)-65536*(o=Math.floor(e/65536)),f=(e=f+o+65535)-65536*(o=Math.floor(e/65536)),s=(e=s+o+65535)-65536*(o=Math.floor(e/65536)),u=(e=u+o+65535)-65536*(o=Math.floor(e/65536)),c=(e=c+o+65535)-65536*(o=Math.floor(e/65536)),y=(e=y+o+65535)-65536*(o=Math.floor(e/65536)),l=(e=l+o+65535)-65536*(o=Math.floor(e/65536)),w=(e=w+o+65535)-65536*(o=Math.floor(e/65536)),v=(e=v+o+65535)-65536*(o=Math.floor(e/65536)),p=(e=p+o+65535)-65536*(o=Math.floor(e/65536)),b=(e=b+o+65535)-65536*(o=Math.floor(e/65536)),g=(e=g+o+65535)-65536*(o=Math.floor(e/65536)),A=(e=A+o+65535)-65536*(o=Math.floor(e/65536)),_=(e=_+o+65535)-65536*(o=Math.floor(e/65536)),i+=o-1+37*(o-1),r[0]=i,r[1]=h,r[2]=a,r[3]=f,r[4]=s,r[5]=u,r[6]=c,r[7]=y,r[8]=l,r[9]=w,r[10]=v,r[11]=p,r[12]=b,r[13]=g,r[14]=A,r[15]=_}function C(r,t){O(r,t,t)}function F(r,n){var e,o=t();for(e=0;e<16;e++)o[e]=n[e];for(e=253;e>=0;e--)C(o,o),2!==e&&4!==e&&O(o,o,n);for(e=0;e<16;e++)r[e]=o[e]}function I(r,n){var e,o=t();for(e=0;e<16;e++)o[e]=n[e];for(e=250;e>=0;e--)C(o,o),1!==e&&O(o,o,n);for(e=0;e<16;e++)r[e]=o[e]}function Z(r,n,e){var o,i,h=new Uint8Array(32),f=new Float64Array(80),s=t(),u=t(),c=t(),y=t(),l=t(),w=t();for(i=0;i<31;i++)h[i]=n[i];for(h[31]=127&n[31]|64,h[0]&=248,R(f,e),i=0;i<16;i++)u[i]=f[i],y[i]=s[i]=c[i]=0;for(s[0]=y[0]=1,i=254;i>=0;--i)Y(s,u,o=h[i>>>3]>>>(7&i)&1),Y(c,y,o),P(l,s,c),N(s,s,c),P(c,u,y),N(u,u,y),C(y,l),C(w,s),O(s,c,s),O(c,u,l),P(l,s,c),N(s,s,c),C(u,s),N(c,y,w),O(s,c,a),P(s,s,y),O(c,c,s),O(s,y,w),O(y,u,f),C(u,l),Y(s,u,o),Y(c,y,o);for(i=0;i<16;i++)f[i+16]=s[i],f[i+32]=c[i],f[i+48]=u[i],f[i+64]=y[i];var v=f.subarray(32),p=f.subarray(16);return F(v,v),O(p,p,v),L(r,p),0}function G(r,t){return Z(r,t,o)}function q(r,t){return n(t,32),G(r,t)}function D(r,t,n){var o=new Uint8Array(32);return Z(o,n,t),g(r,e,o,A)}x.prototype.blocks=function(r,t,n){for(var e,o,i,h,a,f,s,u,c,y,l,w,v,p,b,g,A,_,U,d=this.fin?0:2048,E=this.h[0],x=this.h[1],M=this.h[2],m=this.h[3],B=this.h[4],S=this.h[5],k=this.h[6],K=this.h[7],Y=this.h[8],L=this.h[9],T=this.r[0],z=this.r[1],R=this.r[2],P=this.r[3],N=this.r[4],O=this.r[5],C=this.r[6],F=this.r[7],I=this.r[8],Z=this.r[9];n>=16;)y=c=0,y+=(E+=8191&(e=255&r[t+0]|(255&r[t+1])<<8))*T,y+=(x+=8191&(e>>>13|(o=255&r[t+2]|(255&r[t+3])<<8)<<3))*(5*Z),y+=(M+=8191&(o>>>10|(i=255&r[t+4]|(255&r[t+5])<<8)<<6))*(5*I),y+=(m+=8191&(i>>>7|(h=255&r[t+6]|(255&r[t+7])<<8)<<9))*(5*F),c=(y+=(B+=8191&(h>>>4|(a=255&r[t+8]|(255&r[t+9])<<8)<<12))*(5*C))>>>13,y&=8191,y+=(S+=a>>>1&8191)*(5*O),y+=(k+=8191&(a>>>14|(f=255&r[t+10]|(255&r[t+11])<<8)<<2))*(5*N),y+=(K+=8191&(f>>>11|(s=255&r[t+12]|(255&r[t+13])<<8)<<5))*(5*P),y+=(Y+=8191&(s>>>8|(u=255&r[t+14]|(255&r[t+15])<<8)<<8))*(5*R),l=c+=(y+=(L+=u>>>5|d)*(5*z))>>>13,l+=E*z,l+=x*T,l+=M*(5*Z),l+=m*(5*I),c=(l+=B*(5*F))>>>13,l&=8191,l+=S*(5*C),l+=k*(5*O),l+=K*(5*N),l+=Y*(5*P),c+=(l+=L*(5*R))>>>13,l&=8191,w=c,w+=E*R,w+=x*z,w+=M*T,w+=m*(5*Z),c=(w+=B*(5*I))>>>13,w&=8191,w+=S*(5*F),w+=k*(5*C),w+=K*(5*O),w+=Y*(5*N),v=c+=(w+=L*(5*P))>>>13,v+=E*P,v+=x*R,v+=M*z,v+=m*T,c=(v+=B*(5*Z))>>>13,v&=8191,v+=S*(5*I),v+=k*(5*F),v+=K*(5*C),v+=Y*(5*O),p=c+=(v+=L*(5*N))>>>13,p+=E*N,p+=x*P,p+=M*R,p+=m*z,c=(p+=B*T)>>>13,p&=8191,p+=S*(5*Z),p+=k*(5*I),p+=K*(5*F),p+=Y*(5*C),b=c+=(p+=L*(5*O))>>>13,b+=E*O,b+=x*N,b+=M*P,b+=m*R,c=(b+=B*z)>>>13,b&=8191,b+=S*T,b+=k*(5*Z),b+=K*(5*I),b+=Y*(5*F),g=c+=(b+=L*(5*C))>>>13,g+=E*C,g+=x*O,g+=M*N,g+=m*P,c=(g+=B*R)>>>13,g&=8191,g+=S*z,g+=k*T,g+=K*(5*Z),g+=Y*(5*I),A=c+=(g+=L*(5*F))>>>13,A+=E*F,A+=x*C,A+=M*O,A+=m*N,c=(A+=B*P)>>>13,A&=8191,A+=S*R,A+=k*z,A+=K*T,A+=Y*(5*Z),_=c+=(A+=L*(5*I))>>>13,_+=E*I,_+=x*F,_+=M*C,_+=m*O,c=(_+=B*N)>>>13,_&=8191,_+=S*P,_+=k*R,_+=K*z,_+=Y*T,U=c+=(_+=L*(5*Z))>>>13,U+=E*Z,U+=x*I,U+=M*F,U+=m*C,c=(U+=B*O)>>>13,U&=8191,U+=S*N,U+=k*P,U+=K*R,U+=Y*z,E=y=8191&(c=(c=((c+=(U+=L*T)>>>13)<<2)+c|0)+(y&=8191)|0),x=l+=c>>>=13,M=w&=8191,m=v&=8191,B=p&=8191,S=b&=8191,k=g&=8191,K=A&=8191,Y=_&=8191,L=U&=8191,t+=16,n-=16;this.h[0]=E,this.h[1]=x,this.h[2]=M,this.h[3]=m,this.h[4]=B,this.h[5]=S,this.h[6]=k,this.h[7]=K,this.h[8]=Y,this.h[9]=L},x.prototype.finish=function(r,t){var n,e,o,i,h=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=n,n=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,h[0]=this.h[0]+5,n=h[0]>>>13,h[0]&=8191,i=1;i<10;i++)h[i]=this.h[i]+n,n=h[i]>>>13,h[i]&=8191;for(h[9]-=8192,e=(1^n)-1,i=0;i<10;i++)h[i]&=e;for(e=~e,i=0;i<10;i++)this.h[i]=this.h[i]&e|h[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;r[t+0]=this.h[0]>>>0&255,r[t+1]=this.h[0]>>>8&255,r[t+2]=this.h[1]>>>0&255,r[t+3]=this.h[1]>>>8&255,r[t+4]=this.h[2]>>>0&255,r[t+5]=this.h[2]>>>8&255,r[t+6]=this.h[3]>>>0&255,r[t+7]=this.h[3]>>>8&255,r[t+8]=this.h[4]>>>0&255,r[t+9]=this.h[4]>>>8&255,r[t+10]=this.h[5]>>>0&255,r[t+11]=this.h[5]>>>8&255,r[t+12]=this.h[6]>>>0&255,r[t+13]=this.h[6]>>>8&255,r[t+14]=this.h[7]>>>0&255,r[t+15]=this.h[7]>>>8&255},x.prototype.update=function(r,t,n){var e,o;if(this.leftover){for((o=16-this.leftover)>n&&(o=n),e=0;e<o;e++)this.buffer[this.leftover+e]=r[t+e];if(n-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(r,t,o),t+=o,n-=o),n){for(e=0;e<n;e++)this.buffer[this.leftover+e]=r[t+e];this.leftover+=n}};var V=B,X=S;var j=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function H(r,t,n,e){for(var o,i,h,a,f,s,u,c,y,l,w,v,p,b,g,A,_,U,d,E,x,M,m,B,S,k,K=new Int32Array(16),Y=new Int32Array(16),L=r[0],T=r[1],z=r[2],R=r[3],P=r[4],N=r[5],O=r[6],C=r[7],F=t[0],I=t[1],Z=t[2],G=t[3],q=t[4],D=t[5],V=t[6],X=t[7],H=0;e>=128;){for(d=0;d<16;d++)E=8*d+H,K[d]=n[E+0]<<24|n[E+1]<<16|n[E+2]<<8|n[E+3],Y[d]=n[E+4]<<24|n[E+5]<<16|n[E+6]<<8|n[E+7];for(d=0;d<80;d++)if(o=L,i=T,h=z,a=R,f=P,s=N,u=O,C,y=F,l=I,w=Z,v=G,p=q,b=D,g=V,X,m=65535&(M=X),B=M>>>16,S=65535&(x=C),k=x>>>16,m+=65535&(M=(q>>>14|P<<18)^(q>>>18|P<<14)^(P>>>9|q<<23)),B+=M>>>16,S+=65535&(x=(P>>>14|q<<18)^(P>>>18|q<<14)^(q>>>9|P<<23)),k+=x>>>16,m+=65535&(M=q&D^~q&V),B+=M>>>16,S+=65535&(x=P&N^~P&O),k+=x>>>16,x=j[2*d],m+=65535&(M=j[2*d+1]),B+=M>>>16,S+=65535&x,k+=x>>>16,x=K[d%16],B+=(M=Y[d%16])>>>16,S+=65535&x,k+=x>>>16,S+=(B+=(m+=65535&M)>>>16)>>>16,m=65535&(M=U=65535&m|B<<16),B=M>>>16,S=65535&(x=_=65535&S|(k+=S>>>16)<<16),k=x>>>16,m+=65535&(M=(F>>>28|L<<4)^(L>>>2|F<<30)^(L>>>7|F<<25)),B+=M>>>16,S+=65535&(x=(L>>>28|F<<4)^(F>>>2|L<<30)^(F>>>7|L<<25)),k+=x>>>16,B+=(M=F&I^F&Z^I&Z)>>>16,S+=65535&(x=L&T^L&z^T&z),k+=x>>>16,c=65535&(S+=(B+=(m+=65535&M)>>>16)>>>16)|(k+=S>>>16)<<16,A=65535&m|B<<16,m=65535&(M=v),B=M>>>16,S=65535&(x=a),k=x>>>16,B+=(M=U)>>>16,S+=65535&(x=_),k+=x>>>16,T=o,z=i,R=h,P=a=65535&(S+=(B+=(m+=65535&M)>>>16)>>>16)|(k+=S>>>16)<<16,N=f,O=s,C=u,L=c,I=y,Z=l,G=w,q=v=65535&m|B<<16,D=p,V=b,X=g,F=A,d%16==15)for(E=0;E<16;E++)x=K[E],m=65535&(M=Y[E]),B=M>>>16,S=65535&x,k=x>>>16,x=K[(E+9)%16],m+=65535&(M=Y[(E+9)%16]),B+=M>>>16,S+=65535&x,k+=x>>>16,_=K[(E+1)%16],m+=65535&(M=((U=Y[(E+1)%16])>>>1|_<<31)^(U>>>8|_<<24)^(U>>>7|_<<25)),B+=M>>>16,S+=65535&(x=(_>>>1|U<<31)^(_>>>8|U<<24)^_>>>7),k+=x>>>16,_=K[(E+14)%16],B+=(M=((U=Y[(E+14)%16])>>>19|_<<13)^(_>>>29|U<<3)^(U>>>6|_<<26))>>>16,S+=65535&(x=(_>>>19|U<<13)^(U>>>29|_<<3)^_>>>6),k+=x>>>16,k+=(S+=(B+=(m+=65535&M)>>>16)>>>16)>>>16,K[E]=65535&S|k<<16,Y[E]=65535&m|B<<16;m=65535&(M=F),B=M>>>16,S=65535&(x=L),k=x>>>16,x=r[0],B+=(M=t[0])>>>16,S+=65535&x,k+=x>>>16,k+=(S+=(B+=(m+=65535&M)>>>16)>>>16)>>>16,r[0]=L=65535&S|k<<16,t[0]=F=65535&m|B<<16,m=65535&(M=I),B=M>>>16,S=65535&(x=T),k=x>>>16,x=r[1],B+=(M=t[1])>>>16,S+=65535&x,k+=x>>>16,k+=(S+=(B+=(m+=65535&M)>>>16)>>>16)>>>16,r[1]=T=65535&S|k<<16,t[1]=I=65535&m|B<<16,m=65535&(M=Z),B=M>>>16,S=65535&(x=z),k=x>>>16,x=r[2],B+=(M=t[2])>>>16,S+=65535&x,k+=x>>>16,k+=(S+=(B+=(m+=65535&M)>>>16)>>>16)>>>16,r[2]=z=65535&S|k<<16,t[2]=Z=65535&m|B<<16,m=65535&(M=G),B=M>>>16,S=65535&(x=R),k=x>>>16,x=r[3],B+=(M=t[3])>>>16,S+=65535&x,k+=x>>>16,k+=(S+=(B+=(m+=65535&M)>>>16)>>>16)>>>16,r[3]=R=65535&S|k<<16,t[3]=G=65535&m|B<<16,m=65535&(M=q),B=M>>>16,S=65535&(x=P),k=x>>>16,x=r[4],B+=(M=t[4])>>>16,S+=65535&x,k+=x>>>16,k+=(S+=(B+=(m+=65535&M)>>>16)>>>16)>>>16,r[4]=P=65535&S|k<<16,t[4]=q=65535&m|B<<16,m=65535&(M=D),B=M>>>16,S=65535&(x=N),k=x>>>16,x=r[5],B+=(M=t[5])>>>16,S+=65535&x,k+=x>>>16,k+=(S+=(B+=(m+=65535&M)>>>16)>>>16)>>>16,r[5]=N=65535&S|k<<16,t[5]=D=65535&m|B<<16,m=65535&(M=V),B=M>>>16,S=65535&(x=O),k=x>>>16,x=r[6],B+=(M=t[6])>>>16,S+=65535&x,k+=x>>>16,k+=(S+=(B+=(m+=65535&M)>>>16)>>>16)>>>16,r[6]=O=65535&S|k<<16,t[6]=V=65535&m|B<<16,m=65535&(M=X),B=M>>>16,S=65535&(x=C),k=x>>>16,x=r[7],B+=(M=t[7])>>>16,S+=65535&x,k+=x>>>16,k+=(S+=(B+=(m+=65535&M)>>>16)>>>16)>>>16,r[7]=C=65535&S|k<<16,t[7]=X=65535&m|B<<16,H+=128,e-=128}return e}function J(r,t,n){var e,o=new Int32Array(8),i=new Int32Array(8),h=new Uint8Array(256),a=n;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,H(o,i,t,n),n%=128,e=0;e<n;e++)h[e]=t[a-n+e];for(h[n]=128,h[(n=256-128*(n<112?1:0))-9]=0,l(h,n-8,a/536870912|0,a<<3),H(o,i,h,n),e=0;e<8;e++)l(r,8*e,o[e],i[e]);return 0}function Q(r,n){var e=t(),o=t(),i=t(),h=t(),a=t(),f=t(),u=t(),c=t(),y=t();N(e,r[1],r[0]),N(y,n[1],n[0]),O(e,e,y),P(o,r[0],r[1]),P(y,n[0],n[1]),O(o,o,y),O(i,r[3],n[3]),O(i,i,s),O(h,r[2],n[2]),P(h,h,h),N(a,o,e),N(f,h,i),P(u,h,i),P(c,o,e),O(r[0],a,f),O(r[1],c,u),O(r[2],u,f),O(r[3],a,c)}function W(r,t,n){var e;for(e=0;e<4;e++)Y(r[e],t[e],n)}function $(r,n){var e=t(),o=t(),i=t();F(i,n[2]),O(e,n[0],i),O(o,n[1],i),L(r,o),r[31]^=z(e)<<7}function rr(r,t,n){var e,o;for(k(r[0],i),k(r[1],h),k(r[2],h),k(r[3],i),o=255;o>=0;--o)W(r,t,e=n[o/8|0]>>(7&o)&1),Q(t,r),Q(r,r),W(r,t,e)}function tr(r,n){var e=[t(),t(),t(),t()];k(e[0],u),k(e[1],c),k(e[2],h),O(e[3],u,c),rr(r,e,n)}function nr(r,e,o){var i,h=new Uint8Array(64),a=[t(),t(),t(),t()];for(o||n(e,32),J(h,e,32),h[0]&=248,h[31]&=127,h[31]|=64,tr(a,h),$(r,a),i=0;i<32;i++)e[i+32]=r[i];return 0}var er=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function or(r,t){var n,e,o,i;for(e=63;e>=32;--e){for(n=0,o=e-32,i=e-12;o<i;++o)t[o]+=n-16*t[e]*er[o-(e-32)],n=Math.floor((t[o]+128)/256),t[o]-=256*n;t[o]+=n,t[e]=0}for(n=0,o=0;o<32;o++)t[o]+=n-(t[31]>>4)*er[o],n=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=n*er[o];for(e=0;e<32;e++)t[e+1]+=t[e]>>8,r[e]=255&t[e]}function ir(r){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=r[t];for(t=0;t<64;t++)r[t]=0;or(r,n)}function hr(r,n,e,o){var i,h,a=new Uint8Array(64),f=new Uint8Array(64),s=new Uint8Array(64),u=new Float64Array(64),c=[t(),t(),t(),t()];J(a,o,32),a[0]&=248,a[31]&=127,a[31]|=64;var y=e+64;for(i=0;i<e;i++)r[64+i]=n[i];for(i=0;i<32;i++)r[32+i]=a[32+i];for(J(s,r.subarray(32),e+32),ir(s),tr(c,s),$(r,c),i=32;i<64;i++)r[i]=o[i];for(J(f,r,e+64),ir(f),i=0;i<64;i++)u[i]=0;for(i=0;i<32;i++)u[i]=s[i];for(i=0;i<32;i++)for(h=0;h<32;h++)u[i+h]+=f[i]*a[h];return or(r.subarray(32),u),y}function ar(r,n,e,o){var a,s=new Uint8Array(32),u=new Uint8Array(64),c=[t(),t(),t(),t()],l=[t(),t(),t(),t()];if(e<64)return-1;if(function(r,n){var e=t(),o=t(),a=t(),s=t(),u=t(),c=t(),l=t();return k(r[2],h),R(r[1],n),C(a,r[1]),O(s,a,f),N(a,a,r[2]),P(s,r[2],s),C(u,s),C(c,u),O(l,c,u),O(e,l,a),O(e,e,s),I(e,e),O(e,e,a),O(e,e,s),O(e,e,s),O(r[0],e,s),C(o,r[0]),O(o,o,s),T(o,a)&&O(r[0],r[0],y),C(o,r[0]),O(o,o,s),T(o,a)?-1:(z(r[0])===n[31]>>7&&N(r[0],i,r[0]),O(r[3],r[0],r[1]),0)}(l,o))return-1;for(a=0;a<e;a++)r[a]=n[a];for(a=0;a<32;a++)r[a+32]=o[a];if(J(u,r,e),ir(u),rr(c,l,u),tr(l,n.subarray(32)),Q(c,l),$(s,c),e-=64,p(n,0,s,0)){for(a=0;a<e;a++)r[a]=0;return-1}for(a=0;a<e;a++)r[a]=n[a+64];return e}var fr=32,sr=24,ur=32,cr=32,yr=sr;function lr(r,t){if(r.length!==fr)throw new Error("bad key size");if(t.length!==sr)throw new Error("bad nonce size")}function wr(){for(var r=0;r<arguments.length;r++)if(!(arguments[r]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function vr(r){for(var t=0;t<r.length;t++)r[t]=0}r.lowlevel={crypto_core_hsalsa20:g,crypto_stream_xor:E,crypto_stream:d,crypto_stream_salsa20_xor:_,crypto_stream_salsa20:U,crypto_onetimeauth:M,crypto_onetimeauth_verify:m,crypto_verify_16:v,crypto_verify_32:p,crypto_secretbox:B,crypto_secretbox_open:S,crypto_scalarmult:Z,crypto_scalarmult_base:G,crypto_box_beforenm:D,crypto_box_afternm:V,crypto_box:function(r,t,n,e,o,i){var h=new Uint8Array(32);return D(h,o,i),V(r,t,n,e,h)},crypto_box_open:function(r,t,n,e,o,i){var h=new Uint8Array(32);return D(h,o,i),X(r,t,n,e,h)},crypto_box_keypair:q,crypto_hash:J,crypto_sign:hr,crypto_sign_keypair:nr,crypto_sign_open:ar,crypto_secretbox_KEYBYTES:fr,crypto_secretbox_NONCEBYTES:sr,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:ur,crypto_box_SECRETKEYBYTES:cr,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:yr,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:f,L:er,pack25519:L,unpack25519:R,M:O,A:P,S:C,Z:N,pow2523:I,add:Q,set25519:k,modL:or,scalarmult:rr,scalarbase:tr},r.randomBytes=function(r){var t=new Uint8Array(r);return n(t,r),t},r.secretbox=function(r,t,n){wr(r,t,n),lr(n,t);for(var e=new Uint8Array(32+r.length),o=new Uint8Array(e.length),i=0;i<r.length;i++)e[i+32]=r[i];return B(o,e,e.length,t,n),o.subarray(16)},r.secretbox.open=function(r,t,n){wr(r,t,n),lr(n,t);for(var e=new Uint8Array(16+r.length),o=new Uint8Array(e.length),i=0;i<r.length;i++)e[i+16]=r[i];return e.length<32?null:0!==S(o,e,e.length,t,n)?null:o.subarray(32)},r.secretbox.keyLength=fr,r.secretbox.nonceLength=sr,r.secretbox.overheadLength=16,r.scalarMult=function(r,t){if(wr(r,t),32!==r.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return Z(n,r,t),n},r.scalarMult.base=function(r){if(wr(r),32!==r.length)throw new Error("bad n size");var t=new Uint8Array(32);return G(t,r),t},r.scalarMult.scalarLength=32,r.scalarMult.groupElementLength=32,r.box=function(t,n,e,o){var i=r.box.before(e,o);return r.secretbox(t,n,i)},r.box.before=function(r,t){wr(r,t),function(r,t){if(r.length!==ur)throw new Error("bad public key size");if(t.length!==cr)throw new Error("bad secret key size")}(r,t);var n=new Uint8Array(32);return D(n,r,t),n},r.box.after=r.secretbox,r.box.open=function(t,n,e,o){var i=r.box.before(e,o);return r.secretbox.open(t,n,i)},r.box.open.after=r.secretbox.open,r.box.keyPair=function(){var r=new Uint8Array(ur),t=new Uint8Array(cr);return q(r,t),{publicKey:r,secretKey:t}},r.box.keyPair.fromSecretKey=function(r){if(wr(r),r.length!==cr)throw new Error("bad secret key size");var t=new Uint8Array(ur);return G(t,r),{publicKey:t,secretKey:new Uint8Array(r)}},r.box.publicKeyLength=ur,r.box.secretKeyLength=cr,r.box.sharedKeyLength=32,r.box.nonceLength=yr,r.box.overheadLength=r.secretbox.overheadLength,r.sign=function(r,t){if(wr(r,t),64!==t.length)throw new Error("bad secret key size");var n=new Uint8Array(64+r.length);return hr(n,r,r.length,t),n},r.sign.open=function(r,t){if(wr(r,t),32!==t.length)throw new Error("bad public key size");var n=new Uint8Array(r.length),e=ar(n,r,r.length,t);if(e<0)return null;for(var o=new Uint8Array(e),i=0;i<o.length;i++)o[i]=n[i];return o},r.sign.detached=function(t,n){for(var e=r.sign(t,n),o=new Uint8Array(64),i=0;i<o.length;i++)o[i]=e[i];return o},r.sign.detached.verify=function(r,t,n){if(wr(r,t,n),64!==t.length)throw new Error("bad signature size");if(32!==n.length)throw new Error("bad public key size");var e,o=new Uint8Array(64+r.length),i=new Uint8Array(64+r.length);for(e=0;e<64;e++)o[e]=t[e];for(e=0;e<r.length;e++)o[e+64]=r[e];return ar(i,o,o.length,n)>=0},r.sign.keyPair=function(){var r=new Uint8Array(32),t=new Uint8Array(64);return nr(r,t),{publicKey:r,secretKey:t}},r.sign.keyPair.fromSecretKey=function(r){if(wr(r),64!==r.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),n=0;n<t.length;n++)t[n]=r[32+n];return{publicKey:t,secretKey:new Uint8Array(r)}},r.sign.keyPair.fromSeed=function(r){if(wr(r),32!==r.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),n=new Uint8Array(64),e=0;e<32;e++)n[e]=r[e];return nr(t,n,!0),{publicKey:t,secretKey:n}},r.sign.publicKeyLength=32,r.sign.secretKeyLength=64,r.sign.seedLength=32,r.sign.signatureLength=64,r.hash=function(r){wr(r);var t=new Uint8Array(64);return J(t,r,r.length),t},r.hash.hashLength=64,r.verify=function(r,t){return wr(r,t),0!==r.length&&0!==t.length&&(r.length===t.length&&0===w(r,0,t,0,r.length))},r.setPRNG=function(r){n=r},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){r.setPRNG(function(r,n){var e,o=new Uint8Array(n);for(e=0;e<n;e+=65536)t.getRandomValues(o.subarray(e,e+Math.min(n-e,65536)));for(e=0;e<n;e++)r[e]=o[e];vr(o)})}else"undefined"!=typeof require&&(t=require("crypto"))&&t.randomBytes&&r.setPRNG(function(r,n){var e,o=t.randomBytes(n);for(e=0;e<n;e++)r[e]=o[e];vr(o)})}()}("undefined"!=typeof module&&module.exports?module.exports:self.nacl=self.nacl||{});
},{"crypto":"rDCW"}],"LSba":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){return a(e)||i(e,t)||n(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,y=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){y=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(y)throw o}}return u}}function a(e){if(Array.isArray(e))return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function y(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(t){var r=s(t,"string");return"symbol"==e(r)?r:r+""}function s(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}var f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionCrypto=void 0;var p=require("../utils"),b=f(require("tweetnacl")),h=function(){return y(function e(t){u(this,e),this.nonceLength=24,this.keyPair=t?this.createKeypairFromString(t):this.createKeypair(),this.sessionId=(0,p.toHexString)(this.keyPair.publicKey)},[{key:"createKeypair",value:function(){return b.default.box.keyPair()}},{key:"createKeypairFromString",value:function(e){return{publicKey:(0,p.hexToByteArray)(e.publicKey),secretKey:(0,p.hexToByteArray)(e.secretKey)}}},{key:"createNonce",value:function(){return console.log("in session crypto"),b.default.randomBytes(this.nonceLength)}},{key:"encrypt",value:function(e,t){var r=(new TextEncoder).encode(e),n=this.createNonce(),o=b.default.box(r,n,t,this.keyPair.secretKey);return(0,p.concatUint8Arrays)(n,o)}},{key:"decrypt",value:function(e,r){var n=t((0,p.splitToUint8Arrays)(e,this.nonceLength),2),o=n[0],i=n[1],a=b.default.box.open(i,o,r,this.keyPair.secretKey);if(!a)throw new Error("Decryption error: \n message: ".concat(e.toString()," \n sender pubkey: ").concat(r.toString()," \n keypair pubkey: ").concat(this.keyPair.publicKey.toString()," \n keypair secretkey: ").concat(this.keyPair.secretKey.toString()));return(new TextDecoder).decode(a)}},{key:"stringifyKeypair",value:function(){return{publicKey:(0,p.toHexString)(this.keyPair.publicKey),secretKey:(0,p.toHexString)(this.keyPair.secretKey)}}}])}();exports.SessionCrypto=h;
},{"../utils":"vn98","tweetnacl":"WYSB"}],"LvUj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionCrypto=exports.KeyPair=void 0;var e=require("./key-pair");Object.defineProperty(exports,"KeyPair",{enumerable:!0,get:function(){return e.KeyPair}});var r=require("./session-crypto");Object.defineProperty(exports,"SessionCrypto",{enumerable:!0,get:function(){return r.SessionCrypto}});
},{"./key-pair":"uqSh","./session-crypto":"LSba"}],"I0lp":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./models"),exports),t(require("./crypto"),exports),t(require("./utils"),exports);
},{"./models":"n3oa","./crypto":"LvUj","./utils":"vn98"}],"nccz":[function(require,module,exports) {
"use strict";function e(e){return!("connectEvent"in e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPendingConnectionHttp=e;
},{}],"IFT9":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return n};var r,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(r){h=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),u=new R(n||[]);return a(i,"_invoke",{value:I(t,r,u)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=l;var v="suspendedStart",y="suspendedYield",d="executing",g="completed",m={};function w(){}function b(){}function x(){}var k={};h(k,c,function(){return this});var E=Object.getPrototypeOf,L=E&&E(E(N([])));L&&L!==o&&i.call(L,c)&&(k=L);var _=x.prototype=w.prototype=Object.create(k);function O(t){["next","throw","return"].forEach(function(e){h(t,e,function(t){return this._invoke(e,t)})})}function j(e,r){function n(o,a,u,c){var s=p(e[o],e,a);if("throw"!==s.type){var f=s.arg,h=f.value;return h&&"object"==t(h)&&i.call(h,"__await")?r.resolve(h.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(h).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r(function(r,o){n(t,e,r,o)})}return o=o?o.then(i,i):i()}})}function I(t,e,n){var o=v;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=S(u,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=p(t,e,n);if("normal"===s.type){if(o=n.done?g:y,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function S(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(i.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return b.prototype=x,a(_,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=h(x,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,f,"GeneratorFunction")),t.prototype=Object.create(_),t},n.awrap=function(t){return{__await:t}},O(j.prototype),h(j.prototype,s,function(){return this}),n.AsyncIterator=j,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new j(l(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},O(_),h(_,f,"Generator"),h(_,c,function(){return this}),h(_,"toString",function(){return"[object Generator]"}),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=N,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return u.type="throw",u.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),m}},n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e){var r=a(e,"string");return"symbol"==t(r)?r:r+""}function a(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var u=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(e){i(e)}}function u(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BridgeConnectionStorage=void 0;var c=require("../errors"),s=function(){return o(function t(e){r(this,t),this.storage=e,this.storeKey="okx-ton-connect-storage_bridge-connection"},[{key:"storeConnection",value:function(t){return u(this,void 0,void 0,e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.setItem(this.storeKey,JSON.stringify(t)));case 1:case"end":return e.stop()}},r,this)}))}},{key:"removeConnection",value:function(){return u(this,void 0,void 0,e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.storage.removeItem(this.storeKey));case 1:case"end":return t.stop()}},t,this)}))}},{key:"getConnection",value:function(){return u(this,void 0,void 0,e().mark(function t(){var r,n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.getItem(this.storeKey);case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return n=JSON.parse(r),t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}))}},{key:"getHttpConnection",value:function(){return u(this,void 0,void 0,e().mark(function t(){var r;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getConnection();case 2:if(r=t.sent){t.next=5;break}throw new c.TonConnectError("Trying to read HTTP connection source while nothing is stored");case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)}))}},{key:"storeLastWalletEventId",value:function(t){return u(this,void 0,void 0,e().mark(function r(){var n;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getConnection();case 2:if(!((n=e.sent)&&"connectEvent"in n)){e.next=6;break}return n.lastWalletEventId=t,e.abrupt("return",this.storeConnection(n));case 6:case"end":return e.stop()}},r,this)}))}},{key:"getLastWalletEventId",value:function(){return u(this,void 0,void 0,e().mark(function t(){var r;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getConnection();case 2:if(!((r=t.sent)&&"lastWalletEventId"in r)){t.next=5;break}return t.abrupt("return",r.lastWalletEventId);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}},t,this)}))}},{key:"increaseNextRpcRequestId",value:function(){return u(this,void 0,void 0,e().mark(function t(){var r,n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getConnection();case 2:if(!((r=t.sent)&&"nextRpcRequestId"in r)){t.next=7;break}return n=r.nextRpcRequestId||0,r.nextRpcRequestId=n+1,t.abrupt("return",this.storeConnection(r));case 7:case"end":return t.stop()}},t,this)}))}},{key:"getNextRpcRequestId",value:function(){return u(this,void 0,void 0,e().mark(function t(){var r;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getConnection();case 2:if(!((r=t.sent)&&"nextRpcRequestId"in r)){t.next=5;break}return t.abrupt("return",r.nextRpcRequestId||0);case 5:return t.abrupt("return",0);case 6:case"end":return t.stop()}},t,this)}))}}])}();exports.BridgeConnectionStorage=s;
},{"../errors":"bdNY"}],"vYZ0":[function(require,module,exports) {
"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(t)}function t(){if(void 0!==o("console"))try{for(var t,r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];(t=console).debug.apply(t,["[TON_CONNECT_SDK]"].concat(n))}catch(c){}}function r(){if(void 0!==o("console"))try{for(var t,r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];(t=console).error.apply(t,["[TON_CONNECT_SDK]"].concat(n))}catch(c){}}function n(){if(void 0!==o("console"))try{for(var t,r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];(t=console).warn.apply(t,["[TON_CONNECT_SDK]"].concat(n))}catch(c){}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.logDebug=t,exports.logError=r,exports.logWarning=n;
},{}],"Eamx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectorState=exports.CONNECT_METHOD_UNSUB=exports.CONNECT_METHOD_SUB=exports.CONNECT_METHOD_PUBLISH=exports.CONNECT_METHOD_LOGIN=exports.CONNECT_METHOD_PUSH=exports.CONNECT_JSONRPC_VER=exports.OKXCONNECTOR_MESSAGE_TTL=exports.OKXCONNECTOR_JWT_TTL=exports.OKXCONNECTOR_TOKEN_CACHE=exports.OKXCONNECTOR_CRYPTO_KEY=exports.OKXCONNECTOR_CACHE_KEY=exports.OKXCONNECTOR_JWT_SIDE=exports.OKXCONNECTOR_WS_URL=exports.EVENT_EMITTER_MAX_LISTENERS=void 0,exports.EVENT_EMITTER_MAX_LISTENERS=10,exports.OKXCONNECTOR_WS_URL="wss://echo.websocket.org/",exports.OKXCONNECTOR_JWT_SIDE="wallet",exports.OKXCONNECTOR_CACHE_KEY="test_key",exports.OKXCONNECTOR_CRYPTO_KEY="test_crypto_key",exports.OKXCONNECTOR_TOKEN_CACHE="test_token",exports.OKXCONNECTOR_JWT_TTL=86400,exports.OKXCONNECTOR_MESSAGE_TTL=300,exports.CONNECT_JSONRPC_VER="2.0",exports.CONNECT_METHOD_PUSH="push",exports.CONNECT_METHOD_LOGIN="login",exports.CONNECT_METHOD_PUBLISH="publish",exports.CONNECT_METHOD_SUB="subscribe",exports.CONNECT_METHOD_UNSUB="unsubscribe",exports.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3};
},{}],"vbaN":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.safeJsonParse=o,exports.safeJsonStringify=e;var n=function(t){return JSON.stringify(t,function(t,n){return"bigint"==typeof n?n.toString()+"n":n})},r=function(t){var n=t.replace(/(?<!")(?<=:)\b(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,function(t){return'"'.concat(t,'n"')});return JSON.parse(n,function(t,n){return"string"==typeof n&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n})};function o(n){if("string"!=typeof n)throw console.log(n),new Error("Cannot safe json parse value of type ".concat(t(n)));try{return r(n)}catch(o){return console.error("safeJsonParse error:",o),n}}function e(t){return"string"==typeof t?t:n(t)||""}
},{}],"zc77":[function(require,module,exports) {
"use strict";function r(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var a=r.charAt(o),f=a.charCodeAt(0);if(255!==t[f])throw new TypeError(a+" is ambiguous");t[f]=o}var i=r.length,h=r.charAt(0),y=Math.log(i)/Math.log(256),c=Math.log(256)/Math.log(i);function w(r){if("string"!=typeof r)throw new TypeError("Expected String");if(0===r.length)return new Uint8Array;var e=0;if(" "!==r[e]){for(var n=0,o=0;r[e]===h;)n++,e++;for(var a=(r.length-e)*y+1>>>0,f=new Uint8Array(a);r[e];){var c=t[r.charCodeAt(e)];if(255===c)return;for(var w=0,A=a-1;(0!==c||w<o)&&-1!==A;A--,w++)c+=i*f[A]>>>0,f[A]=c%256>>>0,c=c/256>>>0;if(0!==c)throw new Error("Non-zero carry");o=w,e++}if(" "!==r[e]){for(var v=a-o;v!==a&&0===f[v];)v++;for(var g=new Uint8Array(n+(a-v)),u=n;v!==a;)g[u++]=f[v++];return g}}}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var t=0,n=0,o=0,a=e.length;o!==a&&0===e[o];)o++,t++;for(var f=(a-o)*c+1>>>0,y=new Uint8Array(f);o!==a;){for(var w=e[o],A=0,v=f-1;(0!==w||A<n)&&-1!==v;v--,A++)w+=256*y[v]>>>0,y[v]=w%i>>>0,w=w/i>>>0;if(0!==w)throw new Error("Non-zero carry");n=A,o++}for(var g=f-n;g!==f&&0===y[g];)g++;for(var u=h.repeat(t);g<f;++g)u+=r.charAt(y[g]);return u},decodeUnsafe:w,decode:function(r){var t=w(r);if(t)return t;throw new Error(`Non-${e} character`)}}}var e=r,t=e;module.exports=t;
},{}],"iH3Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=new Uint8Array(0),r=e=>e.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),t=r=>{const t=r.match(/../g);return t?new Uint8Array(t.map(e=>parseInt(e,16))):e},n=(e,r)=>{if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0},o=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},i=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),f=e=>(new TextEncoder).encode(e),s=e=>(new TextDecoder).decode(e);exports.coerce=o,exports.empty=e,exports.equals=n,exports.fromHex=t,exports.fromString=f,exports.isBinary=i,exports.toHex=r,exports.toString=s;
},{}],"lHra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../vendor/base-x.js"),r=require("../bytes.js");class t{constructor(e,r,t){this.name=e,this.prefix=r,this.baseEncode=t}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class o{constructor(e,r,t){if(this.name=e,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=t}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return s(this,e)}}class n{constructor(e){this.decoders=e}or(e){return s(this,e)}decode(e){const r=e[0],t=this.decoders[r];if(t)return t.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const s=(e,r)=>new n({...e.decoders||{[e.prefix]:e},...r.decoders||{[r.prefix]:r}});class i{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new t(e,r,n),this.decoder=new o(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const d=({name:e,prefix:r,encode:t,decode:o})=>new i(e,r,t,o),c=({prefix:t,name:o,alphabet:n})=>{const{encode:s,decode:i}=e(n,o);return d({prefix:t,name:o,encode:s,decode:e=>r.coerce(i(e))})},a=(e,r,t,o)=>{const n={};for(let h=0;h<r.length;++h)n[r[h]]=h;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*t/8|0);let d=0,c=0,a=0;for(let h=0;h<s;++h){const r=n[e[h]];if(void 0===r)throw new SyntaxError(`Non-${o} character`);c=c<<t|r,(d+=t)>=8&&(d-=8,i[a++]=255&c>>d)}if(d>=t||255&c<<8-d)throw new SyntaxError("Unexpected end of data");return i},h=(e,r,t)=>{const o="="===r[r.length-1],n=(1<<t)-1;let s="",i=0,d=0;for(let c=0;c<e.length;++c)for(d=d<<8|e[c],i+=8;i>t;)s+=r[n&d>>(i-=t)];if(i&&(s+=r[n&d<<t-i]),o)for(;s.length*t&7;)s+="=";return s},f=({name:e,prefix:r,bitsPerChar:t,alphabet:o})=>d({prefix:r,name:e,encode:e=>h(e,o,t),decode:r=>a(r,o,t,e)});exports.Codec=i,exports.baseX=c,exports.from=d,exports.or=s,exports.rfc4648=f;
},{"../../vendor/base-x.js":"zc77","../bytes.js":"iH3Z"}],"knh3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js"),r=require("../bytes.js");const t=e.from({prefix:"\0",name:"identity",encode:e=>r.toString(e),decode:e=>r.fromString(e)});exports.identity=t;
},{"./base.js":"lHra","../bytes.js":"iH3Z"}],"ZNNI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js");const r=e.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});exports.base2=r;
},{"./base.js":"lHra"}],"p9zJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js");const r=e.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});exports.base8=r;
},{"./base.js":"lHra"}],"Q1bi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js");const s=e.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});exports.base10=s;
},{"./base.js":"lHra"}],"FNQE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js");const r=e.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),a=e.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});exports.base16=r,exports.base16upper=a;
},{"./base.js":"lHra"}],"Agcm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js");const a=e.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),r=e.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),p=e.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),s=e.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),b=e.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),t=e.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),h=e.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),x=e.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),i=e.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});exports.base32=a,exports.base32hex=b,exports.base32hexpad=h,exports.base32hexpadupper=x,exports.base32hexupper=t,exports.base32pad=p,exports.base32padupper=s,exports.base32upper=r,exports.base32z=i;
},{"./base.js":"lHra"}],"zEGQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js");const a=e.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),s=e.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});exports.base36=a,exports.base36upper=s;
},{"./base.js":"lHra"}],"TUSv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js");const a=e.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s=e.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});exports.base58btc=a,exports.base58flickr=s;
},{"./base.js":"lHra"}],"Ep8g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js");const a=e.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),r=e.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),s=e.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),b=e.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});exports.base64=a,exports.base64pad=r,exports.base64url=s,exports.base64urlpad=b;
},{"./base.js":"lHra"}],"lFk2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base.js");const r=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),o=r.reduce((e,r,o)=>(e[o]=r,e),[]),t=r.reduce((e,r,o)=>(e[r.codePointAt(0)]=o,e),[]);function n(e){return e.reduce((e,r)=>e+=o[r],"")}function c(e){const r=[];for(const o of e){const e=t[o.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${o}`);r.push(e)}return new Uint8Array(r)}const s=e.from({prefix:"🚀",name:"base256emoji",encode:n,decode:c});exports.base256emoji=s;
},{"./base.js":"lHra"}],"pVI1":[function(require,module,exports) {
"use strict";var t=n,o=128,e=127,r=~e,a=Math.pow(2,31);function n(t,e,h){e=e||[];for(var w=h=h||0;t>=a;)e[h++]=255&t|o,t/=128;for(;t&r;)e[h++]=255&t|o,t>>>=7;return e[h]=0|t,n.bytes=h-w+1,e}var h=M,w=128,p=127;function M(t,o){var e,r=0,a=0,n=o=o||0,h=t.length;do{if(n>=h)throw M.bytes=0,new RangeError("Could not decode varint");e=t[n++],r+=a<28?(e&p)<<a:(e&p)*Math.pow(2,a),a+=7}while(e>=w);return M.bytes=n-o,r}var d=Math.pow(2,7),u=Math.pow(2,14),c=Math.pow(2,21),i=Math.pow(2,28),f=Math.pow(2,35),s=Math.pow(2,42),v=Math.pow(2,49),g=Math.pow(2,56),l=Math.pow(2,63),b=function(t){return t<d?1:t<u?2:t<c?3:t<i?4:t<f?5:t<s?6:t<v?7:t<g?8:t<l?9:10},y={encode:t,decode:h,encodingLength:b},m=y,x=m;module.exports=x;
},{}],"hjwR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../vendor/varint.js");const o=(o,r=0)=>{return[e.decode(o,r),e.decode.bytes]},r=(o,r,t=0)=>(e.encode(o,r,t),r),t=o=>e.encodingLength(o);exports.decode=o,exports.encodeTo=r,exports.encodingLength=t;
},{"../vendor/varint.js":"pVI1"}],"gB1G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../bytes.js"),t=require("../varint.js");const r=(e,r)=>{const s=r.byteLength,o=t.encodingLength(e),c=o+t.encodingLength(s),i=new Uint8Array(c+s);return t.encodeTo(e,i,0),t.encodeTo(s,i,o),i.set(r,c),new n(e,s,r,i)},s=r=>{const s=e.coerce(r),[o,c]=t.decode(s),[i,d]=t.decode(s.subarray(c)),a=s.subarray(c+d);if(a.byteLength!==i)throw new Error("Incorrect length");return new n(o,i,a,s)},o=(t,r)=>t===r||t.code===r.code&&t.size===r.size&&e.equals(t.bytes,r.bytes);class n{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}exports.Digest=n,exports.create=r,exports.decode=s,exports.equals=o;
},{"../bytes.js":"iH3Z","../varint.js":"hjwR"}],"aZtf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./digest.js");const t=({name:e,code:t,encode:s})=>new r(e,t,s);class r{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?e.create(this.code,r):r.then(t=>e.create(this.code,t))}throw Error("Unknown type, must be binary type")}}exports.Hasher=r,exports.from=t;
},{"./digest.js":"gB1G"}],"lDFl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./hasher.js");const s=e=>async s=>new Uint8Array(await crypto.subtle.digest(e,s)),r=e.from({name:"sha2-256",code:18,encode:s("SHA-256")}),a=e.from({name:"sha2-512",code:19,encode:s("SHA-512")});exports.sha256=r,exports.sha512=a;
},{"./hasher.js":"aZtf"}],"jws2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../bytes.js"),t=require("./digest.js");const r=0,s="identity",i=e.coerce,c=e=>t.create(0,i(e)),d={code:0,name:s,encode:i,digest:c};exports.identity=d;
},{"../bytes.js":"iH3Z","./digest.js":"gB1G"}],"vxHE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../bytes.js");const r="raw",o=85,s=r=>e.coerce(r),t=r=>e.coerce(r);exports.code=85,exports.decode=t,exports.encode=s,exports.name=r;
},{"../bytes.js":"iH3Z"}],"sFA0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=new TextEncoder,o=new TextDecoder,t="json",r=512,s=o=>e.encode(JSON.stringify(o)),d=e=>JSON.parse(o.decode(e));exports.code=512,exports.decode=d,exports.encode=s,exports.name=t;
},{}],"aOFj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./varint.js"),t=require("./hashes/digest.js"),r=require("./bases/base58.js"),s=require("./bases/base32.js"),n=require("./bytes.js");class o{constructor(e,t,r,s){this.code=t,this.version=e,this.multihash=r,this.bytes=s,this.byteOffset=s.byteOffset,this.byteLength=s.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:f,byteLength:f,code:l,version:l,multihash:l,bytes:l,_baseCache:f,asCID:f})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==h)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==d)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return o.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,s=t.create(e,r);return o.createV1(this.code,s)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&t.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:n,_baseCache:o}=this;switch(n){case 0:return c(t,o,e||r.base58btc.encoder);default:return a(t,o,e||s.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return p(/^0\.0/,w),!(!e||!e[b]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof o)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:s,bytes:n}=e;return new o(t,r,s,n||u(t,r,s.bytes))}if(null!=e&&!0===e[b]){const{version:r,multihash:s,code:n}=e,i=t.decode(s);return o.create(r,n,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==h)throw new Error(`Version 0 CID must use dag-pb (code: ${h}) block encoding`);return new o(e,t,r,r.bytes);case 1:{const s=u(e,t,r.bytes);return new o(e,t,r,s)}default:throw new Error("Invalid version")}}static createV0(e){return o.create(0,h,e)}static createV1(e,t){return o.create(1,e,t)}static decode(e){const[t,r]=o.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const r=o.inspectBytes(e),s=r.size-r.multihashSize,i=n.coerce(e.subarray(s,s+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const c=i.subarray(r.multihashSize-r.digestSize),a=new t.Digest(r.multihashCode,r.digestSize,c,i);return[0===r.version?o.createV0(a):o.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(t){let r=0;const s=()=>{const[s,n]=e.decode(t.subarray(r));return r+=n,s};let n=s(),o=h;if(18===n?(n=0,r=0):1===n&&(o=s()),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const i=r,c=s(),a=s(),d=r+a;return{version:n,codec:o,multihashCode:c,digestSize:a,multihashSize:d-i,size:d}}static parse(e,t){const[r,s]=i(e,t),n=o.decode(s);return n._baseCache.set(r,e),n}}const i=(e,t)=>{switch(e[0]){case"Q":{const s=t||r.base58btc;return[r.base58btc.prefix,s.decode(`${r.base58btc.prefix}${e}`)]}case r.base58btc.prefix:{const s=t||r.base58btc;return[r.base58btc.prefix,s.decode(e)]}case s.base32.prefix:{const r=t||s.base32;return[s.base32.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},c=(e,t,s)=>{const{prefix:n}=s;if(n!==r.base58btc.prefix)throw Error(`Cannot string encode V0 in ${s.name} encoding`);const o=t.get(n);if(null==o){const r=s.encode(e).slice(1);return t.set(n,r),r}return o},a=(e,t,r)=>{const{prefix:s}=r,n=t.get(s);if(null==n){const n=r.encode(e);return t.set(s,n),n}return n},h=112,d=18,u=(t,r,s)=>{const n=e.encodingLength(t),o=n+e.encodingLength(r),i=new Uint8Array(o+s.byteLength);return e.encodeTo(t,i,0),e.encodeTo(r,i,n),i.set(s,o),i},b=Symbol.for("@ipld/js-cid/CID"),l={writable:!1,configurable:!1,enumerable:!0},f={writable:!1,enumerable:!1,configurable:!1},g="0.0.0-dev",p=(e,t)=>{if(!e.test(g))throw new Error(t);console.warn(t)},w="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n";exports.CID=o;
},{"./varint.js":"hjwR","./hashes/digest.js":"gB1G","./bases/base58.js":"TUSv","./bases/base32.js":"Agcm","./bytes.js":"iH3Z"}],"AXxB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./cid.js"),r=require("./varint.js"),s=require("./bytes.js"),t=require("./hashes/hasher.js"),i=require("./hashes/digest.js");exports.CID=e.CID,exports.varint=r,exports.bytes=s,exports.hasher=t,exports.digest=i;
},{"./cid.js":"aOFj","./varint.js":"hjwR","./bytes.js":"iH3Z","./hashes/hasher.js":"aZtf","./hashes/digest.js":"gB1G"}],"Hp5a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./bases/identity.js"),s=require("./bases/base2.js"),r=require("./bases/base8.js"),a=require("./bases/base10.js"),i=require("./bases/base16.js"),j=require("./bases/base32.js"),t=require("./bases/base36.js"),b=require("./bases/base58.js"),u=require("./bases/base64.js"),q=require("./bases/base256emoji.js"),o=require("./hashes/sha2.js"),h=require("./hashes/identity.js"),d=require("./codecs/raw.js"),c=require("./codecs/json.js");require("./index.js");var p=require("./cid.js"),x=require("./hashes/hasher.js"),n=require("./hashes/digest.js"),v=require("./varint.js"),y=require("./bytes.js");const g={...e,...s,...r,...a,...i,...j,...t,...b,...u,...q},l={...o,...h},w={raw:d,json:c};exports.CID=p.CID,exports.hasher=x,exports.digest=n,exports.varint=v,exports.bytes=y,exports.bases=g,exports.codecs=w,exports.hashes=l;
},{"./bases/identity.js":"knh3","./bases/base2.js":"ZNNI","./bases/base8.js":"p9zJ","./bases/base10.js":"Q1bi","./bases/base16.js":"FNQE","./bases/base32.js":"Agcm","./bases/base36.js":"zEGQ","./bases/base58.js":"TUSv","./bases/base64.js":"Ep8g","./bases/base256emoji.js":"lFk2","./hashes/sha2.js":"lDFl","./hashes/identity.js":"jws2","./codecs/raw.js":"vxHE","./codecs/json.js":"sFA0","./index.js":"AXxB","./cid.js":"aOFj","./hashes/hasher.js":"aZtf","./hashes/digest.js":"gB1G","./varint.js":"hjwR","./bytes.js":"iH3Z"}],"dn3L":[function(require,module,exports) {
"use strict";function l(l=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.alloc?globalThis.Buffer.alloc(l):new Uint8Array(l)}function e(l=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(l):new Uint8Array(l)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.alloc=l,exports.allocUnsafe=e;
},{}],"CpuH":[function(require,module,exports) {
"use strict";var e=require("multiformats/basics"),r=require("../alloc.js");function t(e,r,t,n){return{name:e,prefix:r,encoder:{name:e,prefix:r,encode:t},decoder:{decode:n}}}const n=t("utf8","u",e=>{return"u"+new TextDecoder("utf8").decode(e)},e=>{return(new TextEncoder).encode(e.substring(1))}),o=t("ascii","a",e=>{let r="a";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},e=>{e=e.substring(1);const t=r.allocUnsafe(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),s={utf8:n,"utf-8":n,hex:e.bases.base16,latin1:o,ascii:o,binary:o,...e.bases};module.exports=s;
},{"multiformats/basics":"Hp5a","../alloc.js":"dn3L"}],"yPb1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util/bases.js");function r(r,o="utf8"){const f=e[o];if(!f)throw new Error(`Unsupported encoding "${o}"`);return"utf8"!==o&&"utf-8"!==o||null==globalThis.Buffer||null==globalThis.Buffer.from?f.decoder.decode(`${f.prefix}${r}`):globalThis.Buffer.from(r,"utf8")}exports.fromString=r;
},{"./util/bases.js":"CpuH"}],"XOd3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util/bases.js");function r(r,t="utf8"){const f=e[t];if(!f)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?f.encoder.encode(r).substring(1):globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8")}exports.toString=r;
},{"./util/bases.js":"CpuH"}],"x55g":[function(require,module,exports) {
"use strict";function e(e,r){var t=65535&e,n=65535&r;return t*n+((e>>>16&65535)*n+t*(r>>>16&65535)<<16>>>0)|0}function r(e,r){return e+r|0}function t(e,r){return e-r|0}function n(e,r){return e<<r|e>>>32-r}function o(e,r){return e<<32-r|e>>>r}function u(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mul=Math.imul||e,exports.add=r,exports.sub=t,exports.rotl=n,exports.rotr=o,exports.isInteger=Number.isInteger||u,exports.MAX_SAFE_INTEGER=9007199254740991,exports.isSafeInteger=function(e){return exports.isInteger(e)&&e>=-exports.MAX_SAFE_INTEGER&&e<=exports.MAX_SAFE_INTEGER};
},{}],"ZWhr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@stablelib/int");function r(t,r){return void 0===r&&(r=0),(t[r+0]<<8|t[r+1])<<16>>16}function e(t,r){return void 0===r&&(r=0),(t[r+0]<<8|t[r+1])>>>0}function n(t,r){return void 0===r&&(r=0),(t[r+1]<<8|t[r])<<16>>16}function i(t,r){return void 0===r&&(r=0),(t[r+1]<<8|t[r])>>>0}function o(t,r,e){return void 0===r&&(r=new Uint8Array(2)),void 0===e&&(e=0),r[e+0]=t>>>8,r[e+1]=t>>>0,r}function a(t,r,e){return void 0===r&&(r=new Uint8Array(2)),void 0===e&&(e=0),r[e+0]=t>>>0,r[e+1]=t>>>8,r}function u(t,r){return void 0===r&&(r=0),t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]}function f(t,r){return void 0===r&&(r=0),(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])>>>0}function s(t,r){return void 0===r&&(r=0),t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]}function d(t,r){return void 0===r&&(r=0),(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r])>>>0}function w(t,r,e){return void 0===r&&(r=new Uint8Array(4)),void 0===e&&(e=0),r[e+0]=t>>>24,r[e+1]=t>>>16,r[e+2]=t>>>8,r[e+3]=t>>>0,r}function v(t,r,e){return void 0===r&&(r=new Uint8Array(4)),void 0===e&&(e=0),r[e+0]=t>>>0,r[e+1]=t>>>8,r[e+2]=t>>>16,r[e+3]=t>>>24,r}function E(t,r){void 0===r&&(r=0);var e=u(t,r),n=u(t,r+4);return 4294967296*e+n-4294967296*(n>>31)}function p(t,r){return void 0===r&&(r=0),4294967296*f(t,r)+f(t,r+4)}function b(t,r){void 0===r&&(r=0);var e=s(t,r);return 4294967296*s(t,r+4)+e-4294967296*(e>>31)}function y(t,r){void 0===r&&(r=0);var e=d(t,r);return 4294967296*d(t,r+4)+e}function x(t,r,e){return void 0===r&&(r=new Uint8Array(8)),void 0===e&&(e=0),w(t/4294967296>>>0,r,e),w(t>>>0,r,e+4),r}function L(t,r,e){return void 0===r&&(r=new Uint8Array(8)),void 0===e&&(e=0),v(t>>>0,r,e),v(t/4294967296>>>0,r,e+4),r}function U(t,r,e){if(void 0===e&&(e=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>r.length-e)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=t/8+e-1;o>=e;o--)n+=r[o]*i,i*=256;return n}function c(t,r,e){if(void 0===e&&(e=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>r.length-e)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=e;o<e+t/8;o++)n+=r[o]*i,i*=256;return n}function l(r,e,n,i){if(void 0===n&&(n=new Uint8Array(r/8)),void 0===i&&(i=0),r%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!t.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,a=r/8+i-1;a>=i;a--)n[a]=e/o&255,o*=256;return n}function h(r,e,n,i){if(void 0===n&&(n=new Uint8Array(r/8)),void 0===i&&(i=0),r%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!t.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,a=i;a<i+r/8;a++)n[a]=e/o&255,o*=256;return n}function g(t,r){return void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(r)}function B(t,r){return void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(r,!0)}function F(t,r){return void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(r)}function I(t,r){return void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(r,!0)}function A(t,r,e){return void 0===r&&(r=new Uint8Array(4)),void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).setFloat32(e,t),r}function O(t,r,e){return void 0===r&&(r=new Uint8Array(4)),void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).setFloat32(e,t,!0),r}function D(t,r,e){return void 0===r&&(r=new Uint8Array(8)),void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).setFloat64(e,t),r}function V(t,r,e){return void 0===r&&(r=new Uint8Array(8)),void 0===e&&(e=0),new DataView(r.buffer,r.byteOffset,r.byteLength).setFloat64(e,t,!0),r}exports.readInt16BE=r,exports.readUint16BE=e,exports.readInt16LE=n,exports.readUint16LE=i,exports.writeUint16BE=o,exports.writeInt16BE=o,exports.writeUint16LE=a,exports.writeInt16LE=a,exports.readInt32BE=u,exports.readUint32BE=f,exports.readInt32LE=s,exports.readUint32LE=d,exports.writeUint32BE=w,exports.writeInt32BE=w,exports.writeUint32LE=v,exports.writeInt32LE=v,exports.readInt64BE=E,exports.readUint64BE=p,exports.readInt64LE=b,exports.readUint64LE=y,exports.writeUint64BE=x,exports.writeInt64BE=x,exports.writeUint64LE=L,exports.writeInt64LE=L,exports.readUintBE=U,exports.readUintLE=c,exports.writeUintBE=l,exports.writeUintLE=h,exports.readFloat32BE=g,exports.readFloat32LE=B,exports.readFloat64BE=F,exports.readFloat64LE=I,exports.writeFloat32BE=A,exports.writeFloat32LE=O,exports.writeFloat64BE=D,exports.writeFloat64LE=V;
},{"@stablelib/int":"x55g"}],"NSK0":[function(require,module,exports) {
"use strict";function e(e){for(var r=0;r<e.length;r++)e[r]=0;return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.wipe=e;
},{}],"nIPj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@stablelib/binary"),e=require("@stablelib/wipe");exports.DIGEST_LENGTH=32,exports.BLOCK_SIZE=64;var i=function(){function i(){this.digestLength=exports.DIGEST_LENGTH,this.blockSize=exports.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return i.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},i.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},i.prototype.clean=function(){e.wipe(this._buffer),e.wipe(this._temp),this.reset()},i.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=e,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&e>0;)this._buffer[this._bufferLength++]=t[i++],e--;this._bufferLength===this.blockSize&&(r(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(e>=this.blockSize&&(i=r(this._temp,this._state,t,i,e),e%=this.blockSize);e>0;)this._buffer[this._bufferLength++]=t[i++],e--;return this},i.prototype.finish=function(e){if(!this._finished){var i=this._bytesHashed,s=this._bufferLength,h=i/536870912|0,f=i<<3,n=i%64<56?64:128;this._buffer[s]=128;for(var a=s+1;a<n-8;a++)this._buffer[a]=0;t.writeUint32BE(h,this._buffer,n-8),t.writeUint32BE(f,this._buffer,n-4),r(this._temp,this._state,this._buffer,0,n),this._finished=!0}for(a=0;a<this.digestLength/4;a++)t.writeUint32BE(this._state[a],e,4*a);return this},i.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},i.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},i.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},i.prototype.cleanSavedState=function(t){e.wipe(t.state),t.buffer&&e.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},i}();exports.SHA256=i;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(e,i,r,h,f){for(;f>=64;){for(var n=i[0],a=i[1],_=i[2],u=i[3],o=i[4],b=i[5],p=i[6],d=i[7],c=0;c<16;c++){var y=h+4*c;e[c]=t.readUint32BE(r,y)}for(c=16;c<64;c++){var g=e[c-2],L=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10,w=((g=e[c-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;e[c]=(L+e[c-7]|0)+(w+e[c-16]|0)}for(c=0;c<64;c++){L=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&b^~o&p)|0)+(d+(s[c]+e[c]|0)|0)|0,w=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&a^n&_^a&_)|0;d=p,p=b,b=o,o=u+L|0,u=_,_=a,a=n,n=L+w|0}i[0]+=n,i[1]+=a,i[2]+=_,i[3]+=u,i[4]+=o,i[5]+=b,i[6]+=p,i[7]+=d,h+=64,f-=64}return h}function h(t){var e=new i;e.update(t);var s=e.digest();return e.clean(),s}exports.hash=h;
},{"@stablelib/binary":"ZWhr","@stablelib/wipe":"NSK0"}],"yh9p":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"JgNJ":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"wvRa":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"peL6":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"yh9p","ieee754":"JgNJ","isarray":"wvRa","buffer":"peL6"}],"HWoi":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(t){var r='{ "protocolVer":1, "channelId":"'.concat(t.channelId,'", "clientId":"').concat(t.clientId,'", "dAppInfo":{ "url":"url", "name":"testApp", "iconUrl":"url" }, "requestId":"').concat(t.requestId,'", "requests":[ { "name":"ton_addr" }, { "name":"ton_proof", "payload":"').concat(t.testPayload,'"}], "redirect":"').concat(t.redirect,'" }'),n=e.from(r).toString("base64");return"https://www.okx.com/download?deeplink=okx%3A%2F%2Fweb3%2Fwallet%2Fconnect%3Fparam%3D".concat(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateOKXLink=t;
},{"buffer":"peL6"}],"yone":[function(require,module,exports) {
"use strict";module.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")};
},{}],"RiUx":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.RANDOM_LENGTH=void 0,exports.base64decode=w,exports.base64encode=v,exports.checkWSUrl=S,exports.concatUint8Arrays=f,exports.generateDeepLink=A,exports.generateRandomBytes32=m,exports.generateTopic=U,exports.hasLocalStorage=exports.hasBuiltInWebSocket=void 0,exports.hashKey=L,exports.hexToByteArray=u,exports.resolveWebSocketImplementation=exports.resolveLocalStorage=exports.isBrowser=void 0,exports.splitToUint8Arrays=l,exports.toHexString=d;var t=c(require("tweetnacl")),o=require("uint8arrays/from-string"),r=require("uint8arrays/to-string"),n=require("@stablelib/sha256"),i=require("./misc/safejson.ts"),a=require("./deeplink.ts");function c(e){return e&&e.__esModule?e:{default:e}}var s="base16";function u(e){if(e.length%2!=0)throw new Error("Cannot convert ".concat(e," to bytesArray"));for(var t=new Uint8Array(e.length/2),o=0;o<e.length;o+=2)t[o/2]=parseInt(e.slice(o,o+2),16);return t}function d(e){var t="";return e.forEach(function(e){t+=("0"+(255&e).toString(16)).slice(-2)}),t}function f(e,t){var o=new Uint8Array(e.length+t.length);return o.set(e),o.set(t,e.length),o}function l(e,t){if(t>=e.length)throw new Error("Index is out of buffer");return[e.slice(0,t),e.slice(t)]}function p(e,o){var r=t.default.encodeBase64(e);return o?encodeURIComponent(r):r}function g(e,o){return o&&(e=decodeURIComponent(e)),t.default.decodeBase64(e)}function v(e,o){var r;return e instanceof Uint8Array?r=e:("string"!=typeof e&&(e=(0,i.safeJsonStringify)(e)),r=t.default.decodeUTF8(e)),p(r,o)}function w(e,o){var r=g(e,o);return{toString:function(){return t.default.encodeUTF8(r)},toObject:function(){try{return(0,i.safeJsonParse)(t.default.encodeUTF8(r))}catch(e){return null}},toUint8Array:function(){return r}}}function S(e){var t=e.match(new RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;var o=t[0];return new RegExp("^wss?:").test(o)}var y=exports.resolveWebSocketImplementation=function(){return"undefined"!=typeof WebSocket?WebSocket:void 0!==e&&void 0!==e.WebSocket?e.WebSocket:"undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:"undefined"!=typeof self&&void 0!==self.WebSocket?self.WebSocket:require("ws")},x=exports.hasBuiltInWebSocket=function(){return"undefined"!=typeof WebSocket||void 0!==e&&void 0!==e.WebSocket||"undefined"!=typeof window&&void 0!==window.WebSocket||"undefined"!=typeof self&&void 0!==self.WebSocket},b=exports.hasLocalStorage=function(){return void 0!==e&&void 0!==e.LocalStorage||"undefined"!=typeof window&&void 0!==window.LocalStorage},h=exports.resolveLocalStorage=function(){return void 0!==e&&void 0!==e.LocalStorage?e.LocalStorage:"undefined"!=typeof window&&void 0!==window.LocalStorage?window.LocalStorage:localStorage},k=exports.isBrowser=function(){return"undefined"!=typeof window},W=exports.RANDOM_LENGTH=32;function L(e){console.log("hash key called ".concat(e));var t=(0,n.hash)((0,o.fromString)(e,s));return(0,r.toString)(t,s)}function m(){return t.default.randomBytes(W)}function U(){var e=m();return console.log("generate topic called ".concat(e)),L((0,r.toString)(e,s))}function A(e,t,o){return(0,a.generateOKXLink)({topic:e,publicKey:t,ret:o})}
},{"tweetnacl":"WYSB","uint8arrays/from-string":"yPb1","uint8arrays/to-string":"XOd3","@stablelib/sha256":"nIPj","./misc/safejson.ts":"vbaN","./deeplink.ts":"HWoi","ws":"yone"}],"FRpO":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,module.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var o,s,c;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),c=s[t]),void 0===c)c=s[t]=n,++e._eventsCount;else if("function"==typeof c?c=s[t]=i?[n,c]:[c,n]:i?c.unshift(n):c.push(n),(o=f(e))>0&&c.length>o&&!c.warned){c.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=e,v.type=t,v.count=c.length,r(v)}return e}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=v.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):h(i,i.length)}function a(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&L(e,i,{once:!0})})}function L(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var c=f.length,v=h(f,c);for(r=0;r<c;++r)n(v[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):a.call(e,t)},o.prototype.listenerCount=a,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"KoIY":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return r};var n,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(n){l=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new j(r||[]);return a(i,"_invoke",{value:T(t,n,c)}),i}function v(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=h;var p="suspendedStart",y="suspendedYield",d="executing",m="completed",g={};function w(){}function E(){}function b(){}var k={};l(k,s,function(){return this});var x=Object.getPrototypeOf,L=x&&x(x(I([])));L&&L!==o&&i.call(L,s)&&(k=L);var S=b.prototype=w.prototype=Object.create(k);function _(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(e,n){function r(o,a,c,s){var u=v(e[o],e,a);if("throw"!==u.type){var f=u.arg,l=f.value;return l&&"object"==t(l)&&i.call(l,"__await")?n.resolve(l.__await).then(function(t){r("next",t,c,s)},function(t){r("throw",t,c,s)}):n.resolve(l).then(function(t){f.value=t,c(f)},function(t){return r("throw",t,c,s)})}s(u.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new n(function(n,o){r(t,e,n,o)})}return o=o?o.then(i,i):i()}})}function T(t,e,r){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=N(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=v(t,e,r);if("normal"===u.type){if(o=r.done?m:y,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function N(t,e){var r=e.method,o=t.iterator[r];if(o===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,N(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=v(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(i.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return E.prototype=b,a(S,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:E,configurable:!0}),E.displayName=l(b,f,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,f,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},_(O.prototype),l(O.prototype,u,function(){return this}),r.AsyncIterator=O,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new O(h(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(S),l(S,f,"Generator"),l(S,s,function(){return this}),l(S,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=I,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return c.type="throw",c.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),g}},r}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e){var n=a(e,"string");return"symbol"==t(n)?n:n+""}function a(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}var c=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OKXWalletConnector=void 0;var s=require("./constants"),u=require("../misc/safejson"),f=require("../utils"),l=require("events"),h=(0,f.resolveWebSocketImplementation)(),v=function(){return o(function t(e){if(n(this,t),this.events=new l.EventEmitter,this.state=s.ConnectorState.InitState,!(0,f.checkWSUrl)(e))throw new Error("CONNECTOR: invalid url ".concat(e));this.url=e},[{key:"connected",get:function(){return void 0!==this.socket}},{key:"connecting",get:function(){return this.state==s.ConnectorState.Connecting}},{key:"onPayload",value:function(t){void 0!==t.data&&this.events.emit("payload",t.data)}},{key:"onClose",value:function(t){this.socket=void 0,this.state=s.ConnectorState.Disconnected,this.events.emit("close",t)}},{key:"onError",value:function(t,e){var n={id:t,msg:e.toString()};this.events.emit("payload",n)}},{key:"onopen",value:function(t){var e=this;t.onmessage=function(t){return e.onPayload(t)},t.onclose=function(t){return e.onClose(t)},this.socket=t,this.state=s.ConnectorState.Connected,this.events.emit("open")}},{key:"emitError",value:function(t){this.events.emit("fail",t)}},{key:"registOpen",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;if(!(0,f.checkWSUrl)(e))throw new Error("CONNECTOR: invalid url ".concat(e));if(this.connecting){var n=this.events.getMaxListeners();return(this.events.listenerCount("open")>=n||this.events.listenerCount("fail")>=n)&&this.events.setMaxListeners(n+1),new Promise(function(e,n){t.events.once("fail",function(e){t.events.getMaxListeners()>s.EVENT_EMITTER_MAX_LISTENERS&&t.events.setMaxListeners(s.EVENT_EMITTER_MAX_LISTENERS),n(e)}),t.events.once("open",function(){if(t.events.getMaxListeners()>s.EVENT_EMITTER_MAX_LISTENERS&&t.events.setMaxListeners(s.EVENT_EMITTER_MAX_LISTENERS),void 0===t.socket)return n(new Error("Connect lost"));e(t.socket)})})}this.url=e,this.state=s.ConnectorState.Connecting;new URLSearchParams(e).get("origin");var r={rejectUnauthorized:!1};return new Promise(function(n,o){var i=new h(e,[],r);(0,f.hasBuiltInWebSocket)()?i.onerror=function(e){var n=e;o(t.emitError(n.error))}:i.on("error",function(e){o(t.emitError(e))}),i.onopen=function(){t.onopen(i),n(i)}})}},{key:"connect",value:function(){return c(this,void 0,void 0,e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registOpen(this.url);case 2:case"end":return t.stop()}},t,this)}))}},{key:"disconnect",value:function(){return c(this,void 0,void 0,e().mark(function t(){var n=this;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,e){void 0!==n.socket?(n.socket.onclose=function(e){n.onClose(e),t()},n.socket.close()):e(new Error("CONNECTION closed"))}));case 1:case"end":return t.stop()}},t)}))}},{key:"currentStatus",value:function(){return{state:this.state,url:this.url}}},{key:"addListener",value:function(t,e,n,r){this.events.on("payload",function(r){var o,i=null===(o=r.data.params.data)||void 0===o?void 0:o.message,a=e(i);n(t,a)}),this.events.on("fail",function(e){console.log("CONNECT failed: ".concat(e)),r(t,e.toString())})}},{key:"addPackageParse",value:function(t){var n=this;this.events.on("payload",function(r){return c(n,void 0,void 0,e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:case"end":return e.stop()}},n)}))})}},{key:"once",value:function(t,e){this.events.once(t,e)}},{key:"off",value:function(t,e){this.events.off(t,e)}},{key:"removeListener",value:function(t,e){this.events.removeListener(t,e)}},{key:"send",value:function(t){return c(this,void 0,void 0,e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.socket){e.next=4;break}return e.next=3,this.registOpen();case 3:this.socket=e.sent;case 4:try{this.socket.send((0,u.safeJsonStringify)(t))}catch(n){this.onError(t.id,n)}case 5:case"end":return e.stop()}},n,this)}))}},{key:"onOpen",value:function(t){var n=this;this.events.on("open",function(){return c(n,void 0,void 0,e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}},n)}))})}}])}();exports.OKXWalletConnector=v;
},{"./constants":"Eamx","../misc/safejson":"vbaN","../utils":"RiUx","events":"FRpO"}],"Fk9w":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var c=t[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,n(c.key),c)}}function c(e,t,c){return t&&o(e.prototype,t),c&&o(e,c),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(t){var o=r(t,"string");return"symbol"==e(o)?o:o+""}function r(t,o){if("object"!=e(t)||!t)return t;var c=t[Symbol.toPrimitive];if(void 0!==c){var n=c.call(t,o||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Storage=void 0;var a=require("../utils"),i=require("../misc/safejson"),s=function(){function e(o){t(this,e);var c=(0,a.resolveLocalStorage)();this.subKey=o,console.log("--------get current local storage --------"),console.log(c);var n=c.getItem(e.cacheKey+o);if(null==n)return console.log("with no cache"),void(this.cache={});console.log(n);var r=(0,i.safeJsonParse)(n);this.cache=r,console.log("get cache obj: ".concat(this.cache)),void 0!==this.cache&&null!=this.cache||(this.cache={})}return c(e,[{key:"saveContent",value:function(e,t){var o={id:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",timestamp:Date.now().toString(),content:e};this.saveItem(o,t)}},{key:"saveItem",value:function(t,o){var c=e.cacheKey+this.subKey,n=(0,a.resolveLocalStorage)();console.log(this.cache),console.log("get cache obj: ".concat(this.cache,", ").concat(o,", ").concat(t)),this.cache[o]=t;var r=(0,i.safeJsonStringify)(this.cache);console.log("STORAGE: ".concat(o," @ ").concat(this.cache)),n.setItem(c,r)}},{key:"getItem",value:function(e){return console.log("STORAGE: ".concat(e," @ ").concat(this.cache)),this.cache[e]}},{key:"clearCache",value:function(){this.cache={};var t=e.cacheKey+this.subKey;localStorage.setItem(t,"")}}])}();exports.Storage=s,s.cacheKey="OKXStorageKey";
},{"../utils":"RiUx","../misc/safejson":"vbaN"}],"utrV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionCrypto=void 0;var e=n(require("tweetnacl")),t=require("./utils.js");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return l(e)||y(e,t)||u(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],c=!0,y=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){y=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(y)throw i}}return u}}function l(e){if(Array.isArray(e))return e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function p(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=d(e,"string");return"symbol"==i(t)?t:t+""}function d(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var v=exports.SessionCrypto=function(){return p(function e(r){f(this,e),b(this,"nonceLength",24),b(this,"sessionId",""),b(this,"keyPair",{publicKey:new Uint8Array,secretKey:new Uint8Array}),this.keyPair=r?this.createKeypairFromString(r):this.createKeypair(),this.sessionId=(0,t.toHexString)(this.keyPair.publicKey)},[{key:"createKeypair",value:function(){return e.default.box.keyPair()}},{key:"createKeypairFromString",value:function(e){return{publicKey:(0,t.hexToByteArray)(e.publicKey),secretKey:(0,t.hexToByteArray)(e.secretKey)}}},{key:"createNonce",value:function(){return e.default.randomBytes(this.nonceLength)}},{key:"encrypt",value:function(r,n){var i=(new TextEncoder).encode(r),o=this.createNonce(),a=e.default.box(i,o,n,this.keyPair.secretKey);return(0,t.concatUint8Arrays)(o,a)}},{key:"decrypt",value:function(r,n){var i=o((0,t.splitToUint8Arrays)(r,this.nonceLength),2),a=i[0],u=i[1],c=e.default.box.open(u,a,n,this.keyPair.secretKey);if(!c)throw new Error("Decryption error: \n message: ".concat(r.toString()," \n sender pubkey: ").concat(n.toString()," \n keypair pubkey: ").concat(this.keyPair.publicKey.toString()," \n keypair secretkey: ").concat(this.keyPair.secretKey.toString()));return(new TextDecoder).decode(c)}},{key:"stringifyKeypair",value:function(){return{publicKey:(0,t.toHexString)(this.keyPair.publicKey),secretKey:(0,t.toHexString)(this.keyPair.secretKey)}}}])}();
},{"tweetnacl":"WYSB","./utils.js":"RiUx"}],"ysG5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserRandomSource=void 0;const t=65536;class e{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&void 0!==t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const s=new Uint8Array(e);for(let r=0;r<s.length;r+=t)this._crypto.getRandomValues(s.subarray(r,r+Math.min(s.length-r,t)));return s}}exports.BrowserRandomSource=e;
},{}],"E2yb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeRandomSource=void 0;const e=require("@stablelib/wipe");class t{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,"undefined"!=typeof require){const e=require("crypto");e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const o=new Uint8Array(t);for(let e=0;e<o.length;e++)o[e]=r[e];return(0,e.wipe)(r),o}}exports.NodeRandomSource=t;
},{"@stablelib/wipe":"NSK0","crypto":"rDCW"}],"xuKS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SystemRandomSource=void 0;const e=require("./browser"),s=require("./node");class r{constructor(){return this.isAvailable=!1,this.name="",this._source=new e.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new s.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}exports.SystemRandomSource=r;
},{"./browser":"ysG5","./node":"E2yb"}],"cEGi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomStringForEntropy=exports.randomString=exports.randomUint32=exports.randomBytes=exports.defaultRandomSource=void 0;const r=require("./source/system"),t=require("@stablelib/binary"),e=require("@stablelib/wipe");function o(r,t=exports.defaultRandomSource){return t.randomBytes(r)}function n(r=exports.defaultRandomSource){const n=o(4,r),s=(0,t.readUint32LE)(n);return(0,e.wipe)(n),s}exports.defaultRandomSource=new r.SystemRandomSource,exports.randomBytes=o,exports.randomUint32=n;const s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(r,t=s,n=exports.defaultRandomSource){if(t.length<2)throw new Error("randomString charset is too short");if(t.length>256)throw new Error("randomString charset is too long");let a="";const i=t.length,d=256-256%i;for(;r>0;){const s=o(Math.ceil(256*r/d),n);for(let e=0;e<s.length&&r>0;e++){const o=s[e];o<d&&(a+=t.charAt(o%i),r--)}(0,e.wipe)(s)}return a}function i(r,t=s,e=exports.defaultRandomSource){return a(Math.ceil(r/(Math.log(t.length)/Math.LN2)),t,e)}exports.randomString=a,exports.randomStringForEntropy=i;
},{"./source/system":"xuKS","@stablelib/binary":"ZWhr","@stablelib/wipe":"NSK0"}],"beNE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@stablelib/binary"),e=require("@stablelib/wipe");exports.DIGEST_LENGTH=64,exports.BLOCK_SIZE=128;var i=function(){function i(){this.digestLength=exports.DIGEST_LENGTH,this.blockSize=exports.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return i.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},i.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},i.prototype.clean=function(){e.wipe(this._buffer),e.wipe(this._tempHi),e.wipe(this._tempLo),this.reset()},i.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var i=0;if(this._bytesHashed+=e,this._bufferLength>0){for(;this._bufferLength<exports.BLOCK_SIZE&&e>0;)this._buffer[this._bufferLength++]=t[i++],e--;this._bufferLength===this.blockSize&&(h(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(e>=this.blockSize&&(i=h(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,i,e),e%=this.blockSize);e>0;)this._buffer[this._bufferLength++]=t[i++],e--;return this},i.prototype.finish=function(e){if(!this._finished){var i=this._bytesHashed,s=this._bufferLength,r=i/536870912|0,n=i<<3,f=i%128<112?128:256;this._buffer[s]=128;for(var a=s+1;a<f-8;a++)this._buffer[a]=0;t.writeUint32BE(r,this._buffer,f-8),t.writeUint32BE(n,this._buffer,f-4),h(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,f),this._finished=!0}for(a=0;a<this.digestLength/8;a++)t.writeUint32BE(this._stateHi[a],e,8*a),t.writeUint32BE(this._stateLo[a],e,8*a+4);return this},i.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},i.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},i.prototype.restoreState=function(t){return this._stateHi.set(t.stateHi),this._stateLo.set(t.stateLo),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},i.prototype.cleanSavedState=function(t){e.wipe(t.stateHi),e.wipe(t.stateLo),t.buffer&&e.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},i}();exports.SHA512=i;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function h(e,i,h,r,n,f,a){for(var _,o,u,b,p,L,H,d,y=h[0],w=h[1],c=h[2],g=h[3],v=h[4],S=h[5],l=h[6],E=h[7],A=r[0],I=r[1],m=r[2],B=r[3],U=r[4],x=r[5],k=r[6],z=r[7];a>=128;){for(var G=0;G<16;G++){var O=8*G+f;e[G]=t.readUint32BE(n,O),i[G]=t.readUint32BE(n,O+4)}for(G=0;G<80;G++){var T,C,K=y,Z=w,q=c,D=g,N=v,j=S,M=l,P=A,F=I,J=m,Q=B,R=U,V=x,W=k;if(p=65535&(o=z),L=o>>>16,H=65535&(_=E),d=_>>>16,p+=65535&(o=(U>>>14|v<<18)^(U>>>18|v<<14)^(v>>>9|U<<23)),L+=o>>>16,H+=65535&(_=(v>>>14|U<<18)^(v>>>18|U<<14)^(U>>>9|v<<23)),d+=_>>>16,p+=65535&(o=U&x^~U&k),L+=o>>>16,H+=65535&(_=v&S^~v&l),d+=_>>>16,_=s[2*G],p+=65535&(o=s[2*G+1]),L+=o>>>16,H+=65535&_,d+=_>>>16,_=e[G%16],L+=(o=i[G%16])>>>16,H+=65535&_,d+=_>>>16,H+=(L+=(p+=65535&o)>>>16)>>>16,p=65535&(o=b=65535&p|L<<16),L=o>>>16,H=65535&(_=u=65535&H|(d+=H>>>16)<<16),d=_>>>16,p+=65535&(o=(A>>>28|y<<4)^(y>>>2|A<<30)^(y>>>7|A<<25)),L+=o>>>16,H+=65535&(_=(y>>>28|A<<4)^(A>>>2|y<<30)^(A>>>7|y<<25)),d+=_>>>16,L+=(o=A&I^A&m^I&m)>>>16,H+=65535&(_=y&w^y&c^w&c),d+=_>>>16,T=65535&(H+=(L+=(p+=65535&o)>>>16)>>>16)|(d+=H>>>16)<<16,C=65535&p|L<<16,p=65535&(o=Q),L=o>>>16,H=65535&(_=D),d=_>>>16,L+=(o=b)>>>16,H+=65535&(_=u),d+=_>>>16,w=K,c=Z,g=q,v=D=65535&(H+=(L+=(p+=65535&o)>>>16)>>>16)|(d+=H>>>16)<<16,S=N,l=j,E=M,y=T,I=P,m=F,B=J,U=Q=65535&p|L<<16,x=R,k=V,z=W,A=C,G%16==15)for(O=0;O<16;O++)_=e[O],p=65535&(o=i[O]),L=o>>>16,H=65535&_,d=_>>>16,_=e[(O+9)%16],p+=65535&(o=i[(O+9)%16]),L+=o>>>16,H+=65535&_,d+=_>>>16,u=e[(O+1)%16],p+=65535&(o=((b=i[(O+1)%16])>>>1|u<<31)^(b>>>8|u<<24)^(b>>>7|u<<25)),L+=o>>>16,H+=65535&(_=(u>>>1|b<<31)^(u>>>8|b<<24)^u>>>7),d+=_>>>16,u=e[(O+14)%16],L+=(o=((b=i[(O+14)%16])>>>19|u<<13)^(u>>>29|b<<3)^(b>>>6|u<<26))>>>16,H+=65535&(_=(u>>>19|b<<13)^(b>>>29|u<<3)^u>>>6),d+=_>>>16,d+=(H+=(L+=(p+=65535&o)>>>16)>>>16)>>>16,e[O]=65535&H|d<<16,i[O]=65535&p|L<<16}p=65535&(o=A),L=o>>>16,H=65535&(_=y),d=_>>>16,_=h[0],L+=(o=r[0])>>>16,H+=65535&_,d+=_>>>16,d+=(H+=(L+=(p+=65535&o)>>>16)>>>16)>>>16,h[0]=y=65535&H|d<<16,r[0]=A=65535&p|L<<16,p=65535&(o=I),L=o>>>16,H=65535&(_=w),d=_>>>16,_=h[1],L+=(o=r[1])>>>16,H+=65535&_,d+=_>>>16,d+=(H+=(L+=(p+=65535&o)>>>16)>>>16)>>>16,h[1]=w=65535&H|d<<16,r[1]=I=65535&p|L<<16,p=65535&(o=m),L=o>>>16,H=65535&(_=c),d=_>>>16,_=h[2],L+=(o=r[2])>>>16,H+=65535&_,d+=_>>>16,d+=(H+=(L+=(p+=65535&o)>>>16)>>>16)>>>16,h[2]=c=65535&H|d<<16,r[2]=m=65535&p|L<<16,p=65535&(o=B),L=o>>>16,H=65535&(_=g),d=_>>>16,_=h[3],L+=(o=r[3])>>>16,H+=65535&_,d+=_>>>16,d+=(H+=(L+=(p+=65535&o)>>>16)>>>16)>>>16,h[3]=g=65535&H|d<<16,r[3]=B=65535&p|L<<16,p=65535&(o=U),L=o>>>16,H=65535&(_=v),d=_>>>16,_=h[4],L+=(o=r[4])>>>16,H+=65535&_,d+=_>>>16,d+=(H+=(L+=(p+=65535&o)>>>16)>>>16)>>>16,h[4]=v=65535&H|d<<16,r[4]=U=65535&p|L<<16,p=65535&(o=x),L=o>>>16,H=65535&(_=S),d=_>>>16,_=h[5],L+=(o=r[5])>>>16,H+=65535&_,d+=_>>>16,d+=(H+=(L+=(p+=65535&o)>>>16)>>>16)>>>16,h[5]=S=65535&H|d<<16,r[5]=x=65535&p|L<<16,p=65535&(o=k),L=o>>>16,H=65535&(_=l),d=_>>>16,_=h[6],L+=(o=r[6])>>>16,H+=65535&_,d+=_>>>16,d+=(H+=(L+=(p+=65535&o)>>>16)>>>16)>>>16,h[6]=l=65535&H|d<<16,r[6]=k=65535&p|L<<16,p=65535&(o=z),L=o>>>16,H=65535&(_=E),d=_>>>16,_=h[7],L+=(o=r[7])>>>16,H+=65535&_,d+=_>>>16,d+=(H+=(L+=(p+=65535&o)>>>16)>>>16)>>>16,h[7]=E=65535&H|d<<16,r[7]=z=65535&p|L<<16,f+=128,a-=128}return f}function r(t){var e=new i;e.update(t);var s=e.digest();return e.clean(),s}exports.hash=r;
},{"@stablelib/binary":"ZWhr","@stablelib/wipe":"NSK0"}],"gDuy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertSecretKeyToX25519=exports.convertPublicKeyToX25519=exports.verify=exports.sign=exports.extractPublicKeyFromSecretKey=exports.generateKeyPair=exports.generateKeyPairFromSeed=exports.SEED_LENGTH=exports.SECRET_KEY_LENGTH=exports.PUBLIC_KEY_LENGTH=exports.SIGNATURE_LENGTH=void 0;const t=require("@stablelib/random"),r=require("@stablelib/sha512"),o=require("@stablelib/wipe");function e(t){const r=new Float64Array(16);if(t)for(let o=0;o<t.length;o++)r[o]=t[o];return r}exports.SIGNATURE_LENGTH=64,exports.PUBLIC_KEY_LENGTH=32,exports.SECRET_KEY_LENGTH=64,exports.SEED_LENGTH=32;const n=new Uint8Array(32);n[0]=9;const a=e(),f=e([1]),s=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),i=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),u=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function h(t,r){for(let o=0;o<16;o++)t[o]=0|r[o]}function y(t){let r=1;for(let o=0;o<16;o++){let e=t[o]+r+65535;r=Math.floor(e/65536),t[o]=e-65536*r}t[0]+=r-1+37*(r-1)}function E(t,r,o){const e=~(o-1);for(let n=0;n<16;n++){const o=e&(t[n]^r[n]);t[n]^=o,r[n]^=o}}function p(t,r){const o=e(),n=e();for(let e=0;e<16;e++)n[e]=r[e];y(n),y(n),y(n);for(let e=0;e<2;e++){o[0]=n[0]-65517;for(let r=1;r<15;r++)o[r]=n[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=n[15]-32767-(o[14]>>16&1);const t=o[15]>>16&1;o[14]&=65535,E(n,o,1-t)}for(let e=0;e<16;e++)t[2*e]=255&n[e],t[2*e+1]=n[e]>>8}function M(t,r){let o=0;for(let e=0;e<32;e++)o|=t[e]^r[e];return(1&o-1>>>8)-1}function x(t,r){const o=new Uint8Array(32),e=new Uint8Array(32);return p(o,t),p(e,r),M(o,e)}function b(t){const r=new Uint8Array(32);return p(r,t),1&r[0]}function w(t,r){for(let o=0;o<16;o++)t[o]=r[2*o]+(r[2*o+1]<<8);t[15]&=32767}function T(t,r,o){for(let e=0;e<16;e++)t[e]=r[e]+o[e]}function d(t,r,o){for(let e=0;e<16;e++)t[e]=r[e]-o[e]}function _(t,r,o){let e,n,a=0,f=0,s=0,l=0,c=0,i=0,u=0,h=0,y=0,E=0,p=0,M=0,x=0,b=0,w=0,T=0,d=0,_=0,A=0,K=0,S=0,G=0,N=0,U=0,H=0,L=0,g=0,P=0,m=0,v=0,F=0,R=o[0],C=o[1],I=o[2],Y=o[3],D=o[4],X=o[5],q=o[6],B=o[7],$=o[8],k=o[9],j=o[10],O=o[11],z=o[12],J=o[13],Q=o[14],V=o[15];a+=(e=r[0])*R,f+=e*C,s+=e*I,l+=e*Y,c+=e*D,i+=e*X,u+=e*q,h+=e*B,y+=e*$,E+=e*k,p+=e*j,M+=e*O,x+=e*z,b+=e*J,w+=e*Q,T+=e*V,f+=(e=r[1])*R,s+=e*C,l+=e*I,c+=e*Y,i+=e*D,u+=e*X,h+=e*q,y+=e*B,E+=e*$,p+=e*k,M+=e*j,x+=e*O,b+=e*z,w+=e*J,T+=e*Q,d+=e*V,s+=(e=r[2])*R,l+=e*C,c+=e*I,i+=e*Y,u+=e*D,h+=e*X,y+=e*q,E+=e*B,p+=e*$,M+=e*k,x+=e*j,b+=e*O,w+=e*z,T+=e*J,d+=e*Q,_+=e*V,l+=(e=r[3])*R,c+=e*C,i+=e*I,u+=e*Y,h+=e*D,y+=e*X,E+=e*q,p+=e*B,M+=e*$,x+=e*k,b+=e*j,w+=e*O,T+=e*z,d+=e*J,_+=e*Q,A+=e*V,c+=(e=r[4])*R,i+=e*C,u+=e*I,h+=e*Y,y+=e*D,E+=e*X,p+=e*q,M+=e*B,x+=e*$,b+=e*k,w+=e*j,T+=e*O,d+=e*z,_+=e*J,A+=e*Q,K+=e*V,i+=(e=r[5])*R,u+=e*C,h+=e*I,y+=e*Y,E+=e*D,p+=e*X,M+=e*q,x+=e*B,b+=e*$,w+=e*k,T+=e*j,d+=e*O,_+=e*z,A+=e*J,K+=e*Q,S+=e*V,u+=(e=r[6])*R,h+=e*C,y+=e*I,E+=e*Y,p+=e*D,M+=e*X,x+=e*q,b+=e*B,w+=e*$,T+=e*k,d+=e*j,_+=e*O,A+=e*z,K+=e*J,S+=e*Q,G+=e*V,h+=(e=r[7])*R,y+=e*C,E+=e*I,p+=e*Y,M+=e*D,x+=e*X,b+=e*q,w+=e*B,T+=e*$,d+=e*k,_+=e*j,A+=e*O,K+=e*z,S+=e*J,G+=e*Q,N+=e*V,y+=(e=r[8])*R,E+=e*C,p+=e*I,M+=e*Y,x+=e*D,b+=e*X,w+=e*q,T+=e*B,d+=e*$,_+=e*k,A+=e*j,K+=e*O,S+=e*z,G+=e*J,N+=e*Q,U+=e*V,E+=(e=r[9])*R,p+=e*C,M+=e*I,x+=e*Y,b+=e*D,w+=e*X,T+=e*q,d+=e*B,_+=e*$,A+=e*k,K+=e*j,S+=e*O,G+=e*z,N+=e*J,U+=e*Q,H+=e*V,p+=(e=r[10])*R,M+=e*C,x+=e*I,b+=e*Y,w+=e*D,T+=e*X,d+=e*q,_+=e*B,A+=e*$,K+=e*k,S+=e*j,G+=e*O,N+=e*z,U+=e*J,H+=e*Q,L+=e*V,M+=(e=r[11])*R,x+=e*C,b+=e*I,w+=e*Y,T+=e*D,d+=e*X,_+=e*q,A+=e*B,K+=e*$,S+=e*k,G+=e*j,N+=e*O,U+=e*z,H+=e*J,L+=e*Q,g+=e*V,x+=(e=r[12])*R,b+=e*C,w+=e*I,T+=e*Y,d+=e*D,_+=e*X,A+=e*q,K+=e*B,S+=e*$,G+=e*k,N+=e*j,U+=e*O,H+=e*z,L+=e*J,g+=e*Q,P+=e*V,b+=(e=r[13])*R,w+=e*C,T+=e*I,d+=e*Y,_+=e*D,A+=e*X,K+=e*q,S+=e*B,G+=e*$,N+=e*k,U+=e*j,H+=e*O,L+=e*z,g+=e*J,P+=e*Q,m+=e*V,w+=(e=r[14])*R,T+=e*C,d+=e*I,_+=e*Y,A+=e*D,K+=e*X,S+=e*q,G+=e*B,N+=e*$,U+=e*k,H+=e*j,L+=e*O,g+=e*z,P+=e*J,m+=e*Q,v+=e*V,T+=(e=r[15])*R,f+=38*(_+=e*I),s+=38*(A+=e*Y),l+=38*(K+=e*D),c+=38*(S+=e*X),i+=38*(G+=e*q),u+=38*(N+=e*B),h+=38*(U+=e*$),y+=38*(H+=e*k),E+=38*(L+=e*j),p+=38*(g+=e*O),M+=38*(P+=e*z),x+=38*(m+=e*J),b+=38*(v+=e*Q),w+=38*(F+=e*V),a=(e=(a+=38*(d+=e*C))+(n=1)+65535)-65536*(n=Math.floor(e/65536)),f=(e=f+n+65535)-65536*(n=Math.floor(e/65536)),s=(e=s+n+65535)-65536*(n=Math.floor(e/65536)),l=(e=l+n+65535)-65536*(n=Math.floor(e/65536)),c=(e=c+n+65535)-65536*(n=Math.floor(e/65536)),i=(e=i+n+65535)-65536*(n=Math.floor(e/65536)),u=(e=u+n+65535)-65536*(n=Math.floor(e/65536)),h=(e=h+n+65535)-65536*(n=Math.floor(e/65536)),y=(e=y+n+65535)-65536*(n=Math.floor(e/65536)),E=(e=E+n+65535)-65536*(n=Math.floor(e/65536)),p=(e=p+n+65535)-65536*(n=Math.floor(e/65536)),M=(e=M+n+65535)-65536*(n=Math.floor(e/65536)),x=(e=x+n+65535)-65536*(n=Math.floor(e/65536)),b=(e=b+n+65535)-65536*(n=Math.floor(e/65536)),w=(e=w+n+65535)-65536*(n=Math.floor(e/65536)),T=(e=T+n+65535)-65536*(n=Math.floor(e/65536)),a=(e=(a+=n-1+37*(n-1))+(n=1)+65535)-65536*(n=Math.floor(e/65536)),f=(e=f+n+65535)-65536*(n=Math.floor(e/65536)),s=(e=s+n+65535)-65536*(n=Math.floor(e/65536)),l=(e=l+n+65535)-65536*(n=Math.floor(e/65536)),c=(e=c+n+65535)-65536*(n=Math.floor(e/65536)),i=(e=i+n+65535)-65536*(n=Math.floor(e/65536)),u=(e=u+n+65535)-65536*(n=Math.floor(e/65536)),h=(e=h+n+65535)-65536*(n=Math.floor(e/65536)),y=(e=y+n+65535)-65536*(n=Math.floor(e/65536)),E=(e=E+n+65535)-65536*(n=Math.floor(e/65536)),p=(e=p+n+65535)-65536*(n=Math.floor(e/65536)),M=(e=M+n+65535)-65536*(n=Math.floor(e/65536)),x=(e=x+n+65535)-65536*(n=Math.floor(e/65536)),b=(e=b+n+65535)-65536*(n=Math.floor(e/65536)),w=(e=w+n+65535)-65536*(n=Math.floor(e/65536)),T=(e=T+n+65535)-65536*(n=Math.floor(e/65536)),a+=n-1+37*(n-1),t[0]=a,t[1]=f,t[2]=s,t[3]=l,t[4]=c,t[5]=i,t[6]=u,t[7]=h,t[8]=y,t[9]=E,t[10]=p,t[11]=M,t[12]=x,t[13]=b,t[14]=w,t[15]=T}function A(t,r){_(t,r,r)}function K(t,r){const o=e();let n;for(n=0;n<16;n++)o[n]=r[n];for(n=253;n>=0;n--)A(o,o),2!==n&&4!==n&&_(o,o,r);for(n=0;n<16;n++)t[n]=o[n]}function S(t,r){const o=e();let n;for(n=0;n<16;n++)o[n]=r[n];for(n=250;n>=0;n--)A(o,o),1!==n&&_(o,o,r);for(n=0;n<16;n++)t[n]=o[n]}function G(t,r){const o=e(),n=e(),a=e(),f=e(),s=e(),c=e(),i=e(),u=e(),h=e();d(o,t[1],t[0]),d(h,r[1],r[0]),_(o,o,h),T(n,t[0],t[1]),T(h,r[0],r[1]),_(n,n,h),_(a,t[3],r[3]),_(a,a,l),_(f,t[2],r[2]),T(f,f,f),d(s,n,o),d(c,f,a),T(i,f,a),T(u,n,o),_(t[0],s,c),_(t[1],u,i),_(t[2],i,c),_(t[3],s,u)}function N(t,r,o){for(let e=0;e<4;e++)E(t[e],r[e],o)}function U(t,r){const o=e(),n=e(),a=e();K(a,r[2]),_(o,r[0],a),_(n,r[1],a),p(t,n),t[31]^=b(o)<<7}function H(t,r,o){h(t[0],a),h(t[1],f),h(t[2],f),h(t[3],a);for(let e=255;e>=0;--e){const n=o[e/8|0]>>(7&e)&1;N(t,r,n),G(r,t),G(t,t),N(t,r,n)}}function L(t,r){const o=[e(),e(),e(),e()];h(o[0],c),h(o[1],i),h(o[2],f),_(o[3],c,i),H(t,o,r)}function g(t){if(t.length!==exports.SEED_LENGTH)throw new Error(`ed25519: seed must be ${exports.SEED_LENGTH} bytes`);const o=(0,r.hash)(t);o[0]&=248,o[31]&=127,o[31]|=64;const n=new Uint8Array(32),a=[e(),e(),e(),e()];L(a,o),U(n,a);const f=new Uint8Array(64);return f.set(t),f.set(n,32),{publicKey:n,secretKey:f}}function P(r){const e=(0,t.randomBytes)(32,r),n=g(e);return(0,o.wipe)(e),n}function m(t){if(t.length!==exports.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${exports.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))}exports.generateKeyPairFromSeed=g,exports.generateKeyPair=P,exports.extractPublicKeyFromSecretKey=m;const v=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function F(t,r){let o,e,n,a;for(e=63;e>=32;--e){for(o=0,n=e-32,a=e-12;n<a;++n)r[n]+=o-16*r[e]*v[n-(e-32)],o=Math.floor((r[n]+128)/256),r[n]-=256*o;r[n]+=o,r[e]=0}for(o=0,n=0;n<32;n++)r[n]+=o-(r[31]>>4)*v[n],o=r[n]>>8,r[n]&=255;for(n=0;n<32;n++)r[n]-=o*v[n];for(e=0;e<32;e++)r[e+1]+=r[e]>>8,t[e]=255&r[e]}function R(t){const r=new Float64Array(64);for(let o=0;o<64;o++)r[o]=t[o];for(let o=0;o<64;o++)t[o]=0;F(t,r)}function C(t,o){const n=new Float64Array(64),a=[e(),e(),e(),e()],f=(0,r.hash)(t.subarray(0,32));f[0]&=248,f[31]&=127,f[31]|=64;const s=new Uint8Array(64);s.set(f.subarray(32),32);const l=new r.SHA512;l.update(s.subarray(32)),l.update(o);const c=l.digest();l.clean(),R(c),L(a,c),U(s,a),l.reset(),l.update(s.subarray(0,32)),l.update(t.subarray(32)),l.update(o);const i=l.digest();R(i);for(let r=0;r<32;r++)n[r]=c[r];for(let r=0;r<32;r++)for(let t=0;t<32;t++)n[r+t]+=i[r]*f[t];return F(s.subarray(32),n),s}function I(t,r){const o=e(),n=e(),l=e(),c=e(),i=e(),y=e(),E=e();return h(t[2],f),w(t[1],r),A(l,t[1]),_(c,l,s),d(l,l,t[2]),T(c,t[2],c),A(i,c),A(y,i),_(E,y,i),_(o,E,l),_(o,o,c),S(o,o),_(o,o,l),_(o,o,c),_(o,o,c),_(t[0],o,c),A(n,t[0]),_(n,n,c),x(n,l)&&_(t[0],t[0],u),A(n,t[0]),_(n,n,c),x(n,l)?-1:(b(t[0])===r[31]>>7&&d(t[0],a,t[0]),_(t[3],t[0],t[1]),0)}function Y(t,o,n){const a=new Uint8Array(32),f=[e(),e(),e(),e()],s=[e(),e(),e(),e()];if(n.length!==exports.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${exports.SIGNATURE_LENGTH} bytes`);if(I(s,t))return!1;const l=new r.SHA512;l.update(n.subarray(0,32)),l.update(t),l.update(o);const c=l.digest();return R(c),H(f,s,c),L(s,n.subarray(32)),G(f,s),U(a,f),!M(n,a)}function D(t){let r=[e(),e(),e(),e()];if(I(r,t))throw new Error("Ed25519: invalid public key");let o=e(),n=e(),a=r[1];T(o,f,a),d(n,f,a),K(n,n),_(o,o,n);let s=new Uint8Array(32);return p(s,o),s}function X(t){const e=(0,r.hash)(t.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;const n=new Uint8Array(e.subarray(0,32));return(0,o.wipe)(e),n}exports.sign=C,exports.verify=Y,exports.convertPublicKeyToX25519=D,exports.convertSecretKeyToX25519=X;
},{"@stablelib/random":"cEGi","@stablelib/sha512":"beNE","@stablelib/wipe":"NSK0"}],"EnuL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./alloc.js");function t(t,o){o||(o=t.reduce((e,t)=>e+t.length,0));const r=e.allocUnsafe(o);let c=0;for(const e of t)r.set(e,c),c+=e.length;return r}exports.concat=t;
},{"./alloc.js":"dn3L"}],"i86f":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return n};var e,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(e){l=function(t,r,e){return t[r]=e}}function p(t,r,e,n){var o=r&&r.prototype instanceof I?r:I,i=Object.create(o.prototype),u=new M(n||[]);return a(i,"_invoke",{value:L(t,e,u)}),i}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=p;var y="suspendedStart",E="suspendedYield",d="executing",D="completed",_={};function I(){}function v(){}function x(){}var g={};l(g,s,function(){return this});var m=Object.getPrototypeOf,T=m&&m(m(G([])));T&&T!==o&&i.call(T,s)&&(g=T);var O=x.prototype=I.prototype=Object.create(g);function b(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function w(r,e){function n(o,a,u,s){var c=h(r[o],r,a);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==t(l)&&i.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,u,s)},function(t){n("throw",t,u,s)}):e.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,s)})}s(c.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function L(t,r,n){var o=y;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===D){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=N(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=D,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=h(t,r,n);if("normal"===c.type){if(o=n.done?D:E,c.arg===_)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=D,n.method="throw",n.arg=c.arg)}}}function N(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,N(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function S(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function G(r){if(r||""===r){var n=r[s];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function t(){for(;++o<r.length;)if(i.call(r,o))return t.value=r[o],t.done=!1,t;return t.value=e,t.done=!0,t};return a.next=a}}throw new TypeError(t(r)+" is not iterable")}return v.prototype=x,a(O,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:v,configurable:!0}),v.displayName=l(x,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,l(t,f,"GeneratorFunction")),t.prototype=Object.create(O),t},n.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,c,function(){return this}),n.AsyncIterator=w,n.async=function(t,r,e,o,i){void 0===i&&(i=Promise);var a=new w(p(t,r,e,o),i);return n.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(O),l(O,f,"Generator"),l(O,s,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),n.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=G,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),_},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),S(e),_}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;S(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:G(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},n}function e(t,r){return u(t)||a(t,r)||o(t,r)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,r){if(t){if("string"==typeof t)return i(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function a(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;s=!1}else for(;!(s=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}function u(t){if(Array.isArray(t))return t}var s=this&&this.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e);var o=Object.getOwnPropertyDescriptor(r,e);o&&("get"in o?r.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,o)}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),c=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),f=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)"default"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&s(r,t,e);return c(r,t),r},l=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))(function(o,i){function a(t){try{s(n.next(t))}catch(r){i(r)}}function u(t){try{s(n.throw(t))}catch(r){i(r)}}function s(t){var r;t.done?o(t.value):(r=t.value,r instanceof e?r:new e(function(t){t(r)})).then(a,u)}s((n=n.apply(t,r||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MULTICODEC_ED25519_LENGTH=exports.MULTICODEC_ED25519_HEADER=exports.MULTICODEC_ED25519_BASE=exports.MULTICODEC_ED25519_ENCODING=exports.DID_METHOD=exports.DID_PREFIX=exports.DID_DELIMITER=exports.KEY_PAIR_SEED_LENGTH=exports.DATA_ENCODING=exports.JSON_ENCODING=exports.JWT_ENCODING=exports.JWT_DELIMITER=exports.JWT_IRIDIUM_TYP=exports.JWT_IRIDIUM_ALG=exports.JWTHeaderType=void 0,exports.generateKeyPair=_,exports.decodeJSON=I,exports.encodeJSON=v,exports.encodeIss=x,exports.decodeIss=g,exports.encodeSig=m,exports.decodeSig=T,exports.encodeData=O,exports.decodeData=b,exports.encodeJWT=w,exports.decodeJWT=L,exports.signJWT=N,exports.verifyJWT=C;var p=f(require("@stablelib/ed25519")),h=require("@stablelib/random"),y=require("uint8arrays/concat"),E=require("uint8arrays/to-string"),d=require("uint8arrays/from-string"),D=require("../misc/safejson");function _(t){var r=(0,h.randomBytes)(exports.KEY_PAIR_SEED_LENGTH);return p.generateKeyPairFromSeed(r)}function I(t){return(0,D.safeJsonParse)((0,E.toString)((0,d.fromString)(t,exports.JWT_ENCODING),exports.JSON_ENCODING))}function v(t){return(0,E.toString)((0,d.fromString)((0,D.safeJsonStringify)(t),exports.JSON_ENCODING),exports.JWT_ENCODING)}function x(t){var r=(0,d.fromString)(exports.MULTICODEC_ED25519_HEADER,exports.MULTICODEC_ED25519_ENCODING),e=exports.MULTICODEC_ED25519_BASE+(0,E.toString)((0,y.concat)([r,t]),exports.MULTICODEC_ED25519_ENCODING);return[exports.DID_PREFIX,exports.DID_METHOD,e].join(exports.DID_DELIMITER)}function g(t){var r=e(t.split(exports.DID_DELIMITER),3),n=r[0],o=r[1],i=r[2];if(n!==exports.DID_PREFIX||o!==exports.DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(i.slice(0,1)!==exports.MULTICODEC_ED25519_BASE)throw new Error("Issuer must be a key in mulicodec format");var a=(0,d.fromString)(i.slice(1),exports.MULTICODEC_ED25519_ENCODING);if((0,E.toString)(a.slice(0,2),exports.MULTICODEC_ED25519_ENCODING)!==exports.MULTICODEC_ED25519_HEADER)throw new Error('Issuer must be a public key with type "Ed25519"');var u=a.slice(2);if(u.length!==exports.MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return u}function m(t){return(0,E.toString)(t,exports.JWT_ENCODING)}function T(t){return(0,d.fromString)(t,exports.JWT_ENCODING)}function O(t){return(0,d.fromString)([v(t.header),v(t.payload)].join(exports.JWT_DELIMITER),exports.DATA_ENCODING)}function b(t){var r=(0,E.toString)(t,exports.DATA_ENCODING).split(exports.JWT_DELIMITER);return{header:I(r[0]),payload:I(r[1])}}function w(t){return[v(t.header),v(t.payload),m(t.signature)].join(exports.JWT_DELIMITER)}function L(t){var r=t.split(exports.JWT_DELIMITER);return{header:I(r[0]),payload:I(r[1]),signature:T(r[2]),data:(0,d.fromString)(r.slice(0,2).join(exports.JWT_DELIMITER),exports.DATA_ENCODING)}}function N(t,e,n,o){return l(this,arguments,void 0,function(t,e,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Math.floor(Date.now()/1e3);return r().mark(function a(){var u,s,c,f,l;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u={alg:exports.JWT_IRIDIUM_ALG,typ:exports.JWT_IRIDIUM_TYP},s=x(o.publicKey),f=O({header:u,payload:c={iss:s,sub:t,aud:e,iat:i,exp:i+n}}),l=p.sign(o.secretKey,f),r.abrupt("return",w({header:u,payload:c,signature:l}));case 7:case"end":return r.stop()}},a)})()})}function C(t){return l(this,void 0,void 0,r().mark(function e(){var n,o,i,a,u,s;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=L(t),o=n.header,i=n.payload,a=n.data,u=n.signature,o.alg===exports.JWT_IRIDIUM_ALG&&o.typ===exports.JWT_IRIDIUM_TYP){r.next=3;break}throw new Error("JWT must use EdDSA algorithm");case 3:return s=g(i.iss),r.abrupt("return",p.verify(s,a,u));case 5:case"end":return r.stop()}},e)}))}exports.JWTHeaderType="dapp",exports.JWT_IRIDIUM_ALG="EdDSA",exports.JWT_IRIDIUM_TYP="JWT",exports.JWT_DELIMITER=".",exports.JWT_ENCODING="base64url",exports.JSON_ENCODING="utf8",exports.DATA_ENCODING="utf8",exports.KEY_PAIR_SEED_LENGTH=32,exports.DID_DELIMITER=":",exports.DID_PREFIX="did",exports.DID_METHOD="key",exports.MULTICODEC_ED25519_ENCODING="base58btc",exports.MULTICODEC_ED25519_BASE="z",exports.MULTICODEC_ED25519_HEADER="K36",exports.MULTICODEC_ED25519_LENGTH=32;
},{"@stablelib/ed25519":"gDuy","@stablelib/random":"cEGi","uint8arrays/concat":"EnuL","uint8arrays/to-string":"XOd3","uint8arrays/from-string":"yPb1","../misc/safejson":"vbaN"}],"M4Kr":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return n};var r,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",h=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(r){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new K(n||[]);return a(i,"_invoke",{value:N(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=l;var y="suspendedStart",v="suspendedYield",d="executing",g="completed",m={};function w(){}function E(){}function O(){}var C={};f(C,s,function(){return this});var b=Object.getPrototypeOf,k=b&&b(b(j([])));k&&k!==o&&i.call(k,s)&&(C=k);var _=O.prototype=w.prototype=Object.create(C);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function S(e,r){function n(o,a,c,s){var u=p(e[o],e,a);if("throw"!==u.type){var h=u.arg,f=h.value;return f&&"object"==t(f)&&i.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,c,s)},function(t){n("throw",t,c,s)}):r.resolve(f).then(function(t){h.value=t,c(h)},function(t){return n("throw",t,c,s)})}s(u.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r(function(r,o){n(t,e,r,o)})}return o=o?o.then(i,i):i()}})}function N(t,e,n){var o=y;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=T(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=p(t,e,n);if("normal"===u.type){if(o=n.done?g:v,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=g,n.method="throw",n.arg=u.arg)}}}function T(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,T(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function K(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function j(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(i.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return E.prototype=O,a(_,"constructor",{value:O,configurable:!0}),a(O,"constructor",{value:E,configurable:!0}),E.displayName=f(O,h,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,f(t,h,"GeneratorFunction")),t.prototype=Object.create(_),t},n.awrap=function(t){return{__await:t}},x(S.prototype),f(S.prototype,u,function(){return this}),n.AsyncIterator=S,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(_),f(_,h,"Generator"),f(_,s,function(){return this}),f(_,"toString",function(){return"[object Generator]"}),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=j,K.prototype={constructor:K,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),m}},n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e){var r=a(e,"string");return"symbol"==t(r)?r:r+""}function a(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var c=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionManager=void 0;var s=require("./connect"),u=require("./constants"),h=require("events"),f=require("./storage"),l=require("../utils"),p=require("../crypto"),y=require("./jwt"),v=require("../misc/safejson"),d=function(){return o(function t(){r(this,t),this.events=new h.EventEmitter,this.connectStorage=new f.Storage(u.OKXCONNECTOR_CACHE_KEY);var e=this.getCachedCryptoKeyPair();this.crypto=new p.SessionCrypto(e),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()),this.connector=new s.OKXWalletConnector(u.OKXCONNECTOR_WS_URL),this.sendEnable=!1,this.packageId=0},[{key:"saveCryptoKeyPair",value:function(t){var e=(0,v.safeJsonStringify)(t);this.connectStorage.saveContent(e,u.OKXCONNECTOR_CRYPTO_KEY)}},{key:"getCachedCryptoKeyPair",value:function(){var t=this.connectStorage.getItem(u.OKXCONNECTOR_CRYPTO_KEY),e=null==t?void 0:t.content;return"string"==typeof e?(console.log("get cached crypto key:"),console.log(e),(0,v.safeJsonParse)(e)):(this.connectStorage.clearCache(),null)}},{key:"isWalletPKReady",value:function(){return void 0===this.connectedWalletPK}},{key:"makeJWT",value:function(t){return c(this,void 0,void 0,e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.signJWT)(t,u.OKXCONNECTOR_JWT_SIDE,u.OKXCONNECTOR_JWT_TTL,{publicKey:this.crypto.keyPair.publicKey,secretKey:this.crypto.keyPair.secretKey});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r,this)}))}},{key:"parsePackage",value:function(t){var e=parseInt(t.id);e>this.packageId&&(this.packageId=e),this.events.emit(t.id,t)}},{key:"connect",value:function(){return c(this,void 0,void 0,e().mark(function t(){var r,n,o,i,a=this;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.connectStorage.getItem(u.OKXCONNECTOR_TOKEN_CACHE),n=(0,l.generateTopic)(),null!=r&&(console.log("read last connect id: ".concat(r)),n=r.content),console.log("generate topic token: ".concat(n)),this.connectStorage.saveContent(n,"topic"),t.next=7,this.makeJWT(n);case 7:return o=t.sent,console.log("generate jwt token: ".concat(o)),this.connectStorage.saveContent(o,"jwt"),t.next=12,this.connector.connect();case 12:return this.connector.onOpen(function(){return c(a,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.events.once(this.packageId.toString(),function(){return c(r,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.packageId+=1,this.events.once(this.packageId.toString(),function(){r.packageId+=1}),t.next=4,this.connector.send({id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_SUB,params:{topic:n}});case 4:case"end":return t.stop()}},t,this)}))}),t.next=3,this.connector.send({id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_LOGIN,params:{token:o}});case 3:this.connector.addPackageParse(function(t){r.parsePackage(t)});case 4:case"end":return t.stop()}},t,this)}))}),i={channelId:n,clientId:this.crypto.stringifyKeypair().publicKey},t.abrupt("return",i);case 15:case"end":return t.stop()}},t,this)}))}},{key:"disconnect",value:function(){return c(this,void 0,void 0,e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connector.disconnect();case 2:this.connectStorage.clearCache();case 3:case"end":return t.stop()}},t,this)}))}},{key:"addListener",value:function(t,e,r){var n=this;this.connector.addListener((0,v.safeJsonStringify)(t),function(t){if(n.isWalletPKReady())throw new Error("connection not finish");return n.crypto.decrypt(t,n.connectedWalletPK)},e,r)}},{key:"send",value:function(t){return c(this,void 0,void 0,e().mark(function r(){var n,o,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("messagesend =====> ".concat(t)),!this.isWalletPKReady()){e.next=3;break}throw new Error("connection not finish");case 3:return n=this.crypto.encrypt(t,this.connectedWalletPK),o=this.connectStorage.getItem("topic"),i={id:this.packageId.toString(),method:u.CONNECT_METHOD_PUBLISH,jsonrpc:u.CONNECT_JSONRPC_VER,params:{message:{messageId:(0,l.hashKey)(n),topic:o,message:n,ttl:u.OKXCONNECTOR_MESSAGE_TTL}}},e.next=8,this.connector.send(i);case 8:case"end":return e.stop()}},r,this)}))}},{key:"getCryptoInfo",value:function(){var t=this.crypto.stringifyKeypair(),e=this.connectStorage.getItem("jwt");return{kp:t,topic:this.connectStorage.getItem("topic"),jwt:null==e?void 0:e.content}}},{key:"cleanCache",value:function(){return c(this,void 0,void 0,e().mark(function t(){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.connectStorage.clearCache();case 1:case"end":return t.stop()}},t,this)}))}}])}();exports.ConnectionManager=d;
},{"./connect":"KoIY","./constants":"Eamx","events":"FRpO","./storage":"Fk9w","../utils":"RiUx","../crypto":"utrV","./jwt":"i86f","../misc/safejson":"vbaN"}],"Lds1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tonConnectSdkVersion=void 0,exports.tonConnectSdkVersion="3.0.0";
},{}],"nlcS":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t){var n=i(t,"string");return"symbol"==e(n)?n:n+""}function i(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InMemoryStorage=void 0;var u=function(){function e(){t(this,e),this.storage={}}return r(e,[{key:"length",get:function(){return Object.keys(this.storage).length}},{key:"clear",value:function(){this.storage={}}},{key:"getItem",value:function(e){var t;return null!==(t=this.storage[e])&&void 0!==t?t:null}},{key:"key",value:function(e){var t,n=Object.keys(this.storage);return e<0||e>=n.length?null:null!==(t=n[e])&&void 0!==t?t:null}},{key:"removeItem",value:function(e){delete this.storage[e]}},{key:"setItem",value:function(e,t){this.storage[e]=t}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}])}();exports.InMemoryStorage=u;
},{}],"rf53":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWindow=r,exports.tryGetWindowKeys=o,exports.getDocument=i,exports.getWebPageManifest=u,exports.tryGetLocalStorage=c;var n=require("../errors"),t=require("../storage/models/in-memory-storage");function r(){if("undefined"!=typeof window)return window}function o(){var e=r();if(!e)return[];try{return Object.keys(e)}catch(n){return[]}}function i(){if("undefined"!=typeof document)return document}function u(){var e,n=null===(e=r())||void 0===e?void 0:e.location.origin;return n?n+"/tonconnect-manifest.json":""}function c(){if(s())return localStorage;if(a())throw new n.TonConnectError("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return t.InMemoryStorage.getInstance()}function s(){try{return"undefined"!=typeof localStorage}catch(e){return!1}}function a(){return void 0!==e&&null!=e.versions&&null!=e.versions.node}
},{"../errors":"bdNY","../storage/models/in-memory-storage":"nlcS","process":"pBGv"}],"CrO5":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return n};var e,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(e){s=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof w?r:w,i=Object.create(o.prototype),c=new N(n||[]);return a(i,"_invoke",{value:k(t,e,c)}),i}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var y="suspendedStart",v="suspendedYield",d="executing",g="completed",m={};function w(){}function b(){}function x(){}var L={};s(L,u,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(T([])));S&&S!==o&&i.call(S,u)&&(L=S);var _=x.prototype=w.prototype=Object.create(L);function j(t){["next","throw","return"].forEach(function(r){s(t,r,function(t){return this._invoke(r,t)})})}function O(r,e){function n(o,a,c,u){var f=p(r[o],r,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==t(s)&&i.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(s).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(f.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function k(t,r,n){var o=y;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var f=p(t,r,n);if("normal"===f.type){if(o=n.done?g:v,f.arg===m)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(o=g,n.method="throw",n.arg=f.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function G(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function I(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(G,this),this.reset(!0)}function T(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function t(){for(;++o<r.length;)if(i.call(r,o))return t.value=r[o],t.done=!1,t;return t.value=e,t.done=!0,t};return a.next=a}}throw new TypeError(t(r)+" is not iterable")}return b.prototype=x,a(_,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=s(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},n.awrap=function(t){return{__await:t}},j(O.prototype),s(O.prototype,f,function(){return this}),n.AsyncIterator=O,n.async=function(t,r,e,o,i){void 0===i&&(i=Promise);var a=new O(h(t,r,e,o),i);return n.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(_),s(_,l,"Generator"),s(_,u,function(){return this}),s(_,"toString",function(){return"[object Generator]"}),n.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=T,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),f=i.call(a,"finallyLoc");if(u&&f){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!f)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),I(e),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;I(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},n}function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function n(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(r){var e=a(r,"string");return"symbol"==t(e)?e:e+""}function a(r,e){if("object"!=t(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}var c=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(r){i(r)}}function c(t){try{u(n.throw(t))}catch(r){i(r)}}function u(t){var r;t.done?o(t.value):(r=t.value,r instanceof e?r:new e(function(t){t(r)})).then(a,c)}u((n=n.apply(t,r||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultStorage=void 0;var u=require("../utils/web-api"),f=function(){return o(function t(){e(this,t),this.localStorage=(0,u.tryGetLocalStorage)()},[{key:"getItem",value:function(t){return c(this,void 0,void 0,r().mark(function e(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.localStorage.getItem(t));case 1:case"end":return r.stop()}},e,this)}))}},{key:"removeItem",value:function(t){return c(this,void 0,void 0,r().mark(function e(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:this.localStorage.removeItem(t);case 1:case"end":return r.stop()}},e,this)}))}},{key:"setItem",value:function(t,e){return c(this,void 0,void 0,r().mark(function n(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:this.localStorage.setItem(t,e);case 1:case"end":return r.stop()}},n,this)}))}}])}();exports.DefaultStorage=f;
},{"../utils/web-api":"rf53"}],"N3tw":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return n};var e,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(e){s=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof w?r:w,i=Object.create(o.prototype),c=new N(n||[]);return a(i,"_invoke",{value:P(t,e,c)}),i}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var y="suspendedStart",v="suspendedYield",d="executing",g="completed",m={};function w(){}function b(){}function x(){}var L={};s(L,u,function(){return this});var E=Object.getPrototypeOf,_=E&&E(E(F([])));_&&_!==o&&i.call(_,u)&&(L=_);var O=x.prototype=w.prototype=Object.create(L);function j(t){["next","throw","return"].forEach(function(r){s(t,r,function(t){return this._invoke(r,t)})})}function S(r,e){function n(o,a,c,u){var l=p(r[o],r,a);if("throw"!==l.type){var f=l.arg,s=f.value;return s&&"object"==t(s)&&i.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(s).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(l.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function P(t,r,n){var o=y;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=p(t,r,n);if("normal"===l.type){if(o=n.done?g:v,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=g,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function F(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function t(){for(;++o<r.length;)if(i.call(r,o))return t.value=r[o],t.done=!1,t;return t.value=e,t.done=!0,t};return a.next=a}}throw new TypeError(t(r)+" is not iterable")}return b.prototype=x,a(O,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=s(x,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,f,"GeneratorFunction")),t.prototype=Object.create(O),t},n.awrap=function(t){return{__await:t}},j(S.prototype),s(S.prototype,l,function(){return this}),n.AsyncIterator=S,n.async=function(t,r,e,o,i){void 0===i&&(i=Promise);var a=new S(h(t,r,e,o),i);return n.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(O),s(O,f,"Generator"),s(O,u,function(){return this}),s(O,"toString",function(){return"[object Generator]"}),n.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=F,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(G),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:F(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},n}var e=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(r){i(r)}}function c(t){try{u(n.throw(t))}catch(r){i(r)}}function u(t){var r;t.done?o(t.value):(r=t.value,r instanceof e?r:new e(function(t){t(r)})).then(a,c)}u((n=n.apply(t,r||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.delay=o;var n=require("../errors");function o(t,o){return e(this,void 0,void 0,r().mark(function e(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r,e){var i,a;if(null!==(i=null==o?void 0:o.signal)&&void 0!==i&&i.aborted)e(new n.TonConnectError("Delay aborted"));else{var c=setTimeout(function(){return r()},t);null===(a=null==o?void 0:o.signal)||void 0===a||a.addEventListener("abort",function(){clearTimeout(c),e(new n.TonConnectError("Delay aborted"))})}}));case 1:case"end":return r.stop()}},e)}))}
},{"../errors":"bdNY"}],"XDWG":[function(require,module,exports) {
"use strict";function t(){t=function(){return n};var e,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(e){s=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof w?r:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:S(t,e,c)}),i}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var y="suspendedStart",v="suspendedYield",d="executing",g="completed",m={};function w(){}function b(){}function x(){}var L={};s(L,u,function(){return this});var E=Object.getPrototypeOf,_=E&&E(E(F([])));_&&_!==o&&i.call(_,u)&&(L=_);var O=x.prototype=w.prototype=Object.create(L);function j(t){["next","throw","return"].forEach(function(r){s(t,r,function(t){return this._invoke(r,t)})})}function k(t,e){function n(o,a,c,u){var f=p(t[o],t,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==r(s)&&i.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(s).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(f.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function S(t,r,n){var o=y;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var f=p(t,r,n);if("normal"===f.type){if(o=n.done?g:v,f.arg===m)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(o=g,n.method="throw",n.arg=f.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function G(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function N(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(G,this),this.reset(!0)}function F(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(i.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return b.prototype=x,a(O,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=s(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},n.awrap=function(t){return{__await:t}},j(k.prototype),s(k.prototype,f,function(){return this}),n.AsyncIterator=k,n.async=function(t,r,e,o,i){void 0===i&&(i=Promise);var a=new k(h(t,r,e,o),i);return n.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(O),s(O,l,"Generator"),s(O,u,function(){return this}),s(O,"toString",function(){return"[object Generator]"}),n.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=F,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),f=i.call(a,"finallyLoc");if(u&&f){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!f)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),N(e),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;N(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:F(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},n}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var e=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(r){i(r)}}function c(t){try{u(n.throw(t))}catch(r){i(r)}}function u(t){var r;t.done?o(t.value):(r=t.value,r instanceof e?r:new e(function(t){t(r)})).then(a,c)}u((n=n.apply(t,r||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.callForSuccess=i;var n=require("../errors"),o=require("./delay");function i(i,a){return e(this,void 0,void 0,t().mark(function e(){var c,u,f,l,s,h;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f=null!==(c=null==a?void 0:a.attempts)&&void 0!==c?c:3,l=null!==(u=null==a?void 0:a.delayMs)&&void 0!==u?u:800,"function"==typeof i){t.next=4;break}throw new n.TonConnectError("Expected a function, got ".concat(r(i)));case 4:s=0;case 5:if(!(s<f)){t.next=21;break}return t.prev=6,t.next=9,i();case 9:return t.abrupt("return",t.sent);case 12:if(t.prev=12,t.t0=t.catch(6),h=t.t0,!(++s<f)){t.next=19;break}return t.next=19,(0,o.delay)(l);case 19:t.next=5;break;case 21:throw h;case 22:case"end":return t.stop()}},e,null,[[6,12]])}))}
},{"../errors":"bdNY","./delay":"N3tw"}],"QyLz":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return n};var r,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(r){l=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new N(n||[]);return a(i,"_invoke",{value:k(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var y="suspendedStart",d="suspendedYield",v="executing",g="completed",m={};function w(){}function b(){}function x(){}var L={};l(L,u,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(I([])));S&&S!==o&&i.call(S,u)&&(L=S);var _=x.prototype=w.prototype=Object.create(L);function j(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(e,r){function n(o,a,c,u){var s=p(e[o],e,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==t(l)&&i.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(l).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(s.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r(function(r,o){n(t,e,r,o)})}return o=o?o.then(i,i):i()}})}function k(t,e,n){var o=y;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=q(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=p(t,e,n);if("normal"===s.type){if(o=n.done?g:d,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function q(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,q(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(i.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return b.prototype=x,a(_,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,l(t,f,"GeneratorFunction")),t.prototype=Object.create(_),t},n.awrap=function(t){return{__await:t}},j(O.prototype),l(O.prototype,s,function(){return this}),n.AsyncIterator=O,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new O(h(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(_),l(_,f,"Generator"),l(_,u,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=I,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),m}},n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e){var r=a(e,"string");return"symbol"==t(r)?r:r+""}function a(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var c=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(e){i(e)}}function c(t){try{u(n.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,c)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Engine=void 0;var u=require("./storage/bridge-connection-storage"),s=require("./storage/default-storage"),f=require("../../utils/connect/connectionManager"),l=require("./utils/call-for-success"),h=function(){return o(function t(){r(this,t),this.pendingRequests=new Map,this.disconnectListener=[],this.connectionManager=new f.ConnectionManager,this.connectionStorage=new u.BridgeConnectionStorage(new s.DefaultStorage),this.connectionManager.addListener("ton_sdk_response",this.handleResponse,function(){})},[{key:"addDisconnectListener",value:function(t){this.disconnectListener.push(t)}},{key:"disconnect",value:function(){this.disconnectListener.forEach(function(t){return t()}),this.disconnectListener=[]}},{key:"getRequestId",value:function(){return c(this,void 0,void 0,e().mark(function t(){var r;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connectionStorage.getNextRpcRequestId();case 2:return r=t.sent.toString(),t.next=5,this.connectionStorage.increaseNextRpcRequestId();case 5:return console.log("getRequestId   =====>   ".concat(r)),t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)}))}},{key:"bindRequestForPromise",value:function(t,e){this.pendingRequests.set(t,e)}},{key:"send",value:function(t,r,n){return c(this,void 0,void 0,e().mark(function o(){var i,a=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRequestId();case 2:i=e.sent,(0,l.callForSuccess)(function(){return a.connectionManager.send(JSON.stringify(Object.assign(Object.assign({},t),{requestId:i})))},n),this.bindRequestForPromise(i,r);case 5:case"end":return e.stop()}},o,this)}))}},{key:"handleResponse",value:function(t){if("requestId"in t){var e=t.requestId,r=this.pendingRequests.get(e);r?(r(t),this.pendingRequests.delete(e)):"disconnect"===t.method&&this.disconnect()}}}])}();exports.Engine=h;
},{"./storage/bridge-connection-storage":"IFT9","./storage/default-storage":"CrO5","../../utils/connect/connectionManager":"M4Kr","./utils/call-for-success":"XDWG"}],"Mmw4":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var e,t=require("buffer").Buffer;function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return s(e)||c(e,t)||i(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function s(e){if(Array.isArray(e))return e}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new P(r||[]);return i(a,"_invoke",{value:C(e,n,c)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p="suspendedStart",v="suspendedYield",y="executing",g="completed",m={};function w(){}function b(){}function x(){}var S={};f(S,c,function(){return this});var k=Object.getPrototypeOf,L=k&&k(k(N([])));L&&L!==r&&o.call(L,c)&&(S=L);var E=x.prototype=w.prototype=Object.create(S);function I(e){["next","throw","return"].forEach(function(t){f(e,t,function(e){return this._invoke(t,e)})})}function q(e,t){function r(i,a,c,s){var u=d(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,c,s)},function(e){r("throw",e,c,s)}):t.resolve(f).then(function(e){l.value=e,c(l)},function(e){return r("throw",e,c,s)})}s(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t(function(t,o){r(e,n,t,o)})}return a=a?a.then(o,o):o()}})}function C(t,n,r){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?g:v,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},I(q.prototype),f(q.prototype,s,function(){return this}),t.AsyncIterator=q,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new q(h(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},I(E),f(E,l,"Generator"),f(E,c,function(){return this}),f(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=p(e,"string");return"symbol"==n(t)?t:t+""}function p(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var v=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BridgeProvider=void 0;var y=require("../../../protocol"),g=require("./models/bridge-connection"),m=require("../../storage/bridge-connection-storage"),w=require("../../utils/log"),b=require("../../../../utils/connect/connectionManager"),x=require("../../constants/version"),S=require("../../engine"),k=require("../../wallets-list-manager"),L=function(){function e(t,n){l(this,e),this.storage=t,this.type="http",this.standardUniversalLink="https://www.okx.com/download",this.standardDeeplink="okx://web3/wallet/okxconnect",this.listeners=[],this.engine=new S.Engine,this.connectionStorage=new m.BridgeConnectionStorage(t),this.walletConnectionSource=n}return h(e,[{key:"connect",value:function(e,n){return v(this,void 0,void 0,u().mark(function r(){var o,i,a,c,s,l,f,h,d,p=this;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("provider-----message>>>",e),console.log("provider-----redirect>>>",n),this.connectManager=new b.ConnectionManager,r.prev=3,r.next=6,this.connectManager.connect();case 6:return o=r.sent,r.next=9,this.engine.getRequestId();case 9:i=r.sent,a={protocolVer:x.tonConnectSdkVersion,channelId:o.channelId,clientId:o.clientId,requestId:i,dappInfo:e.dappInfo,requests:e.items,redirect:null!=n?n:""},console.log("provider-----connectRequest>>>",a),c=JSON.stringify(a),console.log("provider-----connectRequestStr>>>",c),s=t.from(c).toString("base64"),console.log("provider-----base64Encoded>>>",s),l="".concat(this.standardDeeplink,"?param=").concat(s),console.log("provider-----deeplinkUrl>>>",l),f=encodeURIComponent(l),h="universalLink"in this.walletConnectionSource&&this.walletConnectionSource.universalLink?this.walletConnectionSource.universalLink:this.standardUniversalLink,console.log("provider-----universalLink>>>",h),d="".concat(h,"?deeplink=").concat(f),console.log("provider-----fullUrl>>>",d),this.connectionStorage.storeConnection({type:"http",connectionSource:this.walletConnectionSource,channelId:o.clientId}).then(function(){return v(p,void 0,void 0,u().mark(function e(){var t,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("跳转链接-----\x3e>>",d),this.engine.bindRequestForPromise(i,this.connectListener.bind(this)),this.engine.addDisconnectListener(this.disconnectListener.bind(this)),t={name:"ton_addr",address:"这是地址aaa",network:y.CHAIN.MAINNET,walletStateInit:"walletStateInit",publicKey:"Pub"},n={requestId:"0",method:"connect",payload:{response:[t],wallet:{platform:"iphone",appName:"appName-Ton",appVersion:"1.0.0",maxProtocolVersion:2,features:[{name:"SendTransaction",maxMessages:4}]}}},console.log("测试结果数据---\x3e>>",n);case 7:case"end":return e.stop()}},e,this)}))}),r.next=29;break;case 26:r.prev=26,r.t0=r.catch(3),console.error("Error connecting:",r.t0);case 29:case"end":return r.stop()}},r,this,[[3,26]])}))}},{key:"toQueryString",value:function(e){for(var t=new URLSearchParams,o=function(){var e=r(a[i],2),o=e[0],c=e[1];if(null!=c)if("object"!==n(c)||Array.isArray(c))Array.isArray(c)?c.forEach(function(e,n){t.append("".concat(o,"[").concat(n,"]"),String(e))}):t.append(o,String(c));else for(var s=0,u=Object.entries(c);s<u.length;s++){var l=r(u[s],2),f=l[0],h=l[1];t.append("".concat(o,".").concat(f),String(h))}},i=0,a=Object.entries(e);i<a.length;i++)o();return t.toString()}},{key:"listen",value:function(e){var t=this;return this.listeners.push(e),function(){return t.listeners=t.listeners.filter(function(t){return t!==e})}}},{key:"closeConnection",value:function(){this.listeners=[]}},{key:"disconnectListener",value:function(){return v(this,void 0,void 0,u().mark(function e(){var t;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.listeners=[],e.next=3,this.connectionStorage.removeConnection();case 3:t={event:"disconnect",requestId:Number(1),payload:{}},this.listeners.forEach(function(e){return e(t)});case 5:case"end":return e.stop()}},e,this)}))}},{key:"connectListener",value:function(e){return v(this,void 0,void 0,u().mark(function t(){var n,r,o,i,a,c,s,l,f,h,d;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((0,w.logDebug)("Wallet message received:",e),void 0===e.requestId){t.next=8;break}return t.next=4,this.connectionStorage.getLastWalletEventId();case 4:if(!(void 0!==(n=t.sent)&&Number(e.requestId)<=n)){t.next=8;break}return(0,w.logError)("Received event id (=".concat(e.requestId,") must be greater than stored last wallet event id (=").concat(n,") ")),t.abrupt("return");case 8:if(r=this.listeners,"connect"!==e.method){t.next=27;break}return o=e.payload.response.find(function(e){return"ton_addr"===e.name}),i=e.payload.response.find(function(e){return"ton_proof"===e.name}),a=e.payload.wallet,c=[],o&&c.push(o),i&&c.push(i),t.next=18,this.connectionStorage.getConnection();case 18:return s=t.sent,l=s&&s.connectionSource?s.connectionSource:this.walletConnectionSource,f={type:"http",lastWalletEventId:Number(e.requestId),connectEvent:{event:"connect",payload:{items:c,device:a}},connectionSource:l,channelId:null==s?void 0:s.channelId,nextRpcRequestId:0},t.next=23,this.connectionStorage.storeConnection(f);case 23:h={event:"connect",requestId:Number(e.requestId),payload:f.connectEvent.payload},r.forEach(function(e){return e(h)}),t.next=32;break;case 27:if("connect_error"!==e.method){t.next=32;break}return t.next=30,this.connectionStorage.storeLastWalletEventId(Number(e.requestId));case 30:d={event:"connect_error",requestId:Number(e.requestId),payload:e.payload},r.forEach(function(e){return e(d)});case 32:case"end":return t.stop()}},t,this)}))}},{key:"removeBridgeAndSession",value:function(){return v(this,void 0,void 0,u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.listeners=[],e.next=3,this.connectionStorage.removeConnection();case 3:case"end":return e.stop()}},e,this)}))}},{key:"restoreConnection",value:function(){return v(this,void 0,void 0,u().mark(function e(){var t,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectionStorage.getHttpConnection();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!(0,g.isPendingConnectionHttp)(t)){e.next=7;break}return e.abrupt("return");case 7:if(!t.channelId){e.next=13;break}n={event:"connect",requestId:Number(0),payload:t.connectEvent.payload},this.listeners.forEach(function(e){return e(n)}),t.channelId,e.next=16;break;case 13:return this.listeners=[],e.next=16,this.connectionStorage.removeConnection();case 16:case"end":return e.stop()}},e,this)}))}},{key:"disconnect",value:function(){return v(this,void 0,void 0,u().mark(function e(){var t=this;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return v(t,void 0,void 0,u().mark(function t(){var n,r,o=this;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,r=function(){n||(n=!0,o.removeBridgeAndSession().then(e))},t.prev=2,t.next=5,this.sendRequest({method:"disconnect",params:[]},{onRequestSent:r,attempts:1});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),(0,w.logDebug)("Disconnect error:",t.t0),n||this.removeBridgeAndSession().then(e);case 11:return t.prev=11,r(),t.finish(11);case 14:case"end":return t.stop()}},t,this,[[2,7,11,14]])}))}));case 1:case"end":return e.stop()}},e)}))}},{key:"sendRequest",value:function(e,t){var n=this;return console.log("sendTransaction  sendRequest"),new Promise(function(r,o){return v(n,void 0,void 0,u().mark(function n(){var o;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.engine.send(e,function(e){r(e)},{attempts:null==t?void 0:t.attempts});case 2:null===(o=null==t?void 0:t.onRequestSent)||void 0===o||o.call(t);case 3:case"end":return n.stop()}},n,this)}))})}}],[{key:"fromStorage",value:function(t){return v(this,void 0,void 0,u().mark(function n(){var r,o;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=new m.BridgeConnectionStorage(t),n.next=3,r.getHttpConnection();case 3:if(o=n.sent,!(0,g.isPendingConnectionHttp)(o)){n.next=6;break}return n.abrupt("return",null);case 6:return n.abrupt("return",new e(t,{bridgeUrl:(new k.WalletsListManager).getWallets()[0].bridgeUrl}));case 7:case"end":return n.stop()}},n)}))}}])}();exports.BridgeProvider=L;
},{"../../../protocol":"I0lp","./models/bridge-connection":"nccz","../../storage/bridge-connection-storage":"IFT9","../../utils/log":"vYZ0","../../../../utils/connect/connectionManager":"M4Kr","../../constants/version":"Lds1","../../engine":"QyLz","../../wallets-list-manager":"ptWY","buffer":"peL6"}],"hvK2":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=u(e,"string");return"symbol"==t(r)?r:r+""}function u(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function i(t,e,r){return e=p(e),c(t,l()?Reflect.construct(e,r||[],p(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WalletNotSupportFeatureError=void 0;var s=require("../ton-connect.error"),b=function(t){function r(){return e(this,r),i(this,r,arguments)}return a(r,s.TonConnectError),o(r,[{key:"info",get:function(){return"Wallet doesn't support requested feature method."}}])}();exports.WalletNotSupportFeatureError=b;
},{"../ton-connect.error":"DXpI"}],"ycdw":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkSendTransactionSupport=o;var t=require("../errors/wallet/wallet-not-support-feature.error"),r=require("./log");function o(o,n){var a=o.includes("SendTransaction"),s=o.find(function(t){return t&&"object"===e(t)&&"SendTransaction"===t.name});if(!a&&!s)throw new t.WalletNotSupportFeatureError("Wallet doesn't support SendTransaction feature.");if(s&&void 0!==s.maxMessages){if(s.maxMessages<n.requiredMessagesNumber)throw new t.WalletNotSupportFeatureError("Wallet is not able to handle such SendTransaction request. Max support messages number is ".concat(s.maxMessages,", but ").concat(n.requiredMessagesNumber," is required."))}else(0,r.logWarning)("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}
},{"../errors/wallet/wallet-not-support-feature.error":"hvK2","./log":"vYZ0"}],"CjcA":[function(require,module,exports) {
"use strict";function n(){return{type:"request-version"}}function e(n){return{type:"response-version",version:n}}function t(n){return{ton_connect_sdk_lib:n.ton_connect_sdk_lib,ton_connect_ui_lib:n.ton_connect_ui_lib}}function o(n,e){var o,r,s,i,c,u,l,a,d=(null===(o=null==e?void 0:e.connectItems)||void 0===o?void 0:o.tonProof)&&"proof"in e.connectItems.tonProof?"ton_proof":"ton_addr";return{wallet_address:null!==(s=null===(r=null==e?void 0:e.account)||void 0===r?void 0:r.address)&&void 0!==s?s:null,wallet_type:null!==(i=null==e?void 0:e.device.appName)&&void 0!==i?i:null,wallet_version:null!==(c=null==e?void 0:e.device.appVersion)&&void 0!==c?c:null,auth_type:d,custom_data:Object.assign({chain_id:null!==(l=null===(u=null==e?void 0:e.account)||void 0===u?void 0:u.chain)&&void 0!==l?l:null,provider:null!==(a=null==e?void 0:e.provider)&&void 0!==a?a:null},t(n))}}function r(n){return{type:"connection-started",custom_data:t(n)}}function s(n,e){return Object.assign({type:"connection-completed",is_success:!0},o(n,e))}function i(n,e,o){return{type:"connection-error",is_success:!1,error_message:e,error_code:null!=o?o:null,custom_data:t(n)}}function c(n){return{type:"connection-restoring-started",custom_data:t(n)}}function u(n,e){return Object.assign({type:"connection-restoring-completed",is_success:!0},o(n,e))}function l(n,e){return{type:"connection-restoring-error",is_success:!1,error_message:e,custom_data:t(n)}}function a(n,e){var t,o,r,s;return{valid_until:null!==(t=String(e.validUntil))&&void 0!==t?t:null,from:null!==(s=null!==(o=e.from)&&void 0!==o?o:null===(r=null==n?void 0:n.account)||void 0===r?void 0:r.address)&&void 0!==s?s:null,messages:e.messages.map(function(n){var e,t;return{address:null!==(e=n.address)&&void 0!==e?e:null,amount:null!==(t=n.amount)&&void 0!==t?t:null}})}}function d(n,e,t){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},o(n,e)),a(e,t))}function v(n,e,t,r){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:r.boc},o(n,e)),a(e,t))}function p(n,e,t,r,s){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:r,error_code:null!=s?s:null},o(n,e)),a(e,t))}function _(n,e,t){return Object.assign({type:"disconnection",scope:t},o(n,e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRequestVersionEvent=n,exports.createResponseVersionEvent=e,exports.createVersionInfo=t,exports.createConnectionStartedEvent=r,exports.createConnectionCompletedEvent=s,exports.createConnectionErrorEvent=i,exports.createConnectionRestoringStartedEvent=c,exports.createConnectionRestoringCompletedEvent=u,exports.createConnectionRestoringErrorEvent=l,exports.createTransactionSentForSignatureEvent=d,exports.createTransactionSignedEvent=v,exports.createTransactionSigningFailedEvent=p,exports.createDisconnectionEvent=_;
},{}],"taSB":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return n};var e,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(e){l=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof g?r:g,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:P(t,e,c)}),i}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var v="suspendedStart",y="suspendedYield",d="executing",w="completed",m={};function g(){}function b(){}function E(){}var x={};l(x,u,function(){return this});var L=Object.getPrototypeOf,_=L&&L(L(F([])));_&&_!==o&&i.call(_,u)&&(x=_);var j=E.prototype=g.prototype=Object.create(x);function O(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function k(r,e){function n(o,a,c,u){var f=p(r[o],r,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==t(l)&&i.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(l).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(f.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function P(t,r,n){var o=v;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===w){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=w,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var f=p(t,r,n);if("normal"===f.type){if(o=n.done?w:y,f.arg===m)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(o=w,n.method="throw",n.arg=f.arg)}}}function S(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function N(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function F(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function t(){for(;++o<r.length;)if(i.call(r,o))return t.value=r[o],t.done=!1,t;return t.value=e,t.done=!0,t};return a.next=a}}throw new TypeError(t(r)+" is not iterable")}return b.prototype=E,a(j,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:b,configurable:!0}),b.displayName=l(E,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,l(t,s,"GeneratorFunction")),t.prototype=Object.create(j),t},n.awrap=function(t){return{__await:t}},O(k.prototype),l(k.prototype,f,function(){return this}),n.AsyncIterator=k,n.async=function(t,r,e,o,i){void 0===i&&(i=Promise);var a=new k(h(t,r,e,o),i);return n.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},O(j),l(j,s,"Generator"),l(j,u,function(){return this}),l(j,"toString",function(){return"[object Generator]"}),n.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=F,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(G),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),f=i.call(a,"finallyLoc");if(u&&f){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!f)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:F(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},n}function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function n(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(r){var e=a(r,"string");return"symbol"==t(e)?e:e+""}function a(r,e){if("object"!=t(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}var c=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(r){i(r)}}function c(t){try{u(n.throw(t))}catch(r){i(r)}}function u(t){var r;t.done?o(t.value):(r=t.value,r instanceof e?r:new e(function(t){t(r)})).then(a,c)}u((n=n.apply(t,r||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserEventDispatcher=void 0;var u=require("../utils/web-api"),f=function(){return o(function t(){e(this,t),this.window=(0,u.getWindow)()},[{key:"dispatchEvent",value:function(t,e){return c(this,void 0,void 0,r().mark(function n(){var o,i;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=new CustomEvent(t,{detail:e}),null===(o=this.window)||void 0===o||o.dispatchEvent(i);case 2:case"end":return r.stop()}},n,this)}))}},{key:"addEventListener",value:function(t,e,n){return c(this,void 0,void 0,r().mark(function o(){var i,a=this;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return null===(i=this.window)||void 0===i||i.addEventListener(t,e,n),r.abrupt("return",function(){var r;return null===(r=a.window)||void 0===r?void 0:r.removeEventListener(t,e)});case 2:case"end":return r.stop()}},o,this)}))}}])}();exports.BrowserEventDispatcher=f;
},{"../utils/web-api":"rf53"}],"fMZN":[function(require,module,exports) {
var define;
var t;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){"use strict";n=function(){return r};var t,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",h=c.toStringTag||"@@toStringTag";function v(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{v({},"")}catch(t){v=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),c=new P(r||[]);return a(i,"_invoke",{value:A(t,n,c)}),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var p="suspendedStart",y="suspendedYield",d="executing",g="completed",w={};function m(){}function E(){}function b(){}var k={};v(k,s,function(){return this});var x=Object.getPrototypeOf,L=x&&x(x(U([])));L&&L!==o&&i.call(L,s)&&(k=L);var S=b.prototype=m.prototype=Object.create(k);function C(t){["next","throw","return"].forEach(function(e){v(t,e,function(t){return this._invoke(e,t)})})}function _(t,n){function r(o,a,c,s){var u=l(t[o],t,a);if("throw"!==u.type){var h=u.arg,v=h.value;return v&&"object"==e(v)&&i.call(v,"__await")?n.resolve(v.__await).then(function(t){r("next",t,c,s)},function(t){r("throw",t,c,s)}):n.resolve(v).then(function(t){h.value=t,c(h)},function(t){return r("throw",t,c,s)})}s(u.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new n(function(n,o){r(t,e,n,o)})}return o=o?o.then(i,i):i()}})}function A(e,n,r){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=T(c,r);if(s){if(s===w)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=l(e,n,r);if("normal"===u.type){if(o=r.done?g:y,u.arg===w)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),w;var i=l(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,w;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,w):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,w)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function U(n){if(n||""===n){var r=n[s];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,a=function e(){for(;++o<n.length;)if(i.call(n,o))return e.value=n[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(e(n)+" is not iterable")}return E.prototype=b,a(S,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:E,configurable:!0}),E.displayName=v(b,h,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,v(t,h,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},C(_.prototype),v(_.prototype,u,function(){return this}),r.AsyncIterator=_,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new _(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},C(S),v(S,h,"Generator"),v(S,s,function(){return this}),v(S,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=U,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:U(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),w}},r}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var n=c(t,"string");return"symbol"==e(n)?n:n+""}function c(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TonConnectTracker=void 0;var u=require("./types"),h=require("./browser-event-dispatcher"),v=function(){return i(function t(e){r(this,t),this.eventPrefix="ton-connect-",this.tonConnectUiVersion=null,this.eventDispatcher=new h.BrowserEventDispatcher,this.tonConnectSdkVersion=e.tonConnectSdkVersion,this.init().catch()},[{key:"version",get:function(){return(0,u.createVersionInfo)({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}},{key:"init",value:function(){return s(this,void 0,void 0,n().mark(function t(){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.setRequestVersionHandler();case 3:return t.next=5,this.requestTonConnectUiVersion();case 5:this.tonConnectUiVersion=t.sent,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}},t,this,[[0,8]])}))}},{key:"setRequestVersionHandler",value:function(){return s(this,void 0,void 0,n().mark(function t(){var e=this;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.eventDispatcher.addEventListener("ton-connect-request-version",function(){return s(e,void 0,void 0,n().mark(function t(){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.eventDispatcher.dispatchEvent("ton-connect-response-version",(0,u.createResponseVersionEvent)(this.tonConnectSdkVersion));case 2:case"end":return t.stop()}},t,this)}))});case 2:case"end":return t.stop()}},t,this)}))}},{key:"requestTonConnectUiVersion",value:function(){return s(this,void 0,void 0,n().mark(function t(){var e=this;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,r){return s(e,void 0,void 0,n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.eventDispatcher.addEventListener("ton-connect-ui-response-version",function(e){t(e.detail.version)},{once:!0});case 3:return e.next=5,this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version",(0,u.createRequestVersionEvent)());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}))}));case 1:case"end":return t.stop()}},t)}))}},{key:"dispatchUserActionEvent",value:function(t){try{this.eventDispatcher.dispatchEvent("".concat(this.eventPrefix).concat(t.type),t).catch()}catch(e){}}},{key:"trackConnectionStarted",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createConnectionStartedEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}},{key:"trackConnectionCompleted",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createConnectionCompletedEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}},{key:"trackConnectionError",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createConnectionErrorEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}},{key:"trackConnectionRestoringStarted",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createConnectionRestoringStartedEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}},{key:"trackConnectionRestoringCompleted",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createConnectionRestoringCompletedEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}},{key:"trackConnectionRestoringError",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createConnectionRestoringErrorEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}},{key:"trackDisconnection",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createDisconnectionEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}},{key:"trackTransactionSentForSignature",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createTransactionSentForSignatureEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}},{key:"trackTransactionSigned",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createTransactionSignedEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}},{key:"trackTransactionSigningFailed",value:function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=u.createTransactionSigningFailedEvent.apply(void 0,[this.version].concat(e));this.dispatchUserActionEvent(r)}catch(o){}}}])}();exports.TonConnectTracker=v;
},{"./types":"CjcA","./browser-event-dispatcher":"taSB"}],"sbjx":[function(require,module,exports) {
"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function t(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function e(r,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,n(o.key),o)}}function o(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}function n(t){var e=i(t,"string");return"symbol"==r(e)?e:e+""}function i(t,e){if("object"!=r(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RpcParser=void 0;var u=function(){return o(function r(){t(this,r)},[{key:"isError",value:function(r){return"error"in r}}])}();exports.RpcParser=u;
},{}],"wzT1":[function(require,module,exports) {
"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(e)}function e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function t(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,l(n.key),n)}}function n(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function o(r,e,t){return e=f(e),i(r,c()?Reflect.construct(e,t||[],f(r).constructor):e.apply(r,t))}function i(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function c(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(r){}return(c=function(){return!!r})()}function f(r){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function a(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&s(r,e)}function s(r,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r})(r,e)}function p(r,e,t){return(e=l(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function l(e){var t=y(e,"string");return"symbol"==r(t)?t:t+""}function y(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sendTransactionParser=void 0;var b=require("../../protocol"),R=require("../errors"),O=require("./rpc-parser"),E=p(p(p(p({},b.SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR,R.UnknownError),b.SEND_TRANSACTION_ERROR_CODES.USER_REJECTS_ERROR,R.UserRejectsError),b.SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR,R.BadRequestError),b.SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR,R.UnknownAppError),_=function(r){function t(){return e(this,t),o(this,t,arguments)}return a(t,O.RpcParser),n(t,[{key:"convertToRpcRequest",value:function(r){return{method:"sendTransaction",params:[JSON.stringify(r)]}}},{key:"parseAndThrowError",value:function(r){var e=R.UnknownError;throw r.error.code in E&&(e=E[r.error.code]||R.UnknownError),new e(r.error.message)}},{key:"convertFromRpcResponse",value:function(r){return{boc:r.result}}}])}();exports.sendTransactionParser=new _;
},{"../../protocol":"I0lp","../errors":"bdNY","./rpc-parser":"sbjx"}],"s194":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=p(e),c(t,a()?Reflect.construct(e,r||[],p(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DappMetadataError=void 0;var s=require("../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return l(r,s.TonConnectError),o(r,[{key:"info",get:function(){return"Passed DappMetadata is in incorrect format."}}])}();exports.DappMetadataError=b;
},{"../ton-connect.error":"DXpI"}],"X7Bw":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=s(e),c(t,a()?Reflect.construct(e,r||[],s(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ManifestContentErrorError=void 0;var y=require("../../../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return p(r,y.TonConnectError),o(r,[{key:"info",get:function(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}}])}();exports.ManifestContentErrorError=b;
},{"../../../ton-connect.error":"DXpI"}],"xeE3":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(t,e,r){return e=s(e),c(t,a()?Reflect.construct(e,r||[],s(t).constructor):e.apply(t,r))}function c(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ManifestNotFoundError=void 0;var y=require("../../../ton-connect.error"),b=function(t){function r(){return e(this,r),u(this,r,arguments)}return p(r,y.TonConnectError),o(r,[{key:"info",get:function(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}}])}();exports.ManifestNotFoundError=b;
},{"../../../ton-connect.error":"DXpI"}],"VR9f":[function(require,module,exports) {
"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(e)}function e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function o(r,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,i(n.key),n)}}function n(r,e,n){return e&&o(r.prototype,e),n&&o(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function t(r,e,o){return(e=i(e))in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}function i(e){var o=E(e,"string");return"symbol"==r(o)?o:o+""}function E(e,o){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,o||"default");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectErrorsParser=void 0;var u=require("../errors"),c=require("../errors/protocol/events/connect/manifest-content-error.error"),R=require("../errors/protocol/events/connect/manifest-not-found.error"),a=require("../errors"),f=require("../../protocol"),s=t(t(t(t(t(t({},f.CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,a.UnknownError),f.CONNECT_EVENT_ERROR_CODES.USER_REJECTS_ERROR,u.UserRejectsError),f.CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR,u.BadRequestError),f.CONNECT_EVENT_ERROR_CODES.UNKNOWN_APP_ERROR,u.UnknownAppError),f.CONNECT_EVENT_ERROR_CODES.MANIFEST_NOT_FOUND_ERROR,R.ManifestNotFoundError),f.CONNECT_EVENT_ERROR_CODES.MANIFEST_CONTENT_ERROR,c.ManifestContentErrorError),l=function(){return n(function r(){e(this,r)},[{key:"parseError",value:function(r){var e=a.UnknownError;return r.code in s&&(e=s[r.code]||a.UnknownError),new e(r.message)}}])}();exports.connectErrorsParser=new l;
},{"../errors":"bdNY","../errors/protocol/events/connect/manifest-content-error.error":"X7Bw","../errors/protocol/events/connect/manifest-not-found.error":"xeE3","../../protocol":"I0lp"}],"uJ38":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){e=function(){return n};var r,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(r){h=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),s=new q(n||[]);return a(i,"_invoke",{value:O(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var d="suspendedStart",v="suspendedYield",y="executing",g="completed",w={};function m(){}function b(){}function k(){}var E={};h(E,c,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(W([])));S&&S!==o&&i.call(S,c)&&(E=S);var C=k.prototype=m.prototype=Object.create(E);function L(t){["next","throw","return"].forEach(function(e){h(t,e,function(t){return this._invoke(e,t)})})}function _(e,r){function n(o,a,s,c){var u=p(e[o],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==t(h)&&i.call(h,"__await")?r.resolve(h.__await).then(function(t){n("next",t,s,c)},function(t){n("throw",t,s,c)}):r.resolve(h).then(function(t){l.value=t,s(l)},function(t){return n("throw",t,s,c)})}c(u.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r(function(r,o){n(t,e,r,o)})}return o=o?o.then(i,i):i()}})}function O(t,e,n){var o=d;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===w)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=p(t,e,n);if("normal"===u.type){if(o=n.done?g:v,u.arg===w)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=g,n.method="throw",n.arg=u.arg)}}}function P(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,P(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var i=p(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,w;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,w):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function W(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(i.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return b.prototype=k,a(C,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:b,configurable:!0}),b.displayName=h(k,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,h(t,l,"GeneratorFunction")),t.prototype=Object.create(C),t},n.awrap=function(t){return{__await:t}},L(_.prototype),h(_.prototype,u,function(){return this}),n.AsyncIterator=_,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new _(f(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},L(C),h(C,l,"Generator"),h(C,c,function(){return this}),h(C,"toString",function(){return"[object Generator]"}),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=W,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return s.type="throw",s.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:W(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),w}},n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e){var r=a(e,"string");return"symbol"==t(r)?r:r+""}function a(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(e){i(e)}}function s(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},c=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OKXTonConnect=void 0;var u=require("./errors"),l=require("./wallets-list-manager"),h=require("./provider/bridge/bridge-provider"),f=require("./storage/default-storage"),p=require("./utils/feature-support"),d=require("./tracker/ton-connect-tracker"),v=require("./parsers/send-transaction-parser"),y=require("./constants/version"),g=require("./errors/dapp/dapp-metadata.error"),w=require("./storage/bridge-connection-storage"),m=require("./parsers/connect-errors-parser"),b=require("./utils/log"),k=require("./errors/protocol/events/connect/manifest-not-found.error"),E=require("./errors/protocol/events/connect/manifest-content-error.error"),x=function(){return o(function t(e){if(r(this,t),this.walletsList=new l.WalletsListManager,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.storage=new f.DefaultStorage,!(null==e?void 0:e.metaData))throw new g.DappMetadataError("Dapp metaData can not be null");this.dappSettings={metaData:e.metaData},this.walletsList=new l.WalletsListManager,this.tracker=new d.TonConnectTracker({tonConnectSdkVersion:y.tonConnectSdkVersion}),this.bridgeConnectionStorage=new w.BridgeConnectionStorage(this.storage)},[{key:"connected",get:function(){return null!==this._wallet}},{key:"account",get:function(){var t;return(null===(t=this._wallet)||void 0===t?void 0:t.account)||null}},{key:"wallet",get:function(){return this._wallet},set:function(t){var e=this;this._wallet=t,this.statusChangeSubscriptions.forEach(function(t){return t(e._wallet)})}},{key:"connect",value:function(t){return s(this,void 0,void 0,e().mark(function r(){var n,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("sdk调试打印---\x3e> connect",t),!this.connected){e.next=3;break}throw new u.WalletAlreadyConnectedError;case 3:return null===(n=this.provider)||void 0===n||n.closeConnection(),o=this.getWallets()[0],console.log("sdk调试打印---\x3e> walletInfo---\x3e>>>>",o),this.provider=new h.BridgeProvider(this.storage,{universalLink:o.universalLink,bridgeUrl:o.bridgeUrl}),this.provider.listen(this.walletEventsListener.bind(this)),this.tracker.trackConnectionStarted(),e.abrupt("return",this.provider.connect(this.createConnectRequest(t),null==t?void 0:t.redirect));case 10:case"end":return e.stop()}},r,this)}))}},{key:"walletEventsListener",value:function(t){switch(t.event){case"connect":this.onWalletConnected(t.payload);break;case"connect_error":this.onWalletConnectError(t.payload);break;case"disconnect":this.onWalletDisconnected("wallet")}}},{key:"onWalletConnected",value:function(t){var e=t.items.find(function(t){return"ton_addr"===t.name}),r=t.items.find(function(t){return"ton_proof"===t.name});if(!e)throw new u.TonConnectError("ton_addr connection item was not found");var n={device:t.device,provider:this.provider.type,account:{address:e.address,chain:e.network,walletStateInit:e.walletStateInit,publicKey:e.publicKey}};r&&(n.connectItems={tonProof:r}),this.wallet=n,this.tracker.trackConnectionCompleted(n)}},{key:"onWalletConnectError",value:function(t){var e,r=m.connectErrorsParser.parseError(t);if(this.statusChangeErrorSubscriptions.forEach(function(t){return t(r)}),(0,b.logDebug)(r),this.tracker.trackConnectionError(null!==(e=t.message)&&void 0!==e?e:"",t.code),r instanceof k.ManifestNotFoundError||r instanceof E.ManifestContentErrorError)throw(0,b.logError)(r),r}},{key:"onWalletDisconnected",value:function(t){this.tracker.trackDisconnection(this.wallet,t),this.wallet=null}},{key:"disconnect",value:function(){return s(this,void 0,void 0,e().mark(function t(){var r;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connected){t.next=2;break}throw new u.WalletNotConnectedError;case 2:return this.onWalletDisconnected("dapp"),t.next=5,null===(r=this.provider)||void 0===r?void 0:r.disconnect();case 5:case"end":return t.stop()}},t,this)}))}},{key:"getWallets",value:function(){return this.walletsList.getWallets()}},{key:"onStatusChange",value:function(t,e){var r=this;return this.statusChangeSubscriptions.push(t),e&&this.statusChangeErrorSubscriptions.push(e),function(){r.statusChangeSubscriptions=r.statusChangeSubscriptions.filter(function(e){return e!==t}),e&&(r.statusChangeErrorSubscriptions=r.statusChangeErrorSubscriptions.filter(function(t){return t!==e}))}}},{key:"restoreConnection",value:function(){return s(this,void 0,void 0,e().mark(function t(){var r,n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.tracker.trackConnectionRestoringStarted(),n=null,t.prev=2,t.next=5,h.BridgeProvider.fromStorage(this.storage);case 5:n=t.sent,t.next=16;break;case 8:return t.prev=8,t.t0=t.catch(2),this.tracker.trackConnectionRestoringError("Provider is not restored"),t.next=13,this.bridgeConnectionStorage.removeConnection();case 13:return null==n||n.closeConnection(),n=null,t.abrupt("return");case 16:if(n){t.next=20;break}return(0,b.logError)("Provider is not restored"),this.tracker.trackConnectionRestoringError("Provider is not restored"),t.abrupt("return");case 20:return null===(r=this.provider)||void 0===r||r.closeConnection(),this.provider=n,n.listen(this.walletEventsListener.bind(this)),t.abrupt("return",this.provider.restoreConnection());case 24:case"end":return t.stop()}},t,this,[[2,8]])}))}},{key:"sendTransaction",value:function(t,r){return s(this,void 0,void 0,e().mark(function n(){var o,i,a,s,u,l;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkConnection(),(0,p.checkSendTransactionSupport)(this.wallet.device.features,{requiredMessagesNumber:t.messages.length}),this.tracker.trackTransactionSentForSignature(this.wallet,t),console.log("sendTransaction  start"),o=t.validUntil,i=c(t,["validUntil"]),a=t.from||this.account.address,s=t.network||this.account.chain,console.log("sendTransaction  before sendRequest"),e.next=10,this.provider.sendRequest(v.sendTransactionParser.convertToRpcRequest(Object.assign(Object.assign({},i),{valid_until:o,from:a,network:s})),{onRequestSent:null==r?void 0:r.onRequestSent});case 10:if(u=e.sent,!v.sendTransactionParser.isError(u)){e.next=14;break}return this.tracker.trackTransactionSigningFailed(this.wallet,t,u.error.message,u.error.code),e.abrupt("return",v.sendTransactionParser.parseAndThrowError(u));case 14:return l=v.sendTransactionParser.convertFromRpcResponse(u),this.tracker.trackTransactionSigned(this.wallet,t,l),e.abrupt("return",l);case 17:case"end":return e.stop()}},n,this)}))}},{key:"checkConnection",value:function(){if(!this.connected)throw new u.WalletNotConnectedError}},{key:"createConnectRequest",value:function(t){var e=[{name:"ton_addr"}];return(null==t?void 0:t.tonProof)&&e.push({name:"ton_proof",payload:t.tonProof}),{dappInfo:this.dappSettings.metaData,items:e}}}])}();exports.OKXTonConnect=x;
},{"./errors":"bdNY","./wallets-list-manager":"ptWY","./provider/bridge/bridge-provider":"Mmw4","./storage/default-storage":"CrO5","./utils/feature-support":"ycdw","./tracker/ton-connect-tracker":"fMZN","./parsers/send-transaction-parser":"wzT1","./constants/version":"Lds1","./errors/dapp/dapp-metadata.error":"s194","./storage/bridge-connection-storage":"IFT9","./parsers/connect-errors-parser":"VR9f","./utils/log":"vYZ0","./errors/protocol/events/connect/manifest-not-found.error":"xeE3","./errors/protocol/events/connect/manifest-content-error.error":"X7Bw"}],"Focm":[function(require,module,exports) {
"use strict";var e=i(require("./ton/tonsdk/ton-connect.ts")),t=i(require("./utils/connect/connect.ts")),n=i(require("./utils/utils.js")),r=require("./utils/crypto.js"),o=require("./utils/connect/connectionManager.ts");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}var a={CONNECT:t,TON:new e.OKXTonConnect({metaData:{name:"测试dapp",icon:"",url:""}}),testCrypto:new r.SessionCrypto,utils:n,testCM:new o.ConnectionManager};module.exports={OKWalletConnectSDK:a};
},{"./ton/tonsdk/ton-connect.ts":"uJ38","./utils/connect/connect.ts":"KoIY","./utils/utils.js":"RiUx","./utils/crypto.js":"utrV","./utils/connect/connectionManager.ts":"M4Kr"}]},{},["Focm"], null)